# Traffic Management Platform - Environment Configuration
# Copy this file to .env and update with your values

# ========================================
# APPLICATION
# ========================================
NODE_ENV=production
PORT=3001
LOG_LEVEL=info

# ========================================
# SECURITY
# ========================================
# JWT Secret - MUST be changed in production!
# Generate with: openssl rand -base64 32
JWT_SECRET=change-me-in-production-use-strong-random-string

# JWT Token Expiration
JWT_EXPIRES_IN=24h

# API Keys (comma-separated for multiple keys)
# Format: key1:name1:permissions1,key2:name2:permissions2
API_KEYS=test-api-key-12345:TestClient:read|write,demo-api-key-67890:DemoClient:read

# ========================================
# DATABASE
# ========================================
DATABASE_PATH=./database/sqlite/traffic_manager.db
DATABASE_BACKUP_PATH=./backups

# ========================================
# REDIS (Optional - for distributed rate limiting)
# ========================================
REDIS_ENABLED=false
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis-password
REDIS_DB=0

# ========================================
# RATE LIMITING
# ========================================
# Global rate limit (requests per 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Strict rate limit for authentication endpoints
RATE_LIMIT_AUTH_WINDOW_MS=900000
RATE_LIMIT_AUTH_MAX_REQUESTS=10

# ========================================
# CORS
# ========================================
# Allowed origins (comma-separated)
# Use * for all origins (NOT recommended for production)
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# ========================================
# LOGGING
# ========================================
LOG_FORMAT=json
LOG_FILE_PATH=./logs/application.log
LOG_ERROR_FILE_PATH=./logs/error.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7d

# ========================================
# MONITORING
# ========================================
# Enable metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9091

# Health check endpoint
HEALTH_CHECK_ENABLED=true

# ========================================
# PERFORMANCE
# ========================================
# Request timeout (milliseconds)
REQUEST_TIMEOUT=30000

# Body size limit
BODY_SIZE_LIMIT=10mb

# ========================================
# BACKUP
# ========================================
# Automatic backup schedule (cron format)
# Default: Daily at 2 AM
BACKUP_SCHEDULE=0 2 * * *

# Number of backups to retain
BACKUP_RETENTION_DAYS=30

# ========================================
# NGINX (if using reverse proxy)
# ========================================
NGINX_MAX_BODY_SIZE=10m
NGINX_TIMEOUT=30s

# ========================================
# MONITORING SERVICES (Optional)
# ========================================
# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# ========================================
# DEPLOYMENT
# ========================================
# Docker compose project name
COMPOSE_PROJECT_NAME=traffic-manager

# Container restart policy
RESTART_POLICY=unless-stopped

# ========================================
# NOTIFICATIONS (Optional)
# ========================================
# Email notifications for alerts
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=
ALERT_EMAIL=

# Slack webhook for notifications
SLACK_WEBHOOK_URL=

# ========================================
# EXTERNAL SERVICES
# ========================================
# MaxMind GeoIP (for IP geolocation)
MAXMIND_LICENSE_KEY=
MAXMIND_ACCOUNT_ID=

# Sentry (for error tracking)
SENTRY_DSN=

# ========================================
# DEVELOPMENT (Only for development)
# ========================================
# Enable debug mode
DEBUG=false

# Disable authentication (NEVER use in production!)
DISABLE_AUTH=false

# Mock external services
MOCK_EXTERNAL_SERVICES=false
