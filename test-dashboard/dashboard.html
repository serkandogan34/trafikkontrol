    <!DOCTYPE html>
    <html lang="tr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Traffic Management - Dashboard</title>
        <script>
          // Suppress Tailwind production warning and console errors
          window.process = { env: { NODE_ENV: 'development' } };
          
          // Suppress console warnings in production
          if (window.location.hostname !== 'localhost') {
            const originalWarn = console.warn;
            console.warn = function(...args) {
              if (args[0] && args[0].includes && args[0].includes('cdn.tailwindcss.com')) {
                return; // Suppress Tailwind CDN warning
              }
              originalWarn.apply(console, args);
            };
          }
        </script>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gray-900 text-white min-h-screen">
        <!-- Top Navigation -->
        <nav class="bg-gray-800 border-b border-gray-700">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <h1 class="text-xl font-bold">
                            <i class="fas fa-shield-alt mr-2 text-blue-400"></i>
                            Traffic Management
                        </h1>
                    </div>
                    
                    <div class="flex space-x-4">
                        <button onclick="showSection('domains')" id="btn-domains" 
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-globe mr-2"></i>Domainler
                        </button>
                        <button onclick="showSection('traffic')" id="btn-traffic"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-chart-line mr-2"></i>Trafik
                        </button>
                        <button onclick="showSection('dns')" id="btn-dns"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-network-wired mr-2"></i>DNS
                        </button>
                        <button onclick="showSection('nginx')" id="btn-nginx"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-server mr-2"></i>NGINX
                        </button>
                        <button onclick="showSection('security')" id="btn-security"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-lock mr-2"></i>Güvenlik
                        </button>
                        <button onclick="showSection('deploy')" id="btn-deploy"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-rocket mr-2"></i>Deploy
                        </button>
                        <button onclick="showSection('settings')" id="btn-settings"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-cog mr-2"></i>Ayarlar
                        </button>
                        <button onclick="logout()" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors">
                            <i class="fas fa-sign-out-alt mr-2"></i>Çıkış
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <!-- Domain Management Section -->
            <div id="section-domains" class="section">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-globe mr-2 text-blue-400"></i>
                            Domain Yönetimi
                        </h2>
                        <div class="flex space-x-3">
                            <button onclick="showIPPoolDashboard()" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-globe-americas mr-2"></i>Global IP Pool
                            </button>
                            <button onclick="showAddDomain()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-plus mr-2"></i>Yeni Domain
                            </button>
                        </div>
                    </div>
                    
                    <div id="domainList" class="space-y-4">
                        <!-- Domains will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Traffic Analysis Section -->
            <div id="section-traffic" class="section hidden">
                <!-- Header Section -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-chart-line mr-2 text-green-400"></i>
                            Advanced Traffic Analytics & Visitor Intelligence
                        </h2>
                        <div class="flex space-x-3">
                            <select id="traffic-time-range" class="bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="1h">Son 1 Saat</option>
                                <option value="24h" selected>Son 24 Saat</option>
                                <option value="7d">Son 7 Gün</option>
                                <option value="30d">Son 30 Gün</option>
                            </select>
                            <button onclick="exportTrafficData()" 
                                    class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                            <button onclick="loadTrafficData()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Real-time Statistics Dashboard -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm">Total Requests</p>
                                    <p class="text-3xl font-bold" id="traffic-total-requests">0</p>
                                    <p class="text-blue-200 text-xs">
                                        <span id="traffic-requests-trend">+0%</span> vs yesterday
                                    </p>
                                </div>
                                <div class="bg-blue-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-chart-bar text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-green-500 to-green-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm">Unique Visitors</p>
                                    <p class="text-3xl font-bold" id="traffic-unique-visitors">0</p>
                                    <p class="text-green-200 text-xs">
                                        <span id="traffic-visitors-trend">+0%</span> vs yesterday
                                    </p>
                                </div>
                                <div class="bg-green-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-users text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100 text-sm">Bot Traffic</p>
                                    <p class="text-3xl font-bold" id="traffic-bot-requests">0</p>
                                    <p class="text-purple-200 text-xs">
                                        <span id="traffic-bot-percentage">0%</span> of total
                                    </p>
                                </div>
                                <div class="bg-purple-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-robot text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-red-500 to-red-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-red-100 text-sm">Blocked Requests</p>
                                    <p class="text-3xl font-bold" id="traffic-blocked-requests">0</p>
                                    <p class="text-red-200 text-xs">
                                        <span id="traffic-block-rate">0%</span> block rate
                                    </p>
                                </div>
                                <div class="bg-red-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-shield-alt text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Analytics Tabs -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex border-b border-gray-700 mb-6">
                        <button onclick="showTrafficTab('overview')" id="traffic-tab-overview" 
                                class="traffic-tab-btn px-4 py-2 font-medium rounded-t-lg border-b-2 border-green-400 bg-gray-700 text-green-400">
                            <i class="fas fa-tachometer-alt mr-2"></i>Overview
                        </button>
                        <button onclick="showTrafficTab('realtime')" id="traffic-tab-realtime" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-broadcast-tower mr-2"></i>Real-time
                        </button>
                        <button onclick="showTrafficTab('geographic')" id="traffic-tab-geographic" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-globe-americas mr-2"></i>Geographic
                        </button>
                        <button onclick="showTrafficTab('devices')" id="traffic-tab-devices" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-mobile-alt mr-2"></i>Devices
                        </button>
                        <button onclick="showTrafficTab('sources')" id="traffic-tab-sources" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-external-link-alt mr-2"></i>Sources
                        </button>
                        <button onclick="showTrafficTab('behavior')" id="traffic-tab-behavior" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-user-check mr-2"></i>Behavior
                        </button>
                        <button onclick="showTrafficTab('security')" id="traffic-tab-security" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-shield-alt mr-2"></i>Security
                        </button>
                    </div>

                    <!-- Overview Tab -->
                    <div id="traffic-tab-content-overview" class="traffic-tab-content">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Traffic Trends Chart -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-chart-line mr-2 text-green-400"></i>
                                    Traffic Trends
                                </h3>
                                <div id="traffic-trends-chart" class="h-64 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-chart-line text-4xl mb-2"></i>
                                        <p>Traffic trend chart will appear here</p>
                                        <p class="text-sm">Real-time data visualization</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Top Pages -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-file-alt mr-2 text-blue-400"></i>
                                    Top Pages
                                </h3>
                                <div id="traffic-top-pages" class="space-y-3 max-h-64 overflow-y-auto">
                                    <!-- Dynamic content -->
                                </div>
                            </div>

                            <!-- Bot Analysis -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-robot mr-2 text-purple-400"></i>
                                    Bot Traffic Analysis
                                </h3>
                                <div id="traffic-bot-analysis" class="space-y-3">
                                    <!-- Dynamic content -->
                                </div>
                            </div>

                            <!-- Performance Metrics -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-stopwatch mr-2 text-yellow-400"></i>
                                    Performance Metrics
                                </h3>
                                <div id="traffic-performance-metrics" class="space-y-3">
                                    <!-- Dynamic content -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Real-time Tab -->
                    <div id="traffic-tab-content-realtime" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                            <!-- Live Visitors -->
                            <div class="xl:col-span-2 bg-gray-700 p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold flex items-center">
                                        <i class="fas fa-eye mr-2 text-green-400"></i>
                                        Live Visitors
                                    </h3>
                                    <div class="flex items-center text-green-400">
                                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"></div>
                                        <span id="live-visitor-count">0</span> online
                                    </div>
                                </div>
                                <div id="live-visitors-list" class="space-y-2 max-h-96 overflow-y-auto">
                                    <!-- Dynamic real-time visitor entries -->
                                </div>
                            </div>

                            <!-- Real-time Stats -->
                            <div class="space-y-4">
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 flex items-center">
                                        <i class="fas fa-clock mr-2 text-blue-400"></i>
                                        Real-time Stats
                                    </h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span>Active Sessions:</span>
                                            <span id="realtime-active-sessions" class="text-green-400 font-bold">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Requests/min:</span>
                                            <span id="realtime-requests-per-min" class="text-blue-400 font-bold">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Avg. Response Time:</span>
                                            <span id="realtime-avg-response" class="text-yellow-400 font-bold">0ms</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Bot Detection:</span>
                                            <span id="realtime-bot-rate" class="text-purple-400 font-bold">0%</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 flex items-center">
                                        <i class="fas fa-chart-pie mr-2 text-indigo-400"></i>
                                        Traffic Sources
                                    </h4>
                                    <div id="realtime-traffic-sources" class="space-y-2">
                                        <!-- Dynamic source breakdown -->
                                    </div>
                                </div>

                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-2 text-red-400"></i>
                                        Security Alerts
                                    </h4>
                                    <div id="realtime-security-alerts" class="space-y-2 max-h-32 overflow-y-auto">
                                        <!-- Dynamic security alerts -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Geographic Tab -->
                    <div id="traffic-tab-content-geographic" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- World Map Visualization -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-globe mr-2 text-blue-400"></i>
                                    Global Traffic Distribution
                                </h3>
                                <div id="geographic-world-map" class="h-80 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-globe text-6xl mb-4"></i>
                                        <p>Interactive world map</p>
                                        <p class="text-sm">Showing visitor distribution by country</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Country Statistics -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-flag mr-2 text-green-400"></i>
                                    Top Countries
                                </h3>
                                <div id="geographic-country-stats" class="space-y-3 max-h-80 overflow-y-auto">
                                    <!-- Dynamic country statistics -->
                                </div>
                            </div>

                            <!-- City Analysis -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-city mr-2 text-purple-400"></i>
                                    Top Cities
                                </h3>
                                <div id="geographic-city-stats" class="space-y-3 max-h-80 overflow-y-auto">
                                    <!-- Dynamic city statistics -->
                                </div>
                            </div>

                            <!-- Regional Performance -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-tachometer-alt mr-2 text-yellow-400"></i>
                                    Regional Performance
                                </h3>
                                <div id="geographic-performance-stats" class="space-y-3">
                                    <!-- Dynamic regional performance -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Other tabs content will be continued... -->
                    <div id="traffic-tab-content-devices" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Device Types</h3>
                                <div id="device-types-chart" class="h-48 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-mobile-alt text-4xl mb-2"></i>
                                        <p>Device breakdown chart</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Operating Systems</h3>
                                <div id="os-stats" class="space-y-2">
                                    <!-- Dynamic OS stats -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Browsers</h3>
                                <div id="browser-stats" class="space-y-2">
                                    <!-- Dynamic browser stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="traffic-tab-content-sources" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Referrer Sources</h3>
                                <div id="referrer-stats" class="space-y-2">
                                    <!-- Dynamic referrer stats -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Search Engines</h3>
                                <div id="search-engine-stats" class="space-y-2">
                                    <!-- Dynamic search engine stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="traffic-tab-content-behavior" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">User Flow</h3>
                                <div id="user-flow-chart" class="h-64 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-route text-4xl mb-2"></i>
                                        <p>User journey visualization</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Session Duration</h3>
                                <div id="session-duration-stats" class="space-y-2">
                                    <!-- Dynamic session stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="traffic-tab-content-security" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Threat Analysis</h3>
                                <div id="threat-analysis" class="space-y-2">
                                    <!-- Dynamic threat analysis -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Attack Patterns</h3>
                                <div id="attack-patterns" class="space-y-2">
                                    <!-- Dynamic attack patterns -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Filters and Controls -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-filter mr-2 text-blue-400"></i>
                            Advanced Filtering & Segmentation
                        </h3>
                        <button onclick="resetTrafficFilters()" class="text-sm text-gray-400 hover:text-white">
                            <i class="fas fa-undo mr-1"></i>Reset Filters
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Domain Filter</label>
                            <select id="traffic-filter-domain" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Domains</option>
                                <!-- Dynamic domain options -->
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Traffic Type</label>
                            <select id="traffic-filter-type" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Traffic</option>
                                <option value="human">Human Only</option>
                                <option value="bot">Bot Only</option>
                                <option value="verified_bot">Verified Bots</option>
                                <option value="suspicious">Suspicious</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Geographic Region</label>
                            <select id="traffic-filter-region" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Regions</option>
                                <option value="NA">North America</option>
                                <option value="EU">Europe</option>
                                <option value="AS">Asia</option>
                                <option value="SA">South America</option>
                                <option value="AF">Africa</option>
                                <option value="OC">Oceania</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Device Category</label>
                            <select id="traffic-filter-device" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Devices</option>
                                <option value="desktop">Desktop</option>
                                <option value="mobile">Mobile</option>
                                <option value="tablet">Tablet</option>
                                <option value="bot">Bot/Crawler</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NGINX Multi-Domain Configuration Section -->
            <div id="section-nginx" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-server mr-2 text-purple-400"></i>
                            NGINX Multi-Domain Konfigürasyonu
                        </h2>
                        <div class="flex space-x-3">
                            <button onclick="createTestDomainForNginx()" 
                                    class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-flask mr-2"></i>Test Domain Oluştur
                            </button>
                            <button onclick="refreshDomainConfigs()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>Yenile
                            </button>
                            <button onclick="generateAdvancedNginxConfig()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-magic mr-2"></i>Config Oluştur
                            </button>
                        </div>
                    </div>

                    <!-- Overview Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Toplam Domain</p>
                                    <p class="text-2xl font-bold text-purple-400" id="nginx-total-domains">0</p>
                                </div>
                                <div class="bg-purple-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-globe text-purple-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Aktif Config</p>
                                    <p class="text-2xl font-bold text-green-400" id="nginx-active-configs">0</p>
                                </div>
                                <div class="bg-green-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-check-circle text-green-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Backend Servers</p>
                                    <p class="text-2xl font-bold text-blue-400" id="nginx-backend-count">0</p>
                                </div>
                                <div class="bg-blue-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-server text-blue-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Config Size</p>
                                    <p class="text-2xl font-bold text-orange-400" id="nginx-config-size">0 KB</p>
                                </div>
                                <div class="bg-orange-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-file-code text-orange-400"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Domain Configuration Management -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold flex items-center">
                                <i class="fas fa-cog mr-2 text-yellow-400"></i>
                                Domain Backend Konfigürasyonları
                            </h3>
                            <button onclick="addNewDomainConfig()" 
                                    class="bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded text-sm">
                                <i class="fas fa-plus mr-1"></i>Yeni Config
                            </button>
                        </div>
                        
                        <div id="domain-configs-container" class="space-y-4">
                            <!-- Domain configurations will be loaded here -->
                            <div class="text-center py-8 text-gray-400">
                                <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                                <p>Domain konfigürasyonları yükleniyor...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Global Settings -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-globe mr-2 text-cyan-400"></i>
                                Global Settings
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Rate Limiting (req/sec)</label>
                                    <input type="number" id="global-rate-limit" 
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded"
                                           value="10" min="1" max="100">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Bot Rate Limit (req/sec)</label>
                                    <input type="number" id="bot-rate-limit" 
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded"
                                           value="1" min="1" max="10">
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-geoip" class="rounded">
                                    <label for="enable-geoip" class="text-sm">Enable GeoIP Detection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-analytics" class="rounded" checked>
                                    <label for="enable-analytics" class="text-sm">Enable Traffic Analytics</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-shield-alt mr-2 text-red-400"></i>
                                Security Settings
                            </h3>
                            <div class="space-y-3">
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-bot-protection" class="rounded" checked>
                                    <label for="enable-bot-protection" class="text-sm">Advanced Bot Protection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-ddos-protection" class="rounded" checked>
                                    <label for="enable-ddos-protection" class="text-sm">DDoS Protection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-referrer-check" class="rounded" checked>
                                    <label for="enable-referrer-check" class="text-sm">Facebook Referrer Detection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="block-suspicious" class="rounded">
                                    <label for="block-suspicious" class="text-sm">Block Suspicious Traffic</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Config Preview and Actions -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold flex items-center">
                                <i class="fas fa-eye mr-2 text-cyan-400"></i>
                                Generated NGINX Configuration
                            </h3>
                            <div class="flex space-x-2">
                                <button onclick="copyConfigToClipboard()" 
                                        class="bg-gray-600 hover:bg-gray-500 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-copy mr-1"></i>Copy
                                </button>
                                <button onclick="downloadAdvancedConfig()" 
                                        class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-download mr-1"></i>Download
                                </button>
                            </div>
                        </div>
                        <div class="bg-black p-4 rounded border font-mono text-xs overflow-auto max-h-96">
                            <pre id="advanced-nginx-config-preview" class="text-green-400 whitespace-pre-wrap">
# NGINX Configuration
# "Config Oluştur" butonuna tıklayın
                            </pre>
                        </div>
                    </div>
                    
                    <!-- Deploy Actions -->
                    <div class="flex flex-wrap gap-4">
                        <button onclick="generateAdvancedNginxConfig()" 
                                class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-magic mr-2"></i>Config Oluştur
                        </button>
                        <button onclick="validateNginxConfig()" 
                                class="bg-yellow-600 hover:bg-yellow-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-check-circle mr-2"></i>Config Doğrula
                        </button>
                        <button onclick="deployNginxConfig()" 
                                class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-rocket mr-2"></i>Deploy Config
                        </button>
                        <button onclick="testNginxConfig()" 
                                class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-vial mr-2"></i>Test Config
                        </button>
                    </div>
                </div>
            </div>

            <!-- DNS Management Section -->
            <div id="section-dns" class="section hidden">
                <!-- Header Section -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-network-wired mr-2 text-purple-400"></i>
                            Advanced DNS Management
                        </h2>
                        
                        <div class="flex space-x-3">
                            <select id="dns-zone-selector" class="bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                                <option value="">Select Zone</option>
                                <!-- Dynamic zone options -->
                            </select>
                            <button onclick="showDNSWizard()" 
                                    class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-magic mr-2"></i>DNS Wizard
                            </button>
                            <button onclick="showDNSAddModal()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-plus mr-2"></i>Add Record
                            </button>
                            <button onclick="importDNSRecords()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-upload mr-2"></i>Import
                            </button>
                            <button onclick="exportDNSRecords()" 
                                    class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>

                    <!-- Enhanced DNS Statistics Dashboard -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100 text-sm">Total Records</p>
                                    <p class="text-3xl font-bold" id="dns-total-records">0</p>
                                    <p class="text-purple-200 text-xs">
                                        <span id="dns-records-trend">+0</span> this month
                                    </p>
                                </div>
                                <div class="bg-purple-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-list text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-500 to-green-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm">Active Records</p>
                                    <p class="text-3xl font-bold" id="dns-active-records">0</p>
                                    <p class="text-green-200 text-xs">
                                        <span id="dns-health-score">98.5%</span> health score
                                    </p>
                                </div>
                                <div class="bg-green-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-check-circle text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-yellow-100 text-sm">Propagating</p>
                                    <p class="text-3xl font-bold" id="dns-propagating-records">0</p>
                                    <p class="text-yellow-200 text-xs">
                                        <span id="dns-avg-propagation">~15min</span> avg time
                                    </p>
                                </div>
                                <div class="bg-yellow-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-clock text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm">Providers</p>
                                    <p class="text-3xl font-bold" id="dns-providers-count">0</p>
                                    <p class="text-blue-200 text-xs">
                                        <span id="dns-provider-uptime">99.9%</span> uptime
                                    </p>
                                </div>
                                <div class="bg-blue-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-cloud text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-red-500 to-red-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-red-100 text-sm">Query Rate</p>
                                    <p class="text-3xl font-bold" id="dns-query-rate">0</p>
                                    <p class="text-red-200 text-xs">
                                        queries/sec
                                    </p>
                                </div>
                                <div class="bg-red-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-tachometer-alt text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DNS Management Tabs -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex border-b border-gray-700 mb-6">
                        <button onclick="showDNSTab('records')" id="dns-tab-records" 
                                class="dns-tab-btn px-4 py-2 font-medium rounded-t-lg border-b-2 border-purple-400 bg-gray-700 text-purple-400">
                            <i class="fas fa-database mr-2"></i>Records
                        </button>
                        <button onclick="showDNSTab('zones')" id="dns-tab-zones" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-sitemap mr-2"></i>Zones
                        </button>
                        <button onclick="showDNSTab('analytics')" id="dns-tab-analytics" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-chart-line mr-2"></i>Analytics
                        </button>
                        <button onclick="showDNSTab('security')" id="dns-tab-security" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-shield-alt mr-2"></i>Security
                        </button>
                        <button onclick="showDNSTab('health')" id="dns-tab-health" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-heartbeat mr-2"></i>Health Checks
                        </button>
                        <button onclick="showDNSTab('geodns')" id="dns-tab-geodns" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-globe mr-2"></i>GeoDNS
                        </button>
                        <button onclick="showDNSTab('proxy')" id="dns-tab-proxy" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-network-wired mr-2"></i>Proxy Management
                        </button>
                        <button onclick="showDNSTab('tools')" id="dns-tab-tools" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-tools mr-2"></i>Tools
                        </button>
                    </div>

                    <!-- DNS Records Tab -->
                    <div id="dns-tab-content-records" class="dns-tab-content">
                        <!-- Advanced Filtering System -->
                        <div class="bg-gray-700 p-4 rounded-lg mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold">Smart Filtering & Search</h3>
                                <button onclick="resetDNSFilters()" class="text-sm text-gray-400 hover:text-white">
                                    <i class="fas fa-undo mr-1"></i>Reset
                                </button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Search</label>
                                    <input type="text" id="dns-search-filter" placeholder="Search records..." 
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Record Type</label>
                                    <select id="dns-type-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All Types</option>
                                        <option value="A">A (IPv4)</option>
                                        <option value="AAAA">AAAA (IPv6)</option>
                                        <option value="CNAME">CNAME (Alias)</option>
                                        <option value="MX">MX (Mail)</option>
                                        <option value="TXT">TXT (Text)</option>
                                        <option value="NS">NS (Name Server)</option>
                                        <option value="PTR">PTR (Reverse)</option>
                                        <option value="SRV">SRV (Service)</option>
                                        <option value="CAA">CAA (Certificate)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Status</label>
                                    <select id="dns-status-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All Status</option>
                                        <option value="active">🟢 Active</option>
                                        <option value="pending">🟡 Pending</option>
                                        <option value="error">🔴 Error</option>
                                        <option value="disabled">⚪ Disabled</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Provider</label>
                                    <select id="dns-provider-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All Providers</option>
                                        <option value="CLOUDFLARE">Cloudflare</option>
                                        <option value="ROUTE53">AWS Route53</option>
                                        <option value="GODADDY">GoDaddy</option>
                                        <option value="NAMECHEAP">Namecheap</option>
                                        <option value="GOOGLE">Google DNS</option>
                                        <option value="CUSTOM">Custom</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">TTL Range</label>
                                    <select id="dns-ttl-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All TTL</option>
                                        <option value="60">1 min (60s)</option>
                                        <option value="300">5 min (300s)</option>
                                        <option value="1800">30 min (1800s)</option>
                                        <option value="3600">1 hour (3600s)</option>
                                        <option value="86400">1 day (86400s)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- DNS Records Table -->
                        <div class="bg-gray-700 rounded-lg overflow-hidden">
                            <div class="flex justify-between items-center p-4 border-b border-gray-600">
                                <div class="flex items-center space-x-4">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="select-all-dns" class="rounded mr-2">
                                        <span class="text-sm">Select All</span>
                                    </label>
                                    <span id="dns-selected-count" class="text-sm text-gray-400">0 selected</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="bulkDNSAction('enable')" class="px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm">
                                        <i class="fas fa-play mr-1"></i>Enable
                                    </button>
                                    <button onclick="bulkDNSAction('disable')" class="px-3 py-1 bg-yellow-600 hover:bg-yellow-700 rounded text-sm">
                                        <i class="fas fa-pause mr-1"></i>Disable
                                    </button>
                                    <button onclick="bulkDNSAction('delete')" class="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm">
                                        <i class="fas fa-trash mr-1"></i>Delete
                                    </button>
                                </div>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead class="bg-gray-600">
                                        <tr>
                                            <th class="px-4 py-3 text-left w-12"></th>
                                            <th class="px-4 py-3 text-left">Name</th>
                                            <th class="px-4 py-3 text-left">Type</th>
                                            <th class="px-4 py-3 text-left">Value</th>
                                            <th class="px-4 py-3 text-left">TTL</th>
                                            <th class="px-4 py-3 text-left">Provider</th>
                                            <th class="px-4 py-3 text-left">Status</th>
                                            <th class="px-4 py-3 text-left">Health</th>
                                            <th class="px-4 py-3 text-left">Queries</th>
                                            <th class="px-4 py-3 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="dns-records-table" class="divide-y divide-gray-600">
                                        <!-- DNS records will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div id="dns-loading" class="text-center py-8 hidden">
                                <i class="fas fa-spinner fa-spin text-2xl text-purple-400"></i>
                                <p class="text-gray-400 mt-2">Loading DNS records...</p>
                            </div>
                            
                            <div id="dns-empty" class="text-center py-8 hidden">
                                <i class="fas fa-inbox text-4xl text-gray-500 mb-4"></i>
                                <p class="text-gray-400">No DNS records found.</p>
                                <button onclick="showDNSAddModal()" 
                                        class="mt-4 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-plus mr-2"></i>Add your first record
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Zones Tab -->
                    <div id="dns-tab-content-zones" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">DNS Zones</h3>
                                <div id="dns-zones-list" class="space-y-3">
                                    <!-- Dynamic zones content -->
                                </div>
                                <button onclick="createNewDNSZone()" class="mt-4 w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-plus mr-2"></i>Create New Zone
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Zone Configuration</h3>
                                <div id="dns-zone-config" class="space-y-4">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-cogs text-4xl mb-2"></i>
                                        <p>Select a zone to configure</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Analytics Tab -->
                    <div id="dns-tab-content-analytics" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Query Statistics</h3>
                                <div id="dns-query-chart" class="h-64 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-chart-line text-4xl mb-2"></i>
                                        <p>DNS query analytics chart</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Performance Metrics</h3>
                                <div id="dns-performance-metrics" class="space-y-3">
                                    <!-- Dynamic performance metrics -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Top Queries</h3>
                                <div id="dns-top-queries" class="space-y-2">
                                    <!-- Dynamic top queries -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Response Codes</h3>
                                <div id="dns-response-codes" class="space-y-2">
                                    <!-- Dynamic response code stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Security Tab -->
                    <div id="dns-tab-content-security" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">DNSSEC Status</h3>
                                <div id="dns-dnssec-status" class="space-y-3">
                                    <!-- Dynamic DNSSEC status -->
                                </div>
                                <button onclick="enableDNSSEC()" class="mt-4 w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-shield-alt mr-2"></i>Enable DNSSEC
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Threat Detection</h3>
                                <div id="dns-threats" class="space-y-2">
                                    <!-- Dynamic threat information -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Security Policies</h3>
                                <div id="dns-security-policies" class="space-y-2">
                                    <!-- Dynamic security policies -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Health Checks Tab -->
                    <div id="dns-tab-content-health" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Health Monitoring</h3>
                                <div id="dns-health-monitors" class="space-y-3">
                                    <!-- Dynamic health monitor list -->
                                </div>
                                <button onclick="createHealthMonitor()" class="mt-4 w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-plus mr-2"></i>Add Health Check
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Uptime Statistics</h3>
                                <div id="dns-uptime-chart" class="h-48 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-heartbeat text-4xl mb-2"></i>
                                        <p>Uptime monitoring chart</p>
                                    </div>
                                </div>
                                <div id="dns-uptime-stats" class="mt-4 space-y-2">
                                    <!-- Dynamic uptime stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- GeoDNS Tab -->
                    <div id="dns-tab-content-geodns" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Geographic Routing</h3>
                                <div id="geodns-map" class="h-64 flex items-center justify-center border border-gray-600 rounded mb-4">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-globe-americas text-4xl mb-2"></i>
                                        <p>Interactive GeoDNS map</p>
                                    </div>
                                </div>
                                <button onclick="configureGeoDNS()" class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-cog mr-2"></i>Configure GeoDNS
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Regional Settings</h3>
                                <div id="geodns-regions" class="space-y-3">
                                    <!-- Dynamic regional configurations -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Tools Tab -->
                    <!-- Proxy Management Tab Content -->
                    <div id="dns-tab-content-proxy" class="dns-tab-content hidden">
                        <div class="space-y-6">
                            <!-- Proxy Management Header -->
                            <div class="bg-gray-700 p-6 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-semibold text-white">
                                        <i class="fas fa-network-wired mr-2 text-blue-400"></i>
                                        NGINX Proxy Management
                                    </h3>
                                    <div class="flex space-x-3">
                                        <button onclick="testAllProxyConfigs()" 
                                                class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                            <i class="fas fa-vial mr-2"></i>Test All
                                        </button>
                                        <button onclick="generateAllProxyConfigs()" 
                                                class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                                            <i class="fas fa-cog mr-2"></i>Generate Configs
                                        </button>
                                        <button onclick="downloadAllProxyConfigs()" 
                                                class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                            <i class="fas fa-download mr-2"></i>Download All
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Proxy Statistics -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <div class="bg-blue-600 bg-opacity-20 border border-blue-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-blue-300 text-sm">Total Domains</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-total-domains">0</p>
                                            </div>
                                            <i class="fas fa-globe text-blue-400 text-xl"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-600 bg-opacity-20 border border-green-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-green-300 text-sm">Active Proxies</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-active-count">0</p>
                                            </div>
                                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-yellow-600 bg-opacity-20 border border-yellow-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-yellow-300 text-sm">Health Issues</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-issues-count">0</p>
                                            </div>
                                            <i class="fas fa-exclamation-triangle text-yellow-400 text-xl"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-600 bg-opacity-20 border border-red-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-red-300 text-sm">Failed Tests</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-failed-count">0</p>
                                            </div>
                                            <i class="fas fa-times-circle text-red-400 text-xl"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Domain Proxy List -->
                            <div class="bg-gray-700 p-6 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">
                                    <i class="fas fa-list mr-2"></i>Domain Proxy Configurations
                                </h4>
                                
                                <div id="proxy-domains-list" class="space-y-4">
                                    <!-- Domain proxy cards will be populated here -->
                                    <div class="text-center py-8 text-gray-400" id="proxy-empty-state">
                                        <i class="fas fa-network-wired text-4xl mb-4"></i>
                                        <p>No domains found for proxy configuration</p>
                                        <p class="text-sm">Add domains in the Domains section to configure their proxy settings here.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Global Proxy Settings -->
                            <div class="bg-gray-700 p-6 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">
                                    <i class="fas fa-globe mr-2"></i>Global Proxy Settings
                                </h4>
                                
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Default Proxy Timeout (seconds)</label>
                                            <input type="number" id="global-proxy-timeout" value="30" min="1" max="300"
                                                   class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Default Max Body Size</label>
                                            <select id="global-max-body-size" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                                <option value="1m">1MB</option>
                                                <option value="10m" selected>10MB</option>
                                                <option value="50m">50MB</option>
                                                <option value="100m">100MB</option>
                                            </select>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Default Load Balancing</label>
                                            <select id="global-load-balancing" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                                <option value="round_robin" selected>Round Robin</option>
                                                <option value="least_connections">Least Connections</option>
                                                <option value="weighted">Weighted</option>
                                                <option value="geographic">Geographic</option>
                                            </select>
                                        </div>
                                        
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" id="global-health-checks" checked class="rounded">
                                            <label for="global-health-checks" class="text-sm text-gray-300">Enable health checks by default</label>
                                        </div>
                                        
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" id="global-ssl-mode" checked class="rounded">
                                            <label for="global-ssl-mode" class="text-sm text-gray-300">Auto SSL/TLS configuration</label>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-gray-600 p-4 rounded-lg">
                                        <h5 class="font-semibold text-gray-300 mb-3">
                                            <i class="fas fa-info-circle mr-2"></i>Proxy Management Guide
                                        </h5>
                                        <div class="text-sm text-gray-400 space-y-2">
                                            <p><strong class="text-white">Clean Backend:</strong> For bot/crawler traffic and content reviewers</p>
                                            <p><strong class="text-white">Gray Backend:</strong> For medium-risk human traffic</p>
                                            <p><strong class="text-white">Aggressive Backend:</strong> For verified human traffic with full sales funnel</p>
                                            <hr class="border-gray-500 my-3">
                                            <p><strong class="text-blue-300">Traffic Flow:</strong></p>
                                            <p class="text-xs">Visitor → Your Server → Traffic Analysis → Backend Selection → Original Hosting</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 flex space-x-3">
                                    <button onclick="saveGlobalProxySettings()" 
                                            class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-save mr-2"></i>Save Global Settings
                                    </button>
                                    <button onclick="resetGlobalProxySettings()" 
                                            class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-undo mr-2"></i>Reset to Defaults
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="dns-tab-content-tools" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">DNS Lookup Tools</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Domain to lookup</label>
                                        <input type="text" id="dns-lookup-domain" placeholder="example.com" 
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Record Type</label>
                                        <select id="dns-lookup-type" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg">
                                            <option value="A">A Record</option>
                                            <option value="AAAA">AAAA Record</option>
                                            <option value="CNAME">CNAME Record</option>
                                            <option value="MX">MX Record</option>
                                            <option value="TXT">TXT Record</option>
                                            <option value="NS">NS Record</option>
                                        </select>
                                    </div>
                                    <button onclick="performDNSLookup()" class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-search mr-2"></i>Lookup
                                    </button>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Lookup Results</h3>
                                <div id="dns-lookup-results" class="bg-gray-800 p-4 rounded text-sm font-mono min-h-48">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-search text-2xl mb-2"></i>
                                        <p>Lookup results will appear here</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Propagation Checker</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Check Propagation</label>
                                        <input type="text" id="dns-propagation-domain" placeholder="example.com" 
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg">
                                    </div>
                                    <button onclick="checkDNSPropagationGlobal()" class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-globe mr-2"></i>Check Propagation
                                    </button>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Propagation Status</h3>
                                <div id="dns-propagation-results" class="space-y-2">
                                    <!-- Dynamic propagation results -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                    <!-- DNS Records Filter -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Domain Filtresi</label>
                                <input type="text" id="dns-domain-filter" placeholder="Domain ara..." 
                                       class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Record Tipi</label>
                                <select id="dns-type-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    <option value="">Tümü</option>
                                    <option value="A">A Record</option>
                                    <option value="AAAA">AAAA Record</option>
                                    <option value="CNAME">CNAME Record</option>
                                    <option value="MX">MX Record</option>
                                    <option value="TXT">TXT Record</option>
                                    <option value="NS">NS Record</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Durum</label>
                                <select id="dns-status-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    <option value="">Tümü</option>
                                    <option value="active">Aktif</option>
                                    <option value="pending">Beklemede</option>
                                    <option value="error">Hatalı</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Sağlayıcı</label>
                                <select id="dns-provider-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    <option value="">Tümü</option>
                                    <option value="CLOUDFLARE">Cloudflare</option>
                                    <option value="GODADDY">GoDaddy</option>
                                    <option value="NAMECHEAP">Namecheap</option>
                                    <option value="CUSTOM">Özel</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Records Table -->
                    <div class="bg-gray-700 rounded-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-600">
                                    <tr>
                                        <th class="px-4 py-3 text-left">
                                            <input type="checkbox" id="select-all-dns" class="rounded">
                                        </th>
                                        <th class="px-4 py-3 text-left">Domain</th>
                                        <th class="px-4 py-3 text-left">Name</th>
                                        <th class="px-4 py-3 text-left">Type</th>
                                        <th class="px-4 py-3 text-left">Value</th>
                                        <th class="px-4 py-3 text-left">TTL</th>
                                        <th class="px-4 py-3 text-left">Provider</th>
                                        <th class="px-4 py-3 text-left">Status</th>
                                        <th class="px-4 py-3 text-left">Propagation</th>
                                        <th class="px-4 py-3 text-left">İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="dns-records-table" class="divide-y divide-gray-600">
                                    <!-- DNS records will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="dns-loading" class="text-center py-8 hidden">
                            <i class="fas fa-spinner fa-spin text-2xl text-purple-400"></i>
                            <p class="text-gray-400 mt-2">DNS kayıtları yükleniyor...</p>
                        </div>
                        
                        <div id="dns-empty" class="text-center py-8 hidden">
                            <i class="fas fa-inbox text-4xl text-gray-500 mb-4"></i>
                            <p class="text-gray-400">Henüz DNS kaydı bulunmuyor.</p>
                            <button onclick="showDNSAddModal()" 
                                    class="mt-4 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                <i class="fas fa-plus mr-2"></i>İlk DNS kaydını ekle
                            </button>
                        </div>
                    </div>
                    
                    <!-- Advanced DNS Features -->
                    <div class="mt-8 space-y-6">
                        <!-- Advanced Features Tab Navigation -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-purple-300">
                                <i class="fas fa-rocket mr-2"></i>Gelişmiş DNS Özellikleri
                            </h3>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <button onclick="showAdvancedDNSSection('geodns')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-globe mr-2"></i>GeoDNS
                                </button>
                                <button onclick="showAdvancedDNSSection('health')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-heartbeat mr-2"></i>Health Check
                                </button>
                                <button onclick="showAdvancedDNSSection('security')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-shield-alt mr-2"></i>Güvenlik
                                </button>
                                <button onclick="showAdvancedDNSSection('loadbalancing')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-balance-scale mr-2"></i>Load Balancing
                                </button>
                                <button onclick="showAdvancedDNSSection('cache')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-database mr-2"></i>Cache
                                </button>
                                <button onclick="exportDNSMetrics()" 
                                        class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors">
                                    <i class="fas fa-download mr-2"></i>Export
                                </button>
                            </div>
                        </div>

                        <!-- GeoDNS Section -->
                        <div id="advanced-dns-geodns" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-globe mr-2"></i>GeoDNS Management
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Test Domain</label>
                                        <input type="text" id="geodns-test-domain" 
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                               placeholder="example.com">
                                    </div>
                                    <button onclick="testGeoDNSResolution()" 
                                            class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-test-tube mr-2"></i>GeoDNS Testi Yap
                                    </button>
                                </div>
                                <div id="geodns-results" class="text-sm">
                                    <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                        GeoDNS test sonuçları burada görünecek
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Health Check Section -->
                        <div id="advanced-dns-health" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-heartbeat mr-2"></i>Gelişmiş Health Monitoring
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Hedef Sunucular (Her satırda bir)</label>
                                        <textarea id="health-targets" rows="4" 
                                                  class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                                  placeholder="example.com&#10;api.example.com&#10;cdn.example.com"></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Protokoller</label>
                                        <div class="flex space-x-4">
                                            <label class="flex items-center">
                                                <input type="checkbox" name="health-protocols" value="https" checked class="mr-2">
                                                HTTPS
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" name="health-protocols" value="http" class="mr-2">
                                                HTTP
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" name="health-protocols" value="tcp" class="mr-2">
                                                TCP
                                            </label>
                                        </div>
                                    </div>
                                    <button onclick="performAdvancedHealthCheck()" 
                                            class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-stethoscope mr-2"></i>Health Check Başlat
                                    </button>
                                </div>
                                <div id="health-results" class="text-sm max-h-64 overflow-y-auto">
                                    <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                        Health check sonuçları burada görünecek
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Security Analysis Section -->
                        <div id="advanced-dns-security" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-shield-alt mr-2"></i>DNS Güvenlik Analizi
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <button onclick="runBotDetectionAnalysis()" 
                                            class="w-full bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-robot mr-2"></i>Bot Detection Analizi
                                    </button>
                                    <button onclick="runSecurityAnalysis()" 
                                            class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-scan mr-2"></i>Güvenlik Taraması
                                    </button>
                                    <div id="bot-detection-results" class="text-sm">
                                        <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                            Bot detection analizi burada görünecek
                                        </div>
                                    </div>
                                </div>
                                <div id="security-analysis-results" class="text-sm">
                                    <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                        Güvenlik analizi sonuçları burada görünecek
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Load Balancing Section -->
                        <div id="advanced-dns-loadbalancing" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-balance-scale mr-2"></i>DNS Load Balancing
                            </h4>
                            <div id="load-balancing-info">
                                <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                    <i class="fas fa-spinner fa-spin mr-2"></i>Load balancing bilgileri yükleniyor...
                                </div>
                            </div>
                        </div>

                        <!-- Cache Management Section -->
                        <div id="advanced-dns-cache" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-database mr-2"></i>DNS Cache Management
                            </h4>
                            <div id="cache-statistics">
                                <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                    <i class="fas fa-spinner fa-spin mr-2"></i>Cache istatistikleri yükleniyor...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deploy Section -->
            <div id="section-deploy" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-rocket mr-2 text-blue-400"></i>
                            Deployment & Infrastructure
                        </h2>
                        <div class="flex space-x-2">
                            <button onclick="refreshDeploymentStatus()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>Status Yenile
                            </button>
                            <button onclick="exportDeploymentConfig()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Config Export
                            </button>
                        </div>
                    </div>
                    
                    <!-- Deployment Status Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-green-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Aktif Sunucular</p>
                                    <p class="text-2xl font-bold text-green-400" id="active-servers-count">0</p>
                                </div>
                                <i class="fas fa-server text-green-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-blue-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Deploy Edilen Domainler</p>
                                    <p class="text-2xl font-bold text-blue-400" id="deployed-domains-count">0</p>
                                </div>
                                <i class="fas fa-globe text-blue-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-yellow-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Pending Deployments</p>
                                    <p class="text-2xl font-bold text-yellow-400" id="pending-deployments-count">0</p>
                                </div>
                                <i class="fas fa-clock text-yellow-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-purple-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Ortalama Response</p>
                                    <p class="text-2xl font-bold text-purple-400" id="avg-response-time">0ms</p>
                                </div>
                                <i class="fas fa-tachometer-alt text-purple-400 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Deployment Actions -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Quick Deploy -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-blue-300">
                                <i class="fas fa-bolt mr-2"></i>Quick Deploy
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Deploy Target</label>
                                    <select id="deploy-target" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="production">Production Server</option>
                                        <option value="staging">Staging Environment</option>
                                        <option value="development">Development Server</option>
                                        <option value="custom">Custom Server</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Deployment Type</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="nginx" checked class="text-blue-500">
                                            <span class="text-sm">NGINX Config</span>
                                        </label>
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="dns" class="text-blue-500">
                                            <span class="text-sm">DNS Records</span>
                                        </label>
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="ssl" class="text-blue-500">
                                            <span class="text-sm">SSL Certificates</span>
                                        </label>
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="full" class="text-blue-500">
                                            <span class="text-sm">Full Stack</span>
                                        </label>
                                    </div>
                                </div>
                                <button onclick="executeQuickDeploy()" 
                                        class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-rocket mr-2"></i>Deploy Now
                                </button>
                            </div>
                        </div>
                        
                        <!-- Server Health Check -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-green-300">
                                <i class="fas fa-heartbeat mr-2"></i>Server Health Check
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Server IP/Domain</label>
                                    <input type="text" id="health-check-target" 
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                           placeholder="192.168.1.100 or domain.com">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Test Domain</label>
                                    <input type="text" id="health-check-domain" 
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                           placeholder="test.yourdomain.com">
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="checkServerHealth()" 
                                            class="flex-1 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm">
                                        <i class="fas fa-stethoscope mr-2"></i>Health Check
                                    </button>
                                    <button onclick="checkDNSPropagation()" 
                                            class="flex-1 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm">
                                        <i class="fas fa-network-wired mr-2"></i>DNS Check
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Deployment History & Logs -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Recent Deployments -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-yellow-300">
                                <i class="fas fa-history mr-2"></i>Recent Deployments
                            </h3>
                            <div id="deployment-history" class="space-y-2 max-h-64 overflow-y-auto">
                                <div class="bg-gray-600 p-3 rounded border-l-4 border-green-500">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Production Deploy</span>
                                        <span class="text-sm text-gray-400">2 min ago</span>
                                    </div>
                                    <div class="text-sm text-gray-300">NGINX config updated for 3 domains</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded border-l-4 border-blue-500">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">DNS Update</span>
                                        <span class="text-sm text-gray-400">15 min ago</span>
                                    </div>
                                    <div class="text-sm text-gray-300">Added A records for example.com</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded border-l-4 border-yellow-500">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">SSL Certificate</span>
                                        <span class="text-sm text-gray-400">1 hour ago</span>
                                    </div>
                                    <div class="text-sm text-gray-300">Renewed certificates for 5 domains</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Live Deployment Logs -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-red-300">
                                <i class="fas fa-terminal mr-2"></i>Live Deployment Logs
                            </h3>
                            <div id="deployment-logs" class="bg-black p-3 rounded font-mono text-sm max-h-64 overflow-y-auto">
                                <div class="text-green-400">[2024-01-15 14:30:15] Starting deployment...</div>
                                <div class="text-blue-400">[2024-01-15 14:30:16] Validating NGINX config</div>
                                <div class="text-green-400">[2024-01-15 14:30:17] ✓ Configuration validated</div>
                                <div class="text-yellow-400">[2024-01-15 14:30:18] Backing up current config</div>
                                <div class="text-green-400">[2024-01-15 14:30:19] ✓ Backup completed</div>
                                <div class="text-blue-400">[2024-01-15 14:30:20] Applying new configuration</div>
                                <div class="text-green-400">[2024-01-15 14:30:21] ✓ Deployment completed successfully</div>
                                <div class="text-cyan-400 animate-pulse">[2024-01-15 14:30:22] Ready for next deployment...</div>
                            </div>
                            <div class="mt-3 flex space-x-2">
                                <button onclick="clearDeploymentLogs()" 
                                        class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-trash mr-1"></i>Clear
                                </button>
                                <button onclick="downloadLogs()" 
                                        class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-download mr-1"></i>Download
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Deployment Tools -->
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h3 class="text-lg font-semibold mb-4 text-purple-300">
                            <i class="fas fa-tools mr-2"></i>Advanced Deployment Tools
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <button onclick="showBulkDeployModal()" 
                                    class="bg-indigo-600 hover:bg-indigo-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-layer-group mr-2"></i>Bulk Deploy
                            </button>
                            <button onclick="showRollbackModal()" 
                                    class="bg-orange-600 hover:bg-orange-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-undo mr-2"></i>Rollback
                            </button>
                            <button onclick="showScheduleDeployModal()" 
                                    class="bg-teal-600 hover:bg-teal-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-calendar-alt mr-2"></i>Schedule Deploy
                            </button>
                            <button onclick="showDeploymentAnalytics()" 
                                    class="bg-pink-600 hover:bg-pink-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-chart-pie mr-2"></i>Analytics
                            </button>
                        </div>
                    </div>
                    
                    <!-- Server Management Section -->
                    <div class="bg-gray-700 p-4 rounded-lg mt-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-blue-300">
                                <i class="fas fa-server mr-2"></i>Server Management
                            </h3>
                            <button onclick="showAddServerModal()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm">
                                <i class="fas fa-plus mr-2"></i>Add Server
                            </button>
                        </div>
                        
                        <!-- Server List Container -->
                        <div id="server-list-container" class="space-y-4">
                            <!-- Servers will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Test Results -->
                    <div id="deployment-test-results" class="mt-6 hidden">
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-3 text-green-300">
                                <i class="fas fa-check-circle mr-2"></i>Deployment Test Results
                            </h3>
                            <div id="test-results-content" class="space-y-2">
                                <!-- Results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Section -->
            <div id="section-security" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-shield-alt mr-2 text-red-400"></i>
                            Güvenlik Merkezi
                        </h2>
                        <button onclick="refreshSecurityData()" 
                                class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-sync-alt mr-2"></i>Güvenlik Durumunu Yenile
                        </button>
                    </div>
                    
                    <!-- Security Overview Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-green-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Güvenli IP'ler</p>
                                    <p class="text-2xl font-bold text-green-400" id="security-whitelist-count">0</p>
                                </div>
                                <i class="fas fa-check-shield text-green-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-red-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Engellenen IP'ler</p>
                                    <p class="text-2xl font-bold text-red-400" id="security-blacklist-count">0</p>
                                </div>
                                <i class="fas fa-ban text-red-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-yellow-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Şüpheli IP'ler</p>
                                    <p class="text-2xl font-bold text-yellow-400" id="security-graylist-count">0</p>
                                </div>
                                <i class="fas fa-exclamation-triangle text-yellow-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-purple-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Kötü Bot Saldırıları</p>
                                    <p class="text-2xl font-bold text-purple-400" id="security-malicious-bots">0</p>
                                </div>
                                <i class="fas fa-robot text-purple-400 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Security Threat Detection -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Real-time Threat Detection -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                                <i class="fas fa-radar text-red-400 mr-2"></i>
                                Gerçek Zamanlı Tehdit Tespiti
                            </h3>
                            
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">Bot Attack Detection</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="bot-attack-detection" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">DDoS Protection</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="ddos-protection" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">Suspicious IP Monitoring</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="suspicious-ip-monitoring" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">Geographic Filtering</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="geo-filtering" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Security Rules Management -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                                <i class="fas fa-cogs text-orange-400 mr-2"></i>
                                Güvenlik Kuralları
                            </h3>
                            
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Rate Limiting (req/min)</label>
                                    <input type="number" id="rate-limit-value" value="60" min="1" max="1000"
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded text-white text-sm">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Bot Rate Limit (req/min)</label>
                                    <input type="number" id="bot-rate-limit-value" value="10" min="1" max="100"
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded text-white text-sm">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Engellenen Ülkeler</label>
                                    <input type="text" id="blocked-countries" placeholder="CN,RU,KP"
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded text-white text-sm">
                                    <p class="text-xs text-gray-400 mt-1">Ülke kodlarını virgülle ayırın</p>
                                </div>
                                
                                <button onclick="updateSecurityRules()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded-lg font-medium">
                                    <i class="fas fa-shield-alt mr-2"></i>Kuralları Uygula
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Security Events -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-6">
                        <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-history text-cyan-400 mr-2"></i>
                            Son Güvenlik Olayları
                        </h3>
                        <div id="security-events-container">
                            <div class="text-center py-4 text-gray-400">
                                <i class="fas fa-shield-alt text-2xl mb-2"></i>
                                <p>Güvenlik olayları yükleniyor...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Global IP Management -->
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white flex items-center">
                                <i class="fas fa-network-wired text-blue-400 mr-2"></i>
                                Global IP Yönetimi
                            </h3>
                            <button onclick="showGlobalIPManager()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-plus mr-2"></i>IP Kuralı Ekle
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-gray-600 p-3 rounded">
                                <h4 class="font-medium text-green-300 mb-2">
                                    <i class="fas fa-check-circle mr-1"></i>Whitelist
                                </h4>
                                <div id="global-whitelist-preview" class="text-sm text-gray-300">
                                    Güvenli IP'ler burada görünür...
                                </div>
                            </div>
                            
                            <div class="bg-gray-600 p-3 rounded">
                                <h4 class="font-medium text-red-300 mb-2">
                                    <i class="fas fa-ban mr-1"></i>Blacklist
                                </h4>
                                <div id="global-blacklist-preview" class="text-sm text-gray-300">
                                    Engellenen IP'ler burada görünür...
                                </div>
                            </div>
                            
                            <div class="bg-gray-600 p-3 rounded">
                                <h4 class="font-medium text-yellow-300 mb-2">
                                    <i class="fas fa-exclamation-triangle mr-1"></i>Graylist
                                </h4>
                                <div id="global-graylist-preview" class="text-sm text-gray-300">
                                    İzlenen IP'ler burada görünür...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="section-settings" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-cog mr-2 text-yellow-400"></i>
                            System Settings & Configuration
                        </h2>
                        <div class="flex space-x-2">
                            <button onclick="exportSystemConfig()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Export Config
                            </button>
                            <button onclick="importSystemConfig()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-upload mr-2"></i>Import Config
                            </button>
                        </div>
                    </div>
                    
                    <!-- Settings Navigation Tabs -->
                    <div class="flex flex-wrap gap-2 mb-6 border-b border-gray-600 pb-4">
                        <button onclick="showSettingsTab('general')" id="settings-tab-general"
                                class="settings-tab px-4 py-2 bg-yellow-600 text-white rounded-lg transition-colors">
                            <i class="fas fa-cog mr-2"></i>General
                        </button>
                        <button onclick="showSettingsTab('system')" id="settings-tab-system"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-server mr-2"></i>System
                        </button>
                        <button onclick="showSettingsTab('performance')" id="settings-tab-performance"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-tachometer-alt mr-2"></i>Performance
                        </button>
                        <button onclick="showSettingsTab('monitoring')" id="settings-tab-monitoring"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-eye mr-2"></i>Monitoring
                        </button>
                        <button onclick="showSettingsTab('backup')" id="settings-tab-backup"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-archive mr-2"></i>Backup
                        </button>
                        <button onclick="showSettingsTab('logs')" id="settings-tab-logs"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-file-alt mr-2"></i>Logs
                        </button>
                    </div>
                    
                    <!-- General Settings Tab -->
                    <div id="settings-content-general" class="settings-content">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Platform Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-yellow-300">
                                    <i class="fas fa-globe mr-2"></i>Platform Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Platform Name</label>
                                        <input type="text" id="platform-name" value="Traffic Management Platform"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Default Language</label>
                                        <select id="default-language" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="tr" selected>Türkçe</option>
                                            <option value="en">English</option>
                                            <option value="de">Deutsch</option>
                                            <option value="fr">Français</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Timezone</label>
                                        <select id="timezone" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="Europe/Istanbul" selected>Europe/Istanbul (UTC+3)</option>
                                            <option value="Europe/London">Europe/London (UTC+0)</option>
                                            <option value="America/New_York">America/New_York (UTC-5)</option>
                                            <option value="Asia/Tokyo">Asia/Tokyo (UTC+9)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Authentication Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-red-300">
                                    <i class="fas fa-key mr-2"></i>Authentication Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Session Timeout (minutes)</label>
                                        <input type="number" id="session-timeout" value="60" min="5" max="1440"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Require Two-Factor Auth</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="require-2fa" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Auto Logout on Close</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="auto-logout" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <button onclick="changeAdminPassword()" 
                                            class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-lock mr-2"></i>Change Password
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Default Configuration Settings -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-blue-300">
                                <i class="fas fa-sliders-h mr-2"></i>Default Configuration Settings
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Default Rate Limit (req/min)</label>
                                    <input type="number" id="default-rate-limit" value="100" min="1" max="10000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Default Bot Limit (req/min)</label>
                                    <input type="number" id="default-bot-limit" value="10" min="1" max="1000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Analytics Retention (days)</label>
                                    <input type="number" id="analytics-retention" value="90" min="1" max="365"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- System Settings Tab -->
                    <div id="settings-content-system" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- System Information -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-green-300">
                                    <i class="fas fa-info-circle mr-2"></i>System Information
                                </h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Platform Version:</span>
                                        <span class="text-white font-mono">v2.1.0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Node.js Version:</span>
                                        <span class="text-white font-mono" id="node-version">v18.17.0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Uptime:</span>
                                        <span class="text-white font-mono" id="system-uptime">2h 30m</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Memory Usage:</span>
                                        <span class="text-white font-mono" id="memory-usage">145MB / 512MB</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">CPU Usage:</span>
                                        <span class="text-white font-mono" id="cpu-usage">12%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- File System Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-orange-300">
                                    <i class="fas fa-folder mr-2"></i>File System Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Max File Upload Size (MB)</label>
                                        <input type="number" id="max-file-size" value="50" min="1" max="1000"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Temp File Cleanup (hours)</label>
                                        <input type="number" id="temp-cleanup" value="24" min="1" max="168"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Auto Compress Logs</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="compress-logs" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- API Configuration -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-purple-300">
                                <i class="fas fa-plug mr-2"></i>API Configuration
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">API Rate Limit (req/min)</label>
                                    <input type="number" id="api-rate-limit" value="1000" min="100" max="10000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">API Timeout (seconds)</label>
                                    <input type="number" id="api-timeout" value="30" min="5" max="300"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-300 mb-2">CORS Origins (one per line)</label>
                                    <textarea id="cors-origins" rows="3"
                                              class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                              placeholder="https://example.com
https://app.example.com
http://localhost:3000"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Performance Settings Tab -->
                    <div id="settings-content-performance" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Cache Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-cyan-300">
                                    <i class="fas fa-database mr-2"></i>Cache Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Memory Cache Size (MB)</label>
                                        <input type="number" id="cache-size" value="128" min="32" max="2048"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Cache TTL (seconds)</label>
                                        <input type="number" id="cache-ttl" value="3600" min="60" max="86400"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Cache Compression</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="cache-compression" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                        </label>
                                    </div>
                                    <button onclick="clearSystemCache()" 
                                            class="w-full bg-cyan-600 hover:bg-cyan-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-broom mr-2"></i>Clear Cache
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Database Performance -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-indigo-300">
                                    <i class="fas fa-chart-line mr-2"></i>Database Performance
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Connection Pool Size</label>
                                        <input type="number" id="db-pool-size" value="10" min="5" max="100"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Query Timeout (ms)</label>
                                        <input type="number" id="query-timeout" value="5000" min="1000" max="30000"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Query Logging</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="query-logging" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                                        </label>
                                    </div>
                                    <button onclick="optimizeDatabase()" 
                                            class="w-full bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-magic mr-2"></i>Optimize Database
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Worker Process Settings -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-pink-300">
                                <i class="fas fa-cogs mr-2"></i>Worker Process Settings
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Worker Count</label>
                                    <input type="number" id="worker-count" value="4" min="1" max="16"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Max Memory per Worker (MB)</label>
                                    <input type="number" id="worker-memory" value="256" min="128" max="2048"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Worker Restart Threshold</label>
                                    <input type="number" id="worker-restart" value="1000" min="100" max="10000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Monitoring Settings Tab -->
                    <div id="settings-content-monitoring" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Real-time Monitoring -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-green-300">
                                    <i class="fas fa-eye mr-2"></i>Real-Time Monitoring
                                </h3>
                                <div class="flex items-center space-x-4 mb-4">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm">Status:</span>
                                        <span id="monitoringStatus" class="font-semibold">🔴 Stopped</span>
                                    </div>
                                    <div class="text-sm text-gray-400" id="lastRefresh">
                                        Henüz güncelleme yapılmadı
                                    </div>
                                </div>
                                <div class="space-y-3 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-1">Refresh Interval (seconds)</label>
                                        <input type="number" id="monitor-interval" value="30" min="5" max="300"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Auto-start Monitoring</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="auto-start-monitoring" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                        </label>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="startMonitoring()" id="startMonitoringBtn"
                                            class="flex-1 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm">
                                        <i class="fas fa-play mr-2"></i>Start
                                    </button>
                                    <button onclick="stopMonitoring()" id="stopMonitoringBtn" disabled
                                            class="flex-1 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-sm disabled:opacity-50">
                                        <i class="fas fa-stop mr-2"></i>Stop
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Alert Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-red-300">
                                    <i class="fas fa-bell mr-2"></i>Alert Settings
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Email Alerts</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="email-alerts" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">SMS Alerts</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="sms-alerts" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Alert Email</label>
                                        <input type="email" id="alert-email" placeholder="admin@example.com"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">CPU Alert Threshold (%)</label>
                                        <input type="number" id="cpu-threshold" value="80" min="50" max="95"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Memory Alert Threshold (%)</label>
                                        <input type="number" id="memory-threshold" value="85" min="50" max="95"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Health Check Configuration -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-blue-300">
                                <i class="fas fa-heartbeat mr-2"></i>Health Check Configuration
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Check Interval (seconds)</label>
                                    <input type="number" id="health-interval" value="60" min="30" max="3600"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Timeout (seconds)</label>
                                    <input type="number" id="health-timeout" value="10" min="5" max="60"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Retry Count</label>
                                    <input type="number" id="health-retries" value="3" min="1" max="10"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Backup Settings Tab -->
                    <div id="settings-content-backup" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Automatic Backup -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-purple-300">
                                    <i class="fas fa-clock mr-2"></i>Automatic Backup
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Auto Backup</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="auto-backup" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Backup Frequency</label>
                                        <select id="backup-frequency" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="hourly">Hourly</option>
                                            <option value="daily" selected>Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Retention Period (days)</label>
                                        <input type="number" id="backup-retention" value="30" min="1" max="365"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Max Backup Size (GB)</label>
                                        <input type="number" id="backup-size-limit" value="10" min="1" max="100"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Manual Backup -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-green-300">
                                    <i class="fas fa-download mr-2"></i>Manual Backup
                                </h3>
                                <div class="space-y-4">
                                    <div class="text-sm text-gray-300">
                                        <p class="mb-2">Backup includes:</p>
                                        <ul class="list-disc list-inside space-y-1 text-xs">
                                            <li>Domain configurations</li>
                                            <li>Analytics data</li>
                                            <li>IP rules and security settings</li>
                                            <li>System settings</li>
                                            <li>DNS records</li>
                                        </ul>
                                    </div>
                                    <button onclick="createManualBackup()" 
                                            class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-download mr-2"></i>Create Backup Now
                                    </button>
                                    <button onclick="restoreFromBackup()" 
                                            class="w-full bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-upload mr-2"></i>Restore from Backup
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Backup History -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-yellow-300">
                                <i class="fas fa-history mr-2"></i>Backup History
                            </h3>
                            <div id="backup-history">
                                <div class="text-center py-4 text-gray-400">
                                    <i class="fas fa-archive text-2xl mb-2"></i>
                                    <p>Backup history loading...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Logs Settings Tab -->
                    <div id="settings-content-logs" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Log Configuration -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-cyan-300">
                                    <i class="fas fa-cog mr-2"></i>Log Configuration
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Log Level</label>
                                        <select id="log-level" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="error">Error Only</option>
                                            <option value="warn">Warning & Above</option>
                                            <option value="info" selected>Info & Above</option>
                                            <option value="debug">Debug (Verbose)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Log Rotation Size (MB)</label>
                                        <input type="number" id="log-rotation-size" value="100" min="10" max="1000"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Max Log Files</label>
                                        <input type="number" id="max-log-files" value="10" min="1" max="100"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Console Logging</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="console-logging" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Log Viewer -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-orange-300">
                                        <i class="fas fa-eye mr-2"></i>Live Log Viewer
                                    </h3>
                                    <div class="flex space-x-2">
                                        <button onclick="clearLogs()" 
                                                class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
                                            <i class="fas fa-trash mr-1"></i>Clear
                                        </button>
                                        <button onclick="refreshLogs()" 
                                                class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">
                                            <i class="fas fa-sync-alt mr-1"></i>Refresh
                                        </button>
                                    </div>
                                </div>
                                <div id="live-logs" class="bg-black p-3 rounded font-mono text-sm h-64 overflow-y-auto">
                                    <div class="text-green-400">[2024-01-15 14:30:15] INFO: System initialized</div>
                                    <div class="text-blue-400">[2024-01-15 14:30:16] DEBUG: Loading configuration</div>
                                    <div class="text-yellow-400">[2024-01-15 14:30:17] WARN: High memory usage detected</div>
                                    <div class="text-cyan-400 animate-pulse">[2024-01-15 14:30:18] INFO: Monitoring active...</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Log Analytics -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-pink-300">
                                <i class="fas fa-chart-bar mr-2"></i>Log Analytics
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-green-400">1,234</div>
                                    <div class="text-sm text-gray-300">Info Messages</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-yellow-400">56</div>
                                    <div class="text-sm text-gray-300">Warnings</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-red-400">3</div>
                                    <div class="text-sm text-gray-300">Errors</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-blue-400">45MB</div>
                                    <div class="text-sm text-gray-300">Total Size</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Save Settings Button -->
                    <div class="mt-8 flex justify-end space-x-4">
                        <button onclick="resetToDefaults()" 
                                class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-undo mr-2"></i>Reset to Defaults
                        </button>
                        <button onclick="saveAllSettings()" 
                                class="bg-yellow-600 hover:bg-yellow-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-save mr-2"></i>Save All Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Domain Modal -->
        <div id="addDomainModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
            <div class="bg-gray-800 p-6 rounded-lg w-96">
                <h3 class="text-xl font-bold mb-4">Yeni Domain Ekle</h3>
                <form id="addDomainForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Domain Adı</label>
                        <input type="text" id="domainName" required
                               class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none"
                               placeholder="google.com (https:// olmadan)">
                    </div>

                    <div class="flex space-x-4">
                        <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 py-2 rounded-lg">
                            Ekle
                        </button>
                        <button type="button" onclick="hideAddDomain()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg">
                            İptal
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- DNS Add Modal -->
        <div id="dnsAddModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 p-6 rounded-lg w-full max-w-md">
                <h3 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-plus text-purple-400 mr-2"></i>
                    DNS Kaydı Ekle
                </h3>
                <form id="dnsAddForm">
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Domain</label>
                            <input type="text" id="dns-domain" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                   placeholder="example.com">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Name</label>
                            <input type="text" id="dns-name" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                   placeholder="@ veya subdomain">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Type</label>
                            <select id="dns-type" required onchange="updateDNSValuePlaceholder()"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none">
                                <option value="">Seçiniz</option>
                                <option value="A">A Record (IPv4)</option>
                                <option value="AAAA">AAAA Record (IPv6)</option>
                                <option value="CNAME">CNAME Record</option>
                                <option value="MX">MX Record</option>
                                <option value="TXT">TXT Record</option>
                                <option value="NS">NS Record</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Value</label>
                            <input type="text" id="dns-value" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                   placeholder="Değer">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">TTL</label>
                                <select id="dns-ttl"
                                        class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none">
                                    <option value="300">5 dakika</option>
                                    <option value="1800">30 dakika</option>
                                    <option value="3600" selected>1 saat</option>
                                    <option value="7200">2 saat</option>
                                    <option value="86400">1 gün</option>
                                </select>
                            </div>
                            
                            <div id="dns-priority-div" class="hidden">
                                <label class="block text-sm font-medium mb-2">Priority</label>
                                <input type="number" id="dns-priority" min="0" max="65535"
                                       class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                       placeholder="10">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Provider</label>
                            <select id="dns-provider"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none">
                                <option value="CLOUDFLARE">Cloudflare</option>
                                <option value="GODADDY">GoDaddy</option>
                                <option value="NAMECHEAP">Namecheap</option>
                                <option value="CUSTOM">Özel Sunucu</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 mt-6">
                        <button type="submit" class="flex-1 bg-purple-600 hover:bg-purple-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-plus mr-2"></i>Ekle
                        </button>
                        <button type="button" onclick="hideDNSAddModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-times mr-2"></i>İptal
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- DNS Edit Modal -->
        <div id="dnsEditModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 p-6 rounded-lg w-full max-w-md">
                <h3 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-edit text-blue-400 mr-2"></i>
                    DNS Kaydı Düzenle
                </h3>
                <form id="dnsEditForm">
                    <input type="hidden" id="edit-dns-id">
                    
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Domain</label>
                            <input type="text" id="edit-dns-domain" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Name</label>
                            <input type="text" id="edit-dns-name" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Type</label>
                            <select id="edit-dns-type" required onchange="updateEditDNSValuePlaceholder()"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                                <option value="A">A Record (IPv4)</option>
                                <option value="AAAA">AAAA Record (IPv6)</option>
                                <option value="CNAME">CNAME Record</option>
                                <option value="MX">MX Record</option>
                                <option value="TXT">TXT Record</option>
                                <option value="NS">NS Record</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Value</label>
                            <input type="text" id="edit-dns-value" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">TTL</label>
                                <select id="edit-dns-ttl"
                                        class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                                    <option value="300">5 dakika</option>
                                    <option value="1800">30 dakika</option>
                                    <option value="3600">1 saat</option>
                                    <option value="7200">2 saat</option>
                                    <option value="86400">1 gün</option>
                                </select>
                            </div>
                            
                            <div id="edit-dns-priority-div" class="hidden">
                                <label class="block text-sm font-medium mb-2">Priority</label>
                                <input type="number" id="edit-dns-priority" min="0" max="65535"
                                       class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Provider</label>
                            <select id="edit-dns-provider"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                                <option value="CLOUDFLARE">Cloudflare</option>
                                <option value="GODLADDY">GoDaddy</option>
                                <option value="NAMECHEAP">Namecheap</option>
                                <option value="CUSTOM">Özel Sunucu</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 mt-6">
                        <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-save mr-2"></i>Güncelle
                        </button>
                        <button type="button" onclick="hideDNSEditModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-times mr-2"></i>İptal
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- DNS Health Check Modal -->
        <div id="dnsHealthModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 p-6 rounded-lg w-full max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold flex items-center">
                        <i class="fas fa-heartbeat text-red-400 mr-2"></i>
                        DNS Sağlık Kontrolü
                    </h3>
                    <button onclick="hideDNSHealthModal()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div id="dns-health-content" class="space-y-4">
                    <!-- Health check results will be populated here -->
                </div>
                
                <div class="flex justify-end mt-6">
                    <button onclick="hideDNSHealthModal()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg">
                        Kapat
                    </button>
                </div>
            </div>
        </div>

        <!-- Universal Modal for Integrations -->
        <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div id="modal-content">
                <!-- Modal content will be dynamically loaded here -->
            </div>
        </div>

        <!-- Add Server Modal -->
        <div id="add-server-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="server-modal-title" class="text-lg font-semibold text-white">Add New Server</h3>
                    <button onclick="closeAddServerModal()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="server-form" data-mode="add">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Server Name</label>
                            <input type="text" id="server-name" required
                                   class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none"
                                   placeholder="Production Server 1">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">IP Address</label>
                            <input type="text" id="server-ip" required
                                   class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none"
                                   placeholder="192.168.1.100">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Server Type</label>
                            <select id="server-type" required
                                    class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none">
                                <option value="production">Production Server</option>
                                <option value="staging">Staging Server</option>
                                <option value="development">Development Server</option>
                                <option value="custom">Custom Server</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Location (Optional)</label>
                            <input type="text" id="server-location"
                                   class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none"
                                   placeholder="US East, Europe, Asia, etc.">
                        </div>
                        
                        <div class="bg-gray-700 p-3 rounded-lg">
                            <h4 class="text-sm font-medium text-gray-300 mb-2">
                                <i class="fas fa-info-circle mr-2 text-blue-400"></i>Server Information
                            </h4>
                            <ul class="text-sm text-gray-400 space-y-1">
                                <li>• Enter the server's public IP address or hostname</li>
                                <li>• Server will be automatically tested after adding</li>
                                <li>• Health checks will be performed every 5 minutes</li>
                                <li>• Use meaningful names to identify your servers</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3 mt-6">
                        <button type="button" onclick="saveServer()" 
                                class="flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white">
                            <i class="fas fa-save mr-2"></i>Save Server
                        </button>
                        <button type="button" onclick="closeAddServerModal()" 
                                class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <style>
            .nav-btn {
                background-color: #374151;
            }
            .nav-btn:hover, .nav-btn.active {
                background-color: #4F46E5;
            }
        </style>

        <!-- React Feature Flag System -->
        <div id="react-dashboard-root" style="display: none;">
            <!-- React components will be rendered here when enabled -->
        </div>
        
        <!-- React Feature Control Panel (Development Mode) -->
        <div id="react-controls" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(30,41,59,0.95)); backdrop-filter: blur(10px); padding: 16px; border-radius: 12px; font-size: 13px; box-shadow: 0 8px 32px rgba(0,0,0,0.4); border: 1px solid rgba(148,163,184,0.1); min-width: 200px;">
            <div style="color: #f8fafc; margin-bottom: 12px; font-weight: 600; text-align: center;">
                <i class="fas fa-atom" style="margin-right: 6px; color: #60a5fa;"></i>React Features
            </div>
            <!-- First Row: React UI (full width) -->
            <button id="toggle-react-ui" onclick="toggleReact()" style="width: 100%; background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(79,70,229,0.3); margin-bottom: 8px;" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 6px 16px rgba(79,70,229,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(79,70,229,0.3)'">
                <i class="fas fa-rocket" style="margin-right: 6px;"></i>Use React UI
            </button>
            
            <!-- Second Row: Real-time + AI (side by side) -->
            <div style="display: flex; gap: 6px; margin-bottom: 0;">
                <button id="toggle-websocket" onclick="toggleWebSocket()" style="flex: 1; background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 6px 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 3px 8px rgba(16,185,129,0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 10px rgba(16,185,129,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 8px rgba(16,185,129,0.3)'">
                    <i class="fas fa-play" style="margin-right: 4px;"></i>Real-time
                </button>
                <button id="toggle-ai" onclick="toggleAI()" style="flex: 1; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 6px 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 3px 8px rgba(139,92,246,0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 10px rgba(139,92,246,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 8px rgba(139,92,246,0.3)'">
                    <i class="fas fa-robot" style="margin-right: 4px;"></i>AI Bot
                </button>
            </div>
            <div id="react-status" style="color: #94a3b8; margin-top: 8px; font-size: 11px; text-align: center; font-weight: 500;">
                <i class="fas fa-code" style="margin-right: 4px; color: #94a3b8;"></i>Vanilla JS Active
            </div>
        </div>

        <!-- Load React Feature System -->
        <script src="/static/react-loader.js"></script>
        
        <!-- Load WebSocket Manager -->
        <script src="/static/websocket-manager.js"></script>
        
        <!-- Load AI Behavior Tracker -->
        <script src="/static/ai-behavior-tracker.js"></script>
        
        <!-- Main Dashboard Script -->
        <script src="/static/dashboard.js"></script>
        
        <!-- React Status Monitor -->
        <script>
            // React status monitor - güncelle button durumunu
            function updateReactStatus() {
                const statusDiv = document.getElementById('react-status')
                const toggleBtn = document.getElementById('toggle-react-ui')
                const reactRoot = document.getElementById('react-dashboard-root')
                
                if (!window.reactFeatures) return
                
                // Gerçek duruma göre button ve status'u ayarla
                if (window.reactFeatures.isEnabled('reactUI')) {
                    // React aktif
                    toggleBtn.innerHTML = '<i class="fas fa-arrow-left" style="margin-right: 6px;"></i>Use Vanilla JS'
                    toggleBtn.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)'
                    statusDiv.innerHTML = '<i class="fas fa-bolt" style="margin-right: 4px; color: #10b981;"></i>React UI Active'
                    statusDiv.style.color = '#10b981'
                    if (reactRoot) reactRoot.style.display = 'block'
                } else {
                    // Vanilla JS aktif
                    toggleBtn.innerHTML = '<i class="fas fa-rocket" style="margin-right: 6px;"></i>Use React UI'
                    toggleBtn.style.background = 'linear-gradient(135deg, #4f46e5, #7c3aed)'
                    statusDiv.innerHTML = '<i class="fas fa-code" style="margin-right: 4px; color: #94a3b8;"></i>Vanilla JS Active'
                    statusDiv.style.color = '#94a3b8'
                    if (reactRoot) reactRoot.style.display = 'none'
                }
            }
            
            // WebSocket toggle fonksiyonu
            function toggleWebSocket() {
                if (!window.wsManager) {
                    console.error('WebSocket Manager not loaded')
                    return
                }
                
                if (window.wsManager.enabled) {
                    console.log('🔴 Disabling real-time updates...')
                    window.wsManager.disable()
                } else {
                    console.log('🟢 Enabling real-time updates...')
                    window.wsManager.enable()
                }
                
                // Status'ü hemen güncelle
                setTimeout(updateWebSocketStatus, 100)
            }
            
            // WebSocket status güncelle
            function updateWebSocketStatus() {
                const toggleBtn = document.getElementById('toggle-websocket')
                
                if (!window.wsManager) return
                
                if (!window.wsManager.enabled) {
                    // Deaktif - ENABLE butonunu göster
                    toggleBtn.innerHTML = '<i class="fas fa-play" style="margin-right: 4px;"></i>Real-time'
                    toggleBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)'
                } else if (window.wsManager.enabled && !window.wsManager.isConnected) {
                    // Aktif ama bağlanıyor/hatalı
                    toggleBtn.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 4px;"></i>Connecting'
                    toggleBtn.style.background = 'linear-gradient(135deg, #6366f1, #8b5cf6)'
                } else if (window.wsManager.enabled && window.wsManager.isConnected) {
                    // Aktif ve bağlı - DİSABLE butonunu göster
                    toggleBtn.innerHTML = '<i class="fas fa-stop" style="margin-right: 4px;"></i>Live ON'
                    toggleBtn.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)'
                }
            }
            
            // AI toggle fonksiyonu
            function toggleAI() {
                if (!window.aiTracker) {
                    console.error('AI Tracker not loaded')
                    return
                }
                
                if (window.aiTracker.enabled) {
                    console.log('🤖 Disabling AI bot detection...')
                    window.aiTracker.disable()
                } else {
                    console.log('🧠 Enabling AI bot detection...')
                    window.aiTracker.enable()
                }
                
                // Status'ü hemen güncelle
                setTimeout(updateAIStatus, 100)
            }
            
            // AI status güncelle
            function updateAIStatus() {
                const toggleBtn = document.getElementById('toggle-ai')
                
                if (!window.aiTracker) return
                
                if (window.aiTracker.enabled) {
                    // AI aktif - Disable butonu göster
                    toggleBtn.innerHTML = '<i class="fas fa-brain" style="margin-right: 4px;"></i>AI ON'
                    toggleBtn.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)'
                } else {
                    // AI kapalı - Enable butonu göster
                    toggleBtn.innerHTML = '<i class="fas fa-robot" style="margin-right: 4px;"></i>AI Bot'
                    toggleBtn.style.background = 'linear-gradient(135deg, #8b5cf6, #7c3aed)'
                }
            }
            
            // Status'ı periyodik olarak kontrol et
            setInterval(updateReactStatus, 1000)
            setInterval(updateWebSocketStatus, 1000)
            setInterval(updateAIStatus, 1000)
            
            // Sayfa yüklendiğinde bir kez çalıştır - feature managers'ın yüklenmesini bekle
            document.addEventListener('DOMContentLoaded', () => {
                // Feature managers yüklenene kadar bekle
                const checkAndUpdate = () => {
                    if (window.reactFeatures && window.wsManager && window.aiTracker) {
                        console.log('🎯 All feature managers loaded, updating button states...')
                        updateReactStatus()
                        updateWebSocketStatus()
                        updateAIStatus()
                    } else {
                        console.log('⏳ Waiting for feature managers to load...', {
                            reactFeatures: !!window.reactFeatures,
                            wsManager: !!window.wsManager,
                            aiTracker: !!window.aiTracker
                        })
                        setTimeout(checkAndUpdate, 100)
                    }
                }
                
                setTimeout(checkAndUpdate, 200)
            })
        </script>
    </body>
    </html>
  `)
})

// =============================================================================
// GLOBAL IP POOL MANAGEMENT API ENDPOINTS 
// =============================================================================

// Track visitor (public endpoint for IP pool tracking)
app.post('/api/track-visitor', async (c) => {
  try {
    const { page, referrer: customReferrer, userAgent: customUA } = await c.req.json()
    
    // Track IP in global pool
    const ip = trackIPCall(c, page || '/track-visitor')
    
    return c.json({ 
      success: true, 
      message: 'Visitor tracked',
      ip: ip,
      timestamp: new Date().toISOString()
    })
  } catch (error) {
    console.error('Visitor tracking error:', error)
    return c.json({ success: false, message: 'Tracking failed' }, 500)
  }
})

// Get IP pool overview and analytics
app.get('/api/ip/pool', requireAuth, (c) => {
  const analytics = ipPoolManager.getAnalytics()
  const needsAnalysis = ipPoolManager.getIPsNeedingAnalysis()
  
  return c.json({
    success: true,
    analytics,
    needsAnalysis: needsAnalysis.slice(0, 20), // Top 20 IPs that need analysis
    timestamp: new Date().toISOString()
  })
})

// Get detailed IP pool analytics
app.get('/api/ip/analytics', requireAuth, (c) => {
  const analytics = ipPoolManager.getAnalytics()
  const topVisitors = ipPoolManager.getTopVisitors(50)
  const needsAnalysis = ipPoolManager.getIPsNeedingAnalysis()
  
  return c.json({
    success: true,
    ...analytics,
    topVisitors,
    needsAnalysis,
    timestamp: new Date().toISOString()
  })
})

// Get specific IP details
app.get('/api/ip/details/:ip', requireAuth, (c) => {
  const ip = c.req.param('ip')
  const details = ipPoolManager.getIPDetails(ip)
  
  if (!details) {
    return c.json({ success: false, message: 'IP not found in pool' }, 404)
  }
  
  const recentActivity = ipPoolManager.getRecentActivity(ip)
  
  return c.json({
    success: true,
    ip: details.ip,
    totalVisits: details.totalVisits,
    classification: details.classification,
    riskLevel: details.riskLevel,
    manualStatus: details.manualStatus,
    manualReason: details.manualReason,
    manualBy: details.manualBy,
    manualAt: details.manualAt,
    firstSeen: details.firstSeen,
    lastSeen: details.lastSeen,
    recentActivity,
    visitHistory: details.visitHistory.slice(-10), // Last 10 visits
    classificationHistory: details.classificationHistory.slice(-10), // Last 10 classifications
    endpoints: details.endpoints,
    userAgents: details.userAgents,
    referrers: details.referrers
  })
})

// Manual IP control (whitelist/blacklist/reset)
app.post('/api/ip/control', requireAuth, async (c) => {
  const { ip, action, reason } = await c.req.json()
  
  if (!ip || !action) {
    return c.json({ success: false, message: 'IP and action are required' }, 400)
  }
  
  if (!['whitelist', 'blacklist', 'reset'].includes(action)) {
    return c.json({ success: false, message: 'Invalid action. Use: whitelist, blacklist, or reset' }, 400)
  }
  
  // Get admin user (you could extract from token in real implementation)
  const adminUser = 'admin' // In real app, extract from JWT token
  
  const success = ipPoolManager.setManualStatus(ip, 
    action === 'whitelist' ? 'whitelisted' : 
    action === 'blacklist' ? 'blacklisted' : 'reset', 
    reason || `Manual ${action} action`, 
    adminUser)
  
  if (success) {
    const updatedDetails = ipPoolManager.getIPDetails(ip)
    
    return c.json({
      success: true,
      message: `IP ${ip} successfully ${action === 'reset' ? 'reset to auto-classification' : action + 'ed'}`,
      ip: ip,
      newStatus: action === 'reset' ? updatedDetails?.classification : action + 'ed',
      classification: updatedDetails?.classification,
      riskLevel: updatedDetails?.riskLevel,
      manualStatus: updatedDetails?.manualStatus
    })
  } else {
    return c.json({ success: false, message: 'IP not found in pool' }, 404)
  }
})

// Bulk IP operations
app.post('/api/ip/bulk', requireAuth, async (c) => {
  const { ips, action, reason } = await c.req.json()
  
  if (!ips || !Array.isArray(ips) || !action) {
    return c.json({ success: false, message: 'IPs array and action are required' }, 400)
  }
  
  if (!['whitelist', 'blacklist', 'reset'].includes(action)) {
    return c.json({ success: false, message: 'Invalid action' }, 400)
  }
  
  const adminUser = 'admin'
  const results = {
    success: 0,
    failed: 0,
    details: []
  }
  
  for (const ip of ips) {
    const success = ipPoolManager.setManualStatus(ip,
      action === 'whitelist' ? 'whitelisted' :
      action === 'blacklist' ? 'blacklisted' : 'reset',
      reason || `Bulk ${action} action`,
      adminUser)
    
    if (success) {
      results.success++
      results.details.push({ ip, status: 'success', action })
    } else {
      results.failed++
      results.details.push({ ip, status: 'failed', error: 'IP not found' })
    }
  }
  
  return c.json({
    success: true,
    message: `Bulk operation completed: ${results.success} success, ${results.failed} failed`,
    results
  })
})

// Search IPs in pool
app.get('/api/ip/search', requireAuth, (c) => {
  const query = c.req.query('q')
  const classification = c.req.query('classification')
  const riskLevel = c.req.query('risk')
  const limit = parseInt(c.req.query('limit') || '50')
  
  let results = Array.from(globalIPPool.entries()).map(([ip, data]) => ({
    ip,
    totalVisits: data.totalVisits,
    classification: data.classification,
    riskLevel: data.riskLevel,
    manualStatus: data.manualStatus,
    lastSeen: data.lastSeen,
    recentActivity: ipPoolManager.getRecentActivity(ip)
  }))
  
  // Filter by search query (IP contains)
  if (query) {
    results = results.filter(item => item.ip.includes(query))
  }
  
  // Filter by classification
  if (classification) {
    results = results.filter(item => item.classification === classification)
  }
  
  // Filter by risk level
  if (riskLevel) {
    results = results.filter(item => item.riskLevel === riskLevel)
  }
  
  // Sort by visit count (highest first) and limit
  results = results
    .sort((a, b) => b.totalVisits - a.totalVisits)
    .slice(0, limit)
  
  return c.json({
    success: true,
    results,
    total: results.length,
    filters: { query, classification, riskLevel, limit }
  })
})

// =============================================================================
// RISK ASSESSMENT CONFIG API ENDPOINTS
// =============================================================================

// Get current risk assessment configuration
app.get('/api/ip/config', requireAuth, (c) => {
  return c.json({
    success: true,
    config: riskConfig.getConfig(),
    message: 'Risk assessment configuration retrieved'
  })
})

// Update risk assessment configuration
app.post('/api/ip/config', requireAuth, async (c) => {
  try {
    const newConfig = await c.req.json()
    
    // Validate configuration
    const validation = riskConfig.validateConfig(newConfig)
    if (!validation.isValid) {
      return c.json({
        success: false,
        message: 'Invalid configuration',
        errors: validation.errors
      }, 400)
    }
    
    // Update configuration
    riskConfig.updateThresholds(newConfig)
    
    // Re-classify all existing IPs with new rules
    let reclassifiedCount = 0
    for (const [ip, data] of globalIPPool) {
      if (!data.manualStatus) {
        const oldClassification = data.classification
        ipPoolManager.autoClassifyIP(ip)
        if (data.classification !== oldClassification) {
          reclassifiedCount++
        }
      }
    }
    
    return c.json({
      success: true,
      message: `Risk assessment configuration updated. ${reclassifiedCount} IPs reclassified.`,
      config: riskConfig.getConfig(),
      reclassifiedCount
    })
  } catch (error) {
    console.error('Config update error:', error)
    return c.json({
      success: false,
      message: 'Error updating configuration: ' + error.message
    }, 500)
  }
})

// Reset risk assessment configuration to defaults
app.post('/api/ip/config/reset', requireAuth, (c) => {
  // Reset to default configuration
  const defaultConfig = new RiskAssessmentConfig()
  riskConfig.updateThresholds(defaultConfig.getConfig())
  
  // Re-classify all IPs
  let reclassifiedCount = 0
  for (const [ip, data] of globalIPPool) {
    if (!data.manualStatus) {
      const oldClassification = data.classification
      ipPoolManager.autoClassifyIP(ip)
      if (data.classification !== oldClassification) {
        reclassifiedCount++
      }
    }
  }
  
  return c.json({
    success: true,
    message: `Configuration reset to defaults. ${reclassifiedCount} IPs reclassified.`,
    config: riskConfig.getConfig(),
    reclassifiedCount
  })
})

// Preview configuration changes without applying
app.post('/api/ip/config/preview', requireAuth, async (c) => {
  try {
    const newConfig = await c.req.json()
    
    // Validate configuration
    const validation = riskConfig.validateConfig(newConfig)
    if (!validation.isValid) {
      return c.json({
        success: false,
        message: 'Invalid configuration',
        errors: validation.errors
      }, 400)
    }
    
    // Create temporary config for preview
    const tempConfig = new RiskAssessmentConfig()
    tempConfig.updateThresholds(newConfig)
    
    // Preview changes for existing IPs
    const previewResults = []
    for (const [ip, data] of globalIPPool) {
      if (!data.manualStatus) {
        const currentClassification = data.classification
        const newResult = tempConfig.getClassification(data.totalVisits, 0)
        
        if (newResult.classification !== currentClassification) {
          previewResults.push({
            ip,
            totalVisits: data.totalVisits,
            current: {
              classification: currentClassification,
              riskLevel: data.riskLevel
            },
            new: {
              classification: newResult.classification,
              riskLevel: newResult.riskLevel
            }
          })
        }
      }
    }
    
    return c.json({
      success: true,
      message: 'Configuration preview generated',
      previewConfig: tempConfig.getConfig(),
      affectedIPs: previewResults.length,
      changes: previewResults.slice(0, 20) // Show first 20 changes
    })
  } catch (error) {
    console.error('Config preview error:', error)
    return c.json({
      success: false,
      message: 'Error generating preview: ' + error.message
    }, 500)
  }
})

// =============================================================================
// PHASE 2: GEOGRAPHIC & TIME CONTROLS API ENDPOINTS 
// =============================================================================

// Get domain geographic controls
app.get('/api/domains/:id/geographic', requireAuth, (c) => {
  const id = c.req.param('id')
  const domain = domains.get(id)
  
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const geoAnalytics = dataManager.getGeographicAnalytics()
  
  return c.json({
    success: true,
    domain: domain.name,
    ...geoAnalytics
  })
})

// Update domain geographic controls
app.post('/api/domains/:id/geographic', requireAuth, async (c) => {
  const id = c.req.param('id')
  const updates = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  try {
    const success = dataManager.updateGeoControls(updates)
    
    if (success) {
      return c.json({
        success: true,
        message: 'Geographic controls updated',
        geoControls: dataManager.data.geoControls
      })
    } else {
      return c.json({ success: false, message: 'Failed to update geographic controls' }, 500)
    }
  } catch (error) {
    console.error('Geographic controls update error:', error)
    return c.json({ 
      success: false, 
      message: 'Geographic controls güncellenirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Test geographic access for an IP
app.post('/api/domains/:id/geographic/test', requireAuth, async (c) => {
  const id = c.req.param('id')
  const { ip, userAgent, referer } = await c.req.json()
  
  if (!ip) {
    return c.json({ success: false, message: 'IP address required' }, 400)
  }
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const geoCheck = dataManager.checkGeographicAccess(ip, userAgent, referer)
  
  return c.json({
    success: true,
    ip: ip,
    ...geoCheck
  })
})

// Get domain time controls
app.get('/api/domains/:id/time', requireAuth, (c) => {
  const id = c.req.param('id')
  const domain = domains.get(id)
  
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const timeAnalytics = dataManager.getTimeAnalytics()
  
  return c.json({
    success: true,
    domain: domain.name,
    ...timeAnalytics
  })
})

// Update domain time controls
app.post('/api/domains/:id/time', requireAuth, async (c) => {
  const id = c.req.param('id')
  const updates = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  try {
    const success = dataManager.updateTimeControls(updates)
    
    if (success) {
      return c.json({
        success: true,
        message: 'Time controls updated',
        timeControls: dataManager.data.timeControls
      })
    } else {
      return c.json({ success: false, message: 'Failed to update time controls' }, 500)
    }
  } catch (error) {
    console.error('Time controls update error:', error)
    return c.json({ 
      success: false, 
      message: 'Time controls güncellenirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Test time access for current or specific time
app.post('/api/domains/:id/time/test', requireAuth, async (c) => {
  const id = c.req.param('id')
  const { timestamp, timezone } = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const timeCheck = dataManager.checkTimeAccess(
    timestamp ? parseInt(timestamp) : Date.now(), 
    timezone
  )
  
  return c.json({
    success: true,
    ...timeCheck,
    testedTime: {
      timestamp: timestamp || Date.now(),
      timezone: timezone || dataManager.data.timeControls.timezone
    }
  })
})

// Combined access control test (IP + Geographic + Time)
app.post('/api/domains/:id/access-test', requireAuth, async (c) => {
  const id = c.req.param('id')
  const { ip, userAgent, referer, timestamp, timezone } = await c.req.json()
  
  if (!ip) {
    return c.json({ success: false, message: 'IP address required' }, 400)
  }
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const accessResult = dataManager.checkAccess(
    ip, 
    userAgent || '', 
    referer || '', 
    timestamp ? parseInt(timestamp) : Date.now(), 
    timezone
  )
  
  return c.json({
    success: true,
    ip: ip,
    ...accessResult
  })
})

// Get GeoIP information for an IP (mock service)
app.get('/api/geoip/:ip', requireAuth, (c) => {
  const ip = c.req.param('ip')
  
  // Create a temporary manager to use the GeoIP function
  const tempManager = new (class {
    getCountryFromIP = getDomainDataManager('temp').getCountryFromIP
  })()
  
  const country = tempManager.getCountryFromIP(ip)
  
  return c.json({
    success: true,
    ip: ip,
    country: country,
    mock: true,
    note: 'This is a mock GeoIP service. In production, use MaxMind GeoLite2 or similar.'
  })
})

// ====================================================================
// PHASE 3: CAMPAIGN TRACKING & RATE LIMITING API ENDPOINTS
// ====================================================================

// Get domain campaigns
app.get('/api/domains/:id/campaigns', requireAuth, (c) => {
  const id = c.req.param('id')
  const domain = domains.get(id)
  
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const campaignAnalytics = dataManager.getCampaignAnalytics()
  
  return c.json({
    success: true,
    domain: domain.name,
    ...campaignAnalytics
  })
})

// Update domain campaigns settings
app.put('/api/domains/:id/campaigns', requireAuth, async (c) => {
  const id = c.req.param('id')
  const settings = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  try {
    const dataManager = getDomainDataManager(domain.name)
    const updatedCampaigns = dataManager.updateCampaignSettings(settings)
    
    return c.json({
      success: true,
      message: 'Campaign settings updated successfully',
      campaigns: updatedCampaigns
    })
  } catch (error) {
    console.error('Campaign settings update error:', error)
    return c.json({ 
      success: false, 
      message: 'Failed to update campaign settings: ' + error.message 
    }, 500)
  }
})

// ====================================================================
// NGINX PROXY AUTO-CONFIGURATION SYSTEM
// ====================================================================

// Generate Nginx proxy configuration for domain
app.post('/api/domains/:id/proxy/generate', requireAuth, async (c) => {
  const id = c.req.param('id')
  const config = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const {
    backendIP = '46.202.158.197',
    proxyPort = 3000,
    enableSSL = false,
    customRules = ''
  } = config
  
  const nginxConfig = `# Auto-generated Nginx configuration for ${domain.name}
# Generated at: ${new Date().toISOString()}

server {
    listen 80;
    server_name ${domain.name} www.${domain.name};
    
    ${enableSSL ? `
    # Redirect HTTP to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name ${domain.name} www.${domain.name};
    
    # SSL Configuration (Configure your certificates)
    ssl_certificate /etc/ssl/certs/${domain.name}.crt;
    ssl_certificate_key /etc/ssl/private/${domain.name}.key;
    
    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Content-Type-Options "nosniff" always;
    ` : ''}
    
    # Traffic Management Platform Proxy
    location / {
        # Send all traffic through Traffic Management Platform
        proxy_pass http://127.0.0.1:${proxyPort}/proxy-handler;
        
        # Headers for Traffic Management Platform
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # Domain-specific headers for proxy decision
        proxy_set_header X-Original-Domain "${domain.name}";
        proxy_set_header X-Original-Backend "${backendIP}";
        
        # Timeout settings
        proxy_connect_timeout 30s;
        proxy_send_timeout 30s;
        proxy_read_timeout 30s;
        
        # Buffer settings
        proxy_buffering on;
        proxy_buffer_size 4k;
        proxy_buffers 8 4k;
    }
    
    # Health check endpoint (bypass proxy)
    location /health {
        access_log off;
        return 200 "OK";
        add_header Content-Type text/plain;
    }
    
    ${customRules}
}

# Upstream configuration for ${domain.name}
upstream ${domain.name.replace(/\./g, '_')}_backend {
    server ${backendIP}:80;
    # Add backup servers here if needed
}
`

  // Save configuration to domain data
  const dataManager = getDomainDataManager(domain.name)
  dataManager.data.proxyConfig = {
    nginxConfig,
    backendIP,
    proxyPort,
    enableSSL,
    generatedAt: new Date().toISOString()
  }
  
  return c.json({
    success: true,
    message: 'Nginx configuration generated successfully',
    config: nginxConfig,
    downloadUrl: `/api/domains/${id}/proxy/download`
  })
})

// Download Nginx configuration file
app.get('/api/domains/:id/proxy/download', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const proxyConfig = dataManager.data.proxyConfig
  
  if (!proxyConfig) {
    return c.json({ success: false, message: 'Proxy configuration not found' }, 404)
  }
  
  const fileName = `${domain.name.replace(/\./g, '_')}_nginx.conf`
  
  return new Response(proxyConfig.nginxConfig, {
    headers: {
      'Content-Type': 'text/plain',
      'Content-Disposition': `attachment; filename="${fileName}"`
    }
  })
})

// Get domain proxy status and configuration
app.get('/api/domains/:id/proxy/status', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const proxyConfig = dataManager.data.proxyConfig || {}
  
  return c.json({
    success: true,
    domain: domain.name,
    proxyStatus: {
      isConfigured: !!proxyConfig.nginxConfig,
      backendIP: proxyConfig.backendIP || 'Not configured',
      proxyPort: proxyConfig.proxyPort || 3000,
      enableSSL: proxyConfig.enableSSL || false,
      lastGenerated: proxyConfig.generatedAt || 'Never'
    }
  })
})

// Test domain proxy connectivity
app.post('/api/domains/:id/proxy/test', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  try {
    // Test connection to original backend
    const dataManager = getDomainDataManager(domain.name)
    const backendIP = dataManager.data.proxyConfig?.backendIP || '46.202.158.197'
    
    const testUrl = `http://${backendIP}/`
    const response = await fetch(testUrl, {
      method: 'HEAD',
      headers: { 'Host': domain.name },
      signal: AbortSignal.timeout(10000) // 10 second timeout
    })
    
    return c.json({
      success: true,
      backendStatus: {
        reachable: true,
        statusCode: response.status,
        responseTime: Date.now(),
        backendIP
      }
    })
    
  } catch (error) {
    return c.json({
      success: false,
      backendStatus: {
        reachable: false,
        error: error.message,
        backendIP: dataManager.data.proxyConfig?.backendIP || '46.202.158.197'
      }
    })
  }
})

// Track campaign click
app.post('/api/domains/:id/campaigns/track', requireAuth, async (c) => {
  const id = c.req.param('id')
  const campaignData = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  try {
    const dataManager = getDomainDataManager(domain.name)
    dataManager.trackCampaignClick({
      ...campaignData,
      timestamp: Date.now()
    })
    
    await dataManager.save()
    
    return c.json({
      success: true,
      message: 'Campaign click tracked successfully'
    })
  } catch (error) {
    console.error('Campaign tracking error:', error)
    return c.json({ 
      success: false, 
      message: 'Failed to track campaign click: ' + error.message 
    }, 500)
  }
})

// Get domain rate limiting status
app.get('/api/domains/:id/rate-limiting', requireAuth, (c) => {
  const id = c.req.param('id')
  const domain = domains.get(id)
  
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const rateLimitingStatus = dataManager.getRateLimitingStatus()
  
  return c.json({
    success: true,
    domain: domain.name,
    ...rateLimitingStatus
  })
})

// Update domain rate limiting settings
app.put('/api/domains/:id/rate-limiting', requireAuth, async (c) => {
  const id = c.req.param('id')
  const settings = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  try {
    const dataManager = getDomainDataManager(domain.name)
    const updatedSettings = dataManager.updateRateLimitingSettings(settings)
    
    return c.json({
      success: true,
      message: 'Rate limiting settings updated successfully',
      rateLimiting: updatedSettings
    })
  } catch (error) {
    console.error('Rate limiting settings update error:', error)
    return c.json({ 
      success: false, 
      message: 'Failed to update rate limiting settings: ' + error.message 
    }, 500)
  }
})

// Check rate limit for IP
app.post('/api/domains/:id/rate-limiting/check', requireAuth, async (c) => {
  const id = c.req.param('id')
  const { ip, userAgent } = await c.req.json()
  
  if (!ip) {
    return c.json({ success: false, message: 'IP address required' }, 400)
  }
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  try {
    const dataManager = getDomainDataManager(domain.name)
    const rateLimitResult = dataManager.checkRateLimit(ip, userAgent || '')
    
    return c.json({
      success: true,
      ip: ip,
      ...rateLimitResult
    })
  } catch (error) {
    console.error('Rate limit check error:', error)
    return c.json({ 
      success: false, 
      message: 'Failed to check rate limit: ' + error.message 
    }, 500)
  }
})

// Helper function to track IP on every API call
function trackIPCall(c, endpoint) {
  try {
    const ip = c.req.header('CF-Connecting-IP') || 
              c.req.header('X-Forwarded-For') || 
              c.req.header('X-Real-IP') || 
              '127.0.0.1'
    
    const userAgent = c.req.header('User-Agent') || ''
    const referrer = c.req.header('Referer') || ''
    
    // Track in global IP pool
    ipPoolManager.trackIP(ip, userAgent, referrer, endpoint)
    
    return ip
  } catch (error) {
    console.error('IP tracking error:', error)
    return null
  }
}

// ====================================================================
// NGINX PROXY HELPER FUNCTIONS
// ====================================================================

// Generate domain-specific nginx configuration
function generateDomainNginxConfig(options) {
  const { domain, config, includeSSL = true, includeHealthCheck = true } = options
  const domainName = domain.name
  const cleanName = domainName.replace(/[^a-zA-Z0-9]/g, '_')
  
  let nginxConfig = `# NGINX Proxy Configuration for ${domainName}
# Generated at: ${new Date().toISOString()}
# Traffic Management Platform - DNS Integration

# Upstream definitions
upstream ${cleanName}_clean {
    server ${config.cleanBackend.replace(/^https?:\/\//, '')};
    ${includeHealthCheck ? `
    # Health check configuration
    check interval=3000 rise=2 fall=5 timeout=1000 type=http;
    check_http_send "HEAD / HTTP/1.0\\r\\nHost: ${domainName}\\r\\n\\r\\n";
    check_http_expect_alive http_2xx http_3xx;` : ''}
}

upstream ${cleanName}_gray {
    server ${config.grayBackend.replace(/^https?:\/\//, '')};
    ${includeHealthCheck ? `
    check interval=3000 rise=2 fall=5 timeout=1000 type=http;
    check_http_send "HEAD / HTTP/1.0\\r\\nHost: ${domainName}\\r\\n\\r\\n";
    check_http_expect_alive http_2xx http_3xx;` : ''}
}

upstream ${cleanName}_aggressive {
    server ${config.aggressiveBackend.replace(/^https?:\/\//, '')};
    ${includeHealthCheck ? `
    check interval=3000 rise=2 fall=5 timeout=1000 type=http;
    check_http_send "HEAD / HTTP/1.0\\r\\nHost: ${domainName}\\r\\n\\r\\n";
    check_http_expect_alive http_2xx http_3xx;` : ''}
}

# Rate limiting zone for ${domainName}
limit_req_zone $binary_remote_addr zone=${cleanName}_limit:10m rate=10r/s;

# Main server configuration for ${domainName}
server {
    listen 80;
    ${includeSSL ? 'listen 443 ssl http2;' : ''}
    server_name ${domainName};
    
    # Enable real IP detection
    set_real_ip_from 103.21.244.0/22;
    set_real_ip_from 103.22.200.0/22;
    set_real_ip_from 103.31.4.0/22;
    set_real_ip_from 104.16.0.0/13;
    set_real_ip_from 108.162.192.0/18;
    set_real_ip_from 131.0.72.0/22;
    set_real_ip_from 141.101.64.0/18;
    set_real_ip_from 162.158.0.0/15;
    set_real_ip_from 172.64.0.0/13;
    set_real_ip_from 173.245.48.0/20;
    set_real_ip_from 188.114.96.0/20;
    set_real_ip_from 190.93.240.0/20;
    set_real_ip_from 197.234.240.0/22;
    set_real_ip_from 198.41.128.0/17;
    real_ip_header CF-Connecting-IP;
    
    ${includeSSL ? `
    # SSL configuration
    ssl_certificate /etc/nginx/ssl/${domainName}.crt;
    ssl_certificate_key /etc/nginx/ssl/${domainName}.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;
    ssl_prefer_server_ciphers off;
    
    # Force HTTPS redirect
    if ($scheme != "https") {
        return 301 https://$server_name$request_uri;
    }` : ''}
    
    # Rate limiting
    limit_req zone=${cleanName}_limit burst=20 nodelay;
    
    # Variables for dynamic routing
    set $backend_upstream "${cleanName}_clean";
    set $bot_detected "false";
    set $routing_decision "clean";
    
    # Advanced bot detection and routing logic
    location / {
        # Apply rate limiting
        limit_req zone=${cleanName}_limit burst=10 nodelay;
        
        # Bot detection patterns
        if ($http_user_agent ~* "(bot|crawler|spider|scraper|curl|wget|python|java)" ) {
            set $bot_detected "true";
        }
        
        # Enhanced routing logic based on detection
        if ($bot_detected = "true") {
            set $backend_upstream "${cleanName}_clean";
            set $routing_decision "clean_bot";
        }
        
        # Geographic routing (if enabled)
        ${config.geoRouting ? `
        if ($geoip_country_code = "US") {
            set $backend_upstream "${cleanName}_aggressive";
            set $routing_decision "geo_aggressive";
        }
        
        if ($geoip_country_code ~ "^(GB|DE|FR|CA)$") {
            set $backend_upstream "${cleanName}_gray";
            set $routing_decision "geo_gray";
        }` : ''}
        
        # Proxy configuration
        proxy_pass http://$backend_upstream;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Original-Domain $host;
        proxy_set_header X-Bot-Detected $bot_detected;
        proxy_set_header X-Routing-Decision $routing_decision;
        
        # Timeouts
        proxy_connect_timeout ${config.proxyTimeout || 30}s;
        proxy_send_timeout ${config.proxyTimeout || 30}s;
        proxy_read_timeout ${config.proxyTimeout || 30}s;
        
        # Buffer settings
        proxy_buffering on;
        proxy_buffer_size 4k;
        proxy_buffers 8 4k;
        proxy_busy_buffers_size 8k;
        
        # Maximum body size
        client_max_body_size ${config.maxBodySize || '10m'};
        
        # Headers optimization
        proxy_set_header Connection "";
        proxy_http_version 1.1;
        
        # Custom headers for traffic analysis
        add_header X-Served-By "${domainName}-proxy" always;
        add_header X-Backend-Used $backend_upstream always;
        add_header X-Bot-Status $bot_detected always;
    }
    
    # Health check endpoint
    location /nginx-health {
        access_log off;
        return 200 "healthy\\n";
        add_header Content-Type text/plain;
    }
    
    # Block common exploit attempts
    location ~ \\.(php|asp|aspx|jsp)$ {
        return 444;
    }
    
    # Security headers
    add_header X-Frame-Options SAMEORIGIN always;
    add_header X-Content-Type-Options nosniff always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
}

# Log format for traffic analysis
log_format ${cleanName}_analytics '$remote_addr - $remote_user [$time_local] '
                                 '"$request" $status $body_bytes_sent '
                                 '"$http_referer" "$http_user_agent" '
                                 '"$host" "$upstream_addr" "$request_time" '
                                 '"$bot_detected" "$routing_decision"';

# Access log
access_log /var/log/nginx/${domainName}.access.log ${cleanName}_analytics;
error_log /var/log/nginx/${domainName}.error.log warn;
`

  return nginxConfig
}

// Test proxy configuration
async function testProxyConfiguration(domain, config) {
  const results = {
    domain: domain.name,
    overallStatus: 'healthy',
    tests: [],
    summary: {
      total: 0,
      passed: 0,
      failed: 0,
      warnings: 0
    }
  }
  
  // Test 1: Backend connectivity
  const backends = [
    { name: 'Clean Backend', url: config.cleanBackend },
    { name: 'Gray Backend', url: config.grayBackend },
    { name: 'Aggressive Backend', url: config.aggressiveBackend }
  ]
  
  for (const backend of backends) {
    const test = {
      name: `${backend.name} Connectivity`,
      status: 'unknown',
      message: '',
      responseTime: 0,
      details: {}
    }
    
    try {
      const startTime = Date.now()
      
      // Clean URL for testing
      let testUrl = backend.url
      if (!testUrl.startsWith('http://') && !testUrl.startsWith('https://')) {
        testUrl = 'http://' + testUrl
      }
      
      // Simple connectivity test
      const response = await fetch(testUrl, {
        method: 'HEAD',
        signal: AbortSignal.timeout(5000)
      })
      
      const responseTime = Date.now() - startTime
      
      test.responseTime = responseTime
      test.details = {
        status: response.status,
        statusText: response.statusText,
        headers: Object.fromEntries(response.headers.entries())
      }
      
      if (response.ok) {
        test.status = 'passed'
        test.message = `Backend reachable (${response.status})`
        results.summary.passed++
      } else if (response.status >= 400 && response.status < 500) {
        test.status = 'warning'
        test.message = `Backend reachable but returned ${response.status}`
        results.summary.warnings++
      } else {
        test.status = 'failed'
        test.message = `Backend error: ${response.status} ${response.statusText}`
        results.summary.failed++
      }
      
    } catch (error) {
      test.status = 'failed'
      test.message = `Connection failed: ${error.message}`
      test.details = { error: error.message }
      results.summary.failed++
    }
    
    results.tests.push(test)
    results.summary.total++
  }
  
  // Test 2: Configuration validation
  const configTest = {
    name: 'Configuration Validation',
    status: 'unknown',
    message: '',
    details: {}
  }
  
  try {
    const validationIssues = []
    
    // Check required fields
    if (!config.cleanBackend) validationIssues.push('Clean backend not configured')
    if (!config.grayBackend) validationIssues.push('Gray backend not configured')
    if (!config.aggressiveBackend) validationIssues.push('Aggressive backend not configured')
    
    // Check URL formats
    const validateUrl = (url, name) => {
      try {
        new URL(url.includes('://') ? url : 'http://' + url)
        return true
      } catch {
        validationIssues.push(`Invalid ${name} URL format`)
        return false
      }
    }
    
    if (config.cleanBackend) validateUrl(config.cleanBackend, 'clean backend')
    if (config.grayBackend) validateUrl(config.grayBackend, 'gray backend')
    if (config.aggressiveBackend) validateUrl(config.aggressiveBackend, 'aggressive backend')
    
    // Check timeout values
    if (config.proxyTimeout && (config.proxyTimeout < 1 || config.proxyTimeout > 300)) {
      validationIssues.push('Proxy timeout should be between 1-300 seconds')
    }
    
    configTest.details = {
      issues: validationIssues,
      config: {
        routingMode: config.routingMode,
        botDetection: config.botDetection,
        geoRouting: config.geoRouting,
        proxyTimeout: config.proxyTimeout,
        maxBodySize: config.maxBodySize
      }
    }
    
    if (validationIssues.length === 0) {
      configTest.status = 'passed'
      configTest.message = 'Configuration is valid'
      results.summary.passed++
    } else {
      configTest.status = 'warning'
      configTest.message = `${validationIssues.length} configuration issues found`
      results.summary.warnings++
    }
    
  } catch (error) {
    configTest.status = 'failed'
    configTest.message = `Configuration validation failed: ${error.message}`
    results.summary.failed++
  }
  
  results.tests.push(configTest)
  results.summary.total++
  
  // Determine overall status
  if (results.summary.failed > 0) {
    results.overallStatus = 'failed'
  } else if (results.summary.warnings > 0) {
    results.overallStatus = 'warning'
  } else {
    results.overallStatus = 'healthy'
  }
  
  return results
}

// ====================================================================
// MISSING AUTHENTICATION AND HEALTH CHECK ENDPOINTS
// ====================================================================

// Demo authentication endpoint for testing
app.get('/api/auth/demo', (c) => {
  return c.json({
    success: true,
    message: 'Demo authentication successful',
    user: {
      id: 'demo-user',
      email: 'demo@traffic-platform.com',
      role: 'admin'
    },
    token: 'demo-token-12345',
    timestamp: new Date().toISOString()
  })
})

// Health check endpoint
app.get('/api/health', (c) => {
  return c.json({
    success: true,
    status: 'healthy',
    service: 'Traffic Management Platform',
    version: '3.0',
    timestamp: new Date().toISOString(),
    environment: 'development'
  })
})

// Basic authentication endpoint
app.post('/api/auth/login', async (c) => {
  try {
    const { email, password } = await c.req.json()
    
    // Demo authentication - in production, use proper auth
    if (email && password) {
      return c.json({
        success: true,
        message: 'Login successful',
        token: 'demo-token-' + Math.random().toString(36).substr(2, 9),
        user: {
          id: 'user-' + Math.random().toString(36).substr(2, 5),
          email: email,
          role: 'admin'
        }
      })
    } else {
      return c.json({
        success: false,
        message: 'Email and password are required'
      }, 400)
    }
