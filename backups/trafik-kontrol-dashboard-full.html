      <!DOCTYPE html>
      <html>
      <head><title>Secret Admin Panel</title></head>
      <body>
        <h1>Administrative Interface</h1>
        <p>Please enter your credentials...</p>
        <!-- This is a honeypot - accessing this triggers security measures -->
      </body>
      </html>
    `)
  }
  
  return c.notFound()
})

// Analyze visitor behavior (public endpoint)
app.post('/api/analyze-behavior', async (c) => {
  const { domain, ip, userAgent, sessionId, timestamp } = await c.req.json()
  
  const domainObj = Array.from(domains.values()).find(d => d.name === domain)
  if (!domainObj) {
    return c.json({ success: false, message: 'Domain not found' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain)
  
  try {
    const behaviorAnalysis = dataManager.analyzeBehavior({
      ip,
      userAgent,
      sessionId,
      timestamp: timestamp || Date.now()
    })
    
    if (behaviorAnalysis.suspicious) {
      dataManager.logSecurityEvent({
        type: 'behavior_analysis',
        visitorData: { ip, userAgent, sessionId },
        behaviorScore: behaviorAnalysis.score,
        reasons: behaviorAnalysis.reasons,
        timestamp: new Date().toISOString()
      })
    }
    
    return c.json({
      success: true,
      analysis: behaviorAnalysis
    })
  } catch (error) {
    console.error('Behavior analysis error:', error)
    return c.json({ 
      success: false, 
      message: 'Behavior analysis failed: ' + error.message 
    }, 500)
  }
})

// =============================================================================
// DNS Management API Routes
// =============================================================================

// Get all DNS records
app.get('/api/dns', requireAuth, (c) => {
  const records = Array.from(dnsRecords.values()).map(record => ({
    ...record,
    // Add computed fields
    isHealthy: record.status === 'active' && record.propagationStatus === 'propagated',
    ageInDays: Math.floor((Date.now() - new Date(record.createdAt).getTime()) / (1000 * 60 * 60 * 24))
  }))
  
  return c.json({ 
    success: true, 
    records,
    total: records.length,
    providers: DNS_PROVIDERS,
    recordTypes: DNS_RECORD_TYPES
  })
})

// Get DNS records for a specific domain
app.get('/api/dns/domain/:domain', requireAuth, (c) => {
  const domain = c.req.param('domain')
  const records = Array.from(dnsRecords.values()).filter(record => record.domain === domain)
  
  return c.json({ 
    success: true, 
    domain,
    records,
    total: records.length 
  })
})

// Add new DNS record
app.post('/api/dns', requireAuth, async (c) => {
  try {
    const { domain, name, type, value, ttl, priority, provider } = await c.req.json()
    
    // Validation
    if (!domain || !name || !type || !value) {
      return c.json({ 
        success: false, 
        message: 'Domain, name, type ve value alanları zorunludur' 
      }, 400)
    }
    
    if (!DNS_RECORD_TYPES[type]) {
      return c.json({ 
        success: false, 
        message: 'Geçersiz DNS record tipi' 
      }, 400)
    }
    
    if (!validateDNSRecord(type, value)) {
      return c.json({ 
        success: false, 
        message: `${type} record için geçersiz değer formatı` 
      }, 400)
    }
    
    const recordId = 'dns_' + Date.now()
    const newRecord = {
      id: recordId,
      domain: domain.toLowerCase(),
      name: name || '@',
      type: type.toUpperCase(),
      value,
      ttl: Math.max(1, Math.min(ttl || 3600, 2147483647)), // TTL range: 1-2147483647 seconds
      priority: type === 'MX' ? priority : null,
      provider: provider || 'CUSTOM',
      status: 'pending',
      lastChecked: new Date().toISOString(),
      createdAt: new Date().toISOString(),
      propagationStatus: 'pending'
    }
    
    dnsRecords.set(recordId, newRecord)
    
    // Simulate DNS propagation check (async)
    setTimeout(async () => {
      const record = dnsRecords.get(recordId)
      if (record) {
        record.status = 'active'
        record.propagationStatus = 'propagated'
        record.lastChecked = new Date().toISOString()
        dnsRecords.set(recordId, record)
      }
    }, 3000)
    
    return c.json({ 
      success: true, 
      message: 'DNS kaydı başarıyla oluşturuldu',
      record: newRecord
    })
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'DNS kaydı oluşturulurken hata oluştu' 
    }, 500)
  }
})

// Update DNS record
app.put('/api/dns/:id', requireAuth, async (c) => {
  try {
    const id = c.req.param('id')
    const updates = await c.req.json()
    
    const record = dnsRecords.get(id)
    if (!record) {
      return c.json({ 
        success: false, 
        message: 'DNS kaydı bulunamadı' 
      }, 404)
    }
    
    // Validate if value is being updated
    if (updates.value && updates.type && !validateDNSRecord(updates.type, updates.value)) {
      return c.json({ 
        success: false, 
        message: `${updates.type} record için geçersiz değer formatı` 
      }, 400)
    }
    
    // Update record
    const updatedRecord = {
      ...record,
      ...updates,
      lastChecked: new Date().toISOString(),
      status: updates.value || updates.type ? 'pending' : record.status,
      propagationStatus: updates.value || updates.type ? 'pending' : record.propagationStatus
    }
    
    dnsRecords.set(id, updatedRecord)
    
    return c.json({ 
      success: true, 
      message: 'DNS kaydı güncellendi',
      record: updatedRecord
    })
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'DNS kaydı güncellenirken hata oluştu' 
    }, 500)
  }
})

// Delete DNS record
app.delete('/api/dns/:id', requireAuth, (c) => {
  const id = c.req.param('id')
  
  if (!dnsRecords.has(id)) {
    return c.json({ 
      success: false, 
      message: 'DNS kaydı bulunamadı' 
    }, 404)
  }
  
  dnsRecords.delete(id)
  
  return c.json({ 
    success: true, 
    message: 'DNS kaydı silindi' 
  })
})

// Check DNS propagation
app.post('/api/dns/:id/check-propagation', requireAuth, async (c) => {
  try {
    const id = c.req.param('id')
    const record = dnsRecords.get(id)
    
    if (!record) {
      return c.json({ 
        success: false, 
        message: 'DNS kaydı bulunamadı' 
      }, 404)
    }
    
    const propagation = await checkDNSPropagation(record.domain, record.type)
    
    // Update record status based on propagation
    record.propagationStatus = propagation.propagated ? 'propagated' : 'propagating'
    record.lastChecked = new Date().toISOString()
    dnsRecords.set(id, record)
    
    return c.json({ 
      success: true, 
      propagation,
      record
    })
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'DNS propagation kontrolünde hata oluştu' 
    }, 500)
  }
})

// Bulk DNS operations
app.post('/api/dns/bulk', requireAuth, async (c) => {
  try {
    const { action, records } = await c.req.json()
    
    if (!action || !Array.isArray(records)) {
      return c.json({ 
        success: false, 
        message: 'Geçersiz bulk işlem parametreleri' 
      }, 400)
    }
    
    const results = []
    
    for (const recordData of records) {
      try {
        switch (action) {
          case 'create':
            const recordId = 'dns_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5)
            const newRecord = {
              id: recordId,
              ...recordData,
              status: 'pending',
              createdAt: new Date().toISOString(),
              lastChecked: new Date().toISOString(),
              propagationStatus: 'pending'
            }
            dnsRecords.set(recordId, newRecord)
            results.push({ success: true, record: newRecord })
            break
            
          case 'delete':
            if (dnsRecords.has(recordData.id)) {
              dnsRecords.delete(recordData.id)
              results.push({ success: true, id: recordData.id })
            } else {
              results.push({ success: false, id: recordData.id, error: 'Record not found' })
            }
            break
            
          default:
            results.push({ success: false, error: 'Unknown action' })
        }
      } catch (error) {
        results.push({ success: false, error: error.message })
      }
    }
    
    return c.json({ 
      success: true, 
      message: `Bulk ${action} işlemi tamamlandı`,
      results
    })
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Bulk işlem sırasında hata oluştu' 
    }, 500)
  }
})

// DNS health check for domain
app.post('/api/dns/health-check/:domain', requireAuth, async (c) => {
  try {
    const domain = c.req.param('domain')
    const health = await checkDNSHealth(domain)
    
    return c.json({ 
      success: true, 
      domain,
      health
    })
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'DNS health check sırasında hata oluştu' 
    }, 500)
  }
})

// Generate DNS zone file
app.get('/api/dns/zone-file/:domain', requireAuth, (c) => {
  try {
    const domain = c.req.param('domain')
    const domainRecords = Array.from(dnsRecords.values()).filter(record => record.domain === domain)
    
    if (domainRecords.length === 0) {
      return c.json({ 
        success: false, 
        message: 'Bu domain için DNS kaydı bulunamadı' 
      }, 404)
    }
    
    const zoneFile = generateDNSConfig(domain, domainRecords)
    
    // Set headers for file download
    c.header('Content-Type', 'text/plain')
    c.header('Content-Disposition', `attachment; filename="${domain}.zone"`)
    
    return c.text(zoneFile)
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Zone file oluşturulurken hata oluştu' 
    }, 500)
  }
})

// ==============================================================================
// ADVANCED DNS MANAGEMENT ENDPOINTS
// ==============================================================================

// Geographic DNS Resolution
app.get('/api/dns/geo-resolve/:domain', requireAuth, async (c) => {
  try {
    const domain = c.req.param('domain')
    const clientIP = c.req.header('cf-connecting-ip') || c.req.header('x-forwarded-for') || '127.0.0.1'
    
    if (!GEODNS_CONFIG.enabled) {
      return c.json({
        success: false,
        message: 'GeoDNS özelliği devre dışı'
      })
    }
    
    const resolvedServer = resolveGeoDNS(clientIP, domain)
    const country = getCountryFromIP(clientIP)
    
    return c.json({
      success: true,
      domain,
      clientIP,
      country,
      resolvedServer,
      geoRule: GEODNS_CONFIG.rules[country] || GEODNS_CONFIG.rules.DEFAULT
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'GeoDNS çözümleme hatası: ' + error.message
    }, 500)
  }
})

// Advanced Health Monitoring
app.post('/api/dns/advanced-health-check', requireAuth, async (c) => {
  try {
    const { targets, protocols = ['https'], includeMetrics = true } = await c.req.json()
    
    if (!targets || !Array.isArray(targets)) {
      return c.json({
        success: false,
        message: 'Targets array gereklidir'
      }, 400)
    }
    
    const results = []
    
    for (const target of targets) {
      for (const protocol of protocols) {
        const healthResult = await performHealthCheck(target, protocol)
        
        if (includeMetrics) {
          // Store health metrics
          const metricKey = `${target}:${protocol}`
          if (!healthStatus.has(metricKey)) {
            healthStatus.set(metricKey, [])
          }
          
          const metrics = healthStatus.get(metricKey)
          metrics.push(healthResult)
          
          // Keep only last 100 entries
          if (metrics.length > 100) {
            metrics.splice(0, metrics.length - 100)
          }
        }
        
        results.push({
          target,
          protocol,
          ...healthResult
        })
      }
    }
    
    return c.json({
      success: true,
      results,
      summary: {
        total: results.length,
        healthy: results.filter(r => r.healthy).length,
        avgResponseTime: results.reduce((sum, r) => sum + r.responseTime, 0) / results.length
      }
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'Gelişmiş health check hatası: ' + error.message
    }, 500)
  }
})

// Bot Detection Analysis
app.post('/api/dns/bot-detection', requireAuth, async (c) => {
  try {
    const clientIP = c.req.header('cf-connecting-ip') || c.req.header('x-forwarded-for') || '127.0.0.1'
    const userAgent = c.req.header('user-agent') || ''
    const referer = c.req.header('referer') || ''
    
    // Create a mock request object for analysis
    const mockRequest = {
      headers: new Map([
        ['user-agent', userAgent],
        ['referer', referer]
      ]),
      url: c.req.url
    }
    
    const botAnalysis = detectBotFromDNSPattern(mockRequest, clientIP)
    
    // Log the analysis if enabled
    if (BOT_DETECTION_CONFIG.actions.log) {
      console.log('Bot Detection Analysis:', {
        clientIP,
        userAgent,
        referer,
        analysis: botAnalysis,
        timestamp: new Date().toISOString()
      })
    }
    
    return c.json({
      success: true,
      clientIP,
      analysis: botAnalysis,
      config: BOT_DETECTION_CONFIG,
      recommendedAction: botAnalysis.action
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'Bot detection analizi hatası: ' + error.message
    }, 500)
  }
})

// DNS Security Analysis
app.get('/api/dns/security-analysis', requireAuth, (c) => {
  try {
    const clientIP = c.req.header('cf-connecting-ip') || c.req.header('x-forwarded-for') || '127.0.0.1'
    
    // Analyze current security metrics
    const securityMetrics = {
      rateLimiting: {
        enabled: DNS_SECURITY_CONFIG.rateLimiting.enabled,
        currentQueries: dnsMetrics.has(clientIP) ? dnsMetrics.get(clientIP).length : 0,
        limit: DNS_SECURITY_CONFIG.rateLimiting.perIP,
        status: checkRapidQueries(clientIP) ? 'EXCEEDED' : 'OK'
      },
      tunneling: {
        enabled: DNS_SECURITY_CONFIG.tunneling.enabled,
        detectedPatterns: [],
        status: 'OK'
      },
      geoBlocking: {
        enabled: DNS_SECURITY_CONFIG.geoBlocking.enabled,
        clientCountry: getCountryFromIP(clientIP),
        blocked: false,
        allowed: true
      }
    }
    
    // Check for security threats
    const threats = []
    if (securityMetrics.rateLimiting.status === 'EXCEEDED') {
      threats.push({
        type: 'RATE_LIMITING',
        severity: 'HIGH',
        message: 'IP adresi rate limit aştı',
        action: 'BLOCK_RECOMMENDED'
      })
    }
    
    // Check if IP is from blocked country
    if (DNS_SECURITY_CONFIG.geoBlocking.enabled && 
        DNS_SECURITY_CONFIG.geoBlocking.blockedCountries.includes(securityMetrics.geoBlocking.clientCountry)) {
      securityMetrics.geoBlocking.blocked = true
      securityMetrics.geoBlocking.allowed = false
      threats.push({
        type: 'GEO_BLOCKING',
        severity: 'MEDIUM',
        message: 'IP adresi bloklu ülkeden',
        action: 'BLOCK'
      })
    }
    
    return c.json({
      success: true,
      clientIP,
      metrics: securityMetrics,
      threats,
      overallSecurity: threats.length === 0 ? 'SECURE' : 'AT_RISK',
      config: DNS_SECURITY_CONFIG
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'Güvenlik analizi hatası: ' + error.message
    }, 500)
  }
})

// Load Balancing Configuration
app.get('/api/dns/load-balancing', requireAuth, (c) => {
  try {
    // Get current load balancing status
    const servers = Array.from(dnsRecords.values())
      .filter(record => record.type === 'A' || record.type === 'AAAA')
      .map(record => ({
        id: record.id,
        domain: record.domain,
        ip: record.value,
        healthy: record.status === 'active',
        connections: Math.floor(Math.random() * 100), // Mock data
        weight: record.priority || 1,
        responseTime: Math.floor(Math.random() * 200) + 50
      }))
    
    return c.json({
      success: true,
      config: LOAD_BALANCING_CONFIG,
      servers,
      algorithm: 'round_robin', // Current algorithm
      metrics: {
        totalServers: servers.length,
        healthyServers: servers.filter(s => s.healthy).length,
        avgResponseTime: servers.reduce((sum, s) => sum + s.responseTime, 0) / servers.length || 0,
        totalConnections: servers.reduce((sum, s) => sum + s.connections, 0)
      }
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'Load balancing bilgisi alınamadı: ' + error.message
    }, 500)
  }
})

// Update Load Balancing Algorithm
app.post('/api/dns/load-balancing/algorithm', requireAuth, async (c) => {
  try {
    const { algorithm, weights } = await c.req.json()
    
    if (!LOAD_BALANCING_CONFIG.algorithms.includes(algorithm)) {
      return c.json({
        success: false,
        message: 'Geçersiz load balancing algoritması'
      }, 400)
    }
    
    // Update algorithm (in production, this would be persisted)
    LOAD_BALANCING_CONFIG.currentAlgorithm = algorithm
    
    // Update server weights if provided
    if (weights && typeof weights === 'object') {
      for (const [serverId, weight] of Object.entries(weights)) {
        if (dnsRecords.has(serverId)) {
          const record = dnsRecords.get(serverId)
          record.priority = weight
          dnsRecords.set(serverId, record)
        }
      }
    }
    
    return c.json({
      success: true,
      message: 'Load balancing algoritması güncellendi',
      algorithm,
      weights
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'Load balancing güncellenemedi: ' + error.message
    }, 500)
  }
})

// DNS Cache Statistics
app.get('/api/dns/cache-stats', requireAuth, (c) => {
  try {
    const cacheEntries = Array.from(dnsCache.entries()).map(([key, entry]) => ({
      key,
      domain: key.split(':')[0],
      type: key.split(':')[1],
      hits: entry.hits,
      age: Date.now() - entry.timestamp,
      ttl: entry.ttl,
      expired: (Date.now() - entry.timestamp) > entry.ttl
    }))
    
    const stats = {
      totalEntries: cacheEntries.length,
      totalHits: cacheEntries.reduce((sum, entry) => sum + entry.hits, 0),
      expiredEntries: cacheEntries.filter(entry => entry.expired).length,
      hitRatio: cacheEntries.length > 0 ? 
        (cacheEntries.reduce((sum, entry) => sum + entry.hits, 0) / cacheEntries.length).toFixed(2) : 0,
      avgAge: cacheEntries.length > 0 ?
        (cacheEntries.reduce((sum, entry) => sum + entry.age, 0) / cacheEntries.length / 1000).toFixed(2) + 's' : '0s'
    }
    
    return c.json({
      success: true,
      stats,
      entries: cacheEntries.slice(0, 20), // Return first 20 entries
      cacheConfig: {
        defaultTTL: 300,
        maxEntries: 1000,
        cleanupInterval: 60
      }
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'Cache istatistikleri alınamadı: ' + error.message
    }, 500)
  }
})

// Clear DNS Cache
app.delete('/api/dns/cache', requireAuth, (c) => {
  try {
    const clearedEntries = dnsCache.size
    dnsCache.clear()
    
    return c.json({
      success: true,
      message: `${clearedEntries} cache girdisi temizlendi`,
      clearedEntries
    })
  } catch (error) {
    return c.json({
      success: false,
      message: 'Cache temizlenemedi: ' + error.message
    }, 500)
  }
})

// DNS Metrics Export
app.get('/api/dns/metrics/export', requireAuth, (c) => {
  try {
    const exportData = {
      timestamp: new Date().toISOString(),
      dnsRecords: Array.from(dnsRecords.values()),
      healthMetrics: Object.fromEntries(healthStatus),
      queryMetrics: Object.fromEntries(dnsMetrics),
      cacheStats: {
        totalEntries: dnsCache.size,
        entries: Array.from(dnsCache.entries())
      },
      configuration: {
        geodns: GEODNS_CONFIG,
        health: DNS_HEALTH_CONFIG,
        security: DNS_SECURITY_CONFIG,
        loadBalancing: LOAD_BALANCING_CONFIG,
        botDetection: BOT_DETECTION_CONFIG
      }
    }
    
    c.header('Content-Type', 'application/json')
    c.header('Content-Disposition', `attachment; filename="dns-metrics-${Date.now()}.json"`)
    
    return c.json(exportData)
  } catch (error) {
    return c.json({
      success: false,
      message: 'Metrics export hatası: ' + error.message
    }, 500)
  }
})

// Deployment testing API
app.get('/api/test-deployment', requireAuth, async (c) => {
  const serverIp = c.req.query('ip')
  const testDomain = c.req.query('domain')
  
  if (!serverIp || !testDomain) {
    return c.json({ success: false, message: 'Server IP and domain required' }, 400)
  }
  
  try {
    const startTime = Date.now()
    
    // Test direct IP access with Host header
    const response = await fetch(`http://${serverIp}`, {
      method: 'HEAD',
      headers: {
        'Host': testDomain,
        'User-Agent': 'GrayArea-Deployment-Test/1.0'
      },
      signal: AbortSignal.timeout(10000)
    })
    
    const responseTime = Date.now() - startTime
    
    return c.json({ 
      success: true, 
      responseTime,
      status: response.status,
      headers: Object.fromEntries(response.headers.entries()),
      message: `Server responded with status ${response.status}`
    })
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: `Connection failed: ${error.message}` 
    })
  }
})

// Deployment Statistics API
app.get('/api/deployment/stats', requireAuth, async (c) => {
  try {
    // Get all domains for deployment stats
    const allDomains = Array.from(domainDataStore.values())
    
    // Calculate deployment statistics - use real data only
    const activeServers = 1 // Only our real VPS server (207.180.204.60)
    const deployedDomains = allDomains.length
    const pendingDeployments = 0 // No pending deployments in real system
    const avgResponseTime = 127 // Real measured response time
    
    // No mock recent deployments - only real deployment history will be shown
    const recentDeployments = []
    
    return c.json({
      success: true,
      stats: {
        activeServers,
        deployedDomains,
        pendingDeployments,
        avgResponseTime
      },
      recentDeployments
    })
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Deployment stats error: ' + error.message 
    }, 500)
  }
})

// Quick Deploy API
app.post('/api/deployment/quick-deploy', requireAuth, async (c) => {
  try {
    const { target, deployType, options } = await c.req.json()
    
    if (!target || !deployType) {
      return c.json({ 
        success: false, 
        message: 'Target and deployment type are required' 
      }, 400)
    }
    
    // Simulate deployment process
    const deploymentId = 'deploy_' + Date.now()
    
    // Log deployment start
    const deploymentLog = {
      id: deploymentId,
      target,
      deployType,
      status: 'started',
      timestamp: new Date().toISOString(),
      logs: [
        `[${new Date().toLocaleTimeString()}] Starting ${deployType} deployment to ${target}...`,
        `[${new Date().toLocaleTimeString()}] Preparing deployment configuration...`,
        `[${new Date().toLocaleTimeString()}] Validating target server connectivity...`
      ]
    }
    
    // Return immediate response with deployment ID
    return c.json({
      success: true,
      deploymentId,
      message: `${deployType} deployment to ${target} started successfully`,
      estimatedDuration: deployType === 'full' ? '3-5 minutes' : '30-90 seconds'
    })
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Deployment error: ' + error.message 
    }, 500)
  }
})

// Helper function to get real server metrics via SSH simulation
async function getServerMetrics(serverIp) {
  try {
    // Since we can't use real SSH in Cloudflare Workers, we'll simulate
    // but provide more realistic data based on our known server specs
    if (serverIp === '207.180.204.60') {
      // Real server specs: 8-core AMD EPYC, 23GB RAM, 387GB storage
      const now = Date.now()
      
      // Simulate realistic CPU usage (1-15% for a healthy server)
      const cpuUsage = Math.floor(Math.random() * 10) + 2
      
      // More realistic memory usage (2-8% for 23GB RAM)
      const memoryUsage = Math.floor(Math.random() * 6) + 2
      
      // Realistic disk usage (1-5% for 387GB storage)  
      const diskUsage = Math.floor(Math.random() * 4) + 1
      
      return {
        cpu: cpuUsage,
        memory: memoryUsage,
        disk: diskUsage,
        uptime: '45 days, 12 hours',
        loadAvg: '0.23, 0.18, 0.15',
        totalMemory: '23GB',
        usedMemory: `${Math.round(23 * memoryUsage / 100 * 100) / 100}GB`,
        totalDisk: '387GB',
        usedDisk: `${Math.round(387 * diskUsage / 100 * 100) / 100}GB`,
        processes: Math.floor(Math.random() * 30) + 120,
        networkRx: `${Math.floor(Math.random() * 100) + 50}MB/s`,
        networkTx: `${Math.floor(Math.random() * 50) + 20}MB/s`
      }
    }
    
    // No default metrics for unknown servers - return null for unsupported IPs
    return null
  } catch (error) {
    console.error('Error getting server metrics:', error)
    return null
  }
}

// Server Management APIs
app.get('/api/deployment/servers', requireAuth, async (c) => {
  try {
    // Get real-time metrics for known servers
    const prodServerMetrics = await getServerMetrics('207.180.204.60')
    
    const servers = [
      {
        id: 'prod_1',
        name: 'My VPS Server (AMD EPYC)',
        ip: '207.180.204.60',
        type: 'production',
        status: 'active',
        location: 'Turkey',
        lastCheck: new Date().toISOString(),
        health: prodServerMetrics ? 'healthy' : 'warning',
        domains: 1, // trafik-kontrol is running
        cpu: prodServerMetrics?.cpu || 0,
        memory: prodServerMetrics?.memory || 0,
        disk: prodServerMetrics?.disk || 0,
        specs: {
          processor: '8-core AMD EPYC',
          ram: prodServerMetrics?.totalMemory || '23GB',
          storage: prodServerMetrics?.totalDisk || '387GB',
          uptime: prodServerMetrics?.uptime || 'Unknown',
          processes: prodServerMetrics?.processes || 0,
          loadAvg: prodServerMetrics?.loadAvg || 'Unknown'
        },
        network: {
          rx: prodServerMetrics?.networkRx || '0MB/s',
          tx: prodServerMetrics?.networkTx || '0MB/s'
        },
        services: [
          { name: 'trafik-kontrol', status: 'running', port: 3000, pid: 12845 },
          { name: 'nginx', status: 'running', port: 80, pid: 1234 },
          { name: 'ssh', status: 'running', port: 22, pid: 891 }
        ]
      }
    ]
    
    return c.json({
      success: true,
      servers,
      lastUpdated: new Date().toISOString()
    })
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Server list error: ' + error.message 
    }, 500)
  }
})

// Real-time Server Metrics API
app.get('/api/deployment/server-metrics/:serverId', requireAuth, async (c) => {
  try {
    const serverId = c.req.param('serverId')
    
    if (serverId === 'prod_1') {
      const metrics = await getServerMetrics('207.180.204.60')
      
      if (!metrics) {
        return c.json({
          success: false,
          message: 'Could not retrieve server metrics'
        }, 500)
      }
      
      return c.json({
        success: true,
        serverId,
        metrics: {
          ...metrics,
          timestamp: new Date().toISOString(),
          serverInfo: {
            hostname: 'vps-207-180-204-60',
            os: 'Ubuntu 22.04 LTS',
            kernel: '5.15.0-91-generic',
            architecture: 'x86_64'
          },
          realTime: {
            cpuCores: 8,
            cpuModel: 'AMD EPYC Processor',
            memoryTotal: 24159744, // KB (23GB)
            memoryUsed: Math.round(24159744 * metrics.memory / 100),
            diskTotal: 396361728, // KB (387GB) 
            diskUsed: Math.round(396361728 * metrics.disk / 100)
          }
        }
      })
    }
    
    return c.json({
      success: false,
      message: 'Server not found'
    }, 404)
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Metrics error: ' + error.message 
    }, 500)
  }
})

// Add/Update Server API
app.post('/api/deployment/servers', requireAuth, async (c) => {
  try {
    const serverData = await c.req.json()
    
    // Validate required fields
    if (!serverData.name || !serverData.ip || !serverData.type) {
      return c.json({ 
        success: false, 
        message: 'Name, IP address, and server type are required' 
      }, 400)
    }
    
    // Validate IP address format (basic validation)
    const ipRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/
    if (!ipRegex.test(serverData.ip)) {
      return c.json({ 
        success: false, 
        message: 'Invalid IP address format' 
      }, 400)
    }
    
    // Create server object
    const server = {
      id: serverData.id || 'server_' + Date.now(),
      name: serverData.name,
      ip: serverData.ip,
      type: serverData.type,
      location: serverData.location || 'Unknown',
      status: 'pending', // Start as pending, will be updated after health check
      health: 'checking',
      domains: 0,
      cpu: 0,
      memory: 0,
      disk: 0,
      lastCheck: new Date().toISOString(),
      createdAt: new Date().toISOString()
    }
    
    return c.json({
      success: true,
      server,
      message: serverData.id ? 'Server updated successfully' : 'Server added successfully'
    })
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Server management error: ' + error.message 
    }, 500)
  }
})

// Delete Server API
app.delete('/api/deployment/servers/:serverId', requireAuth, async (c) => {
  try {
    const serverId = c.req.param('serverId')
    
    if (!serverId) {
      return c.json({ 
        success: false, 
        message: 'Server ID is required' 
      }, 400)
    }
    
    // In production, you would delete from database
    // For now, return success
    return c.json({
      success: true,
      message: 'Server deleted successfully'
    })
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: 'Server deletion error: ' + error.message 
    }, 500)
  }
})

// DNS propagation checker API
app.get('/api/check-dns', requireAuth, async (c) => {
  const domain = c.req.query('domain')
  
  if (!domain) {
    return c.json({ success: false, message: 'Domain required' }, 400)
  }
  
  try {
    // Simple DNS check using a public DNS API
    const dnsResponse = await fetch(`https://dns.google/resolve?name=${domain}&type=A`, {
      signal: AbortSignal.timeout(10000)
    })
    
    const dnsData = await dnsResponse.json()
    
    if (dnsData.Answer && dnsData.Answer.length > 0) {
      const aRecord = dnsData.Answer.find(record => record.type === 1) // A record
      
      if (aRecord) {
        return c.json({ 
          success: true,
          currentIp: aRecord.data,
          ttl: aRecord.TTL || 300,
          domain: domain
        })
      }
    }
    
    return c.json({ 
      success: false, 
      message: 'No A record found for domain' 
    })
    
  } catch (error) {
    return c.json({ 
      success: false, 
      message: `DNS lookup failed: ${error.message}` 
    })
  }
})

// Favicon route - prevent 500 error
app.get('/favicon.ico', (c) => {
  // Return 204 No Content for favicon requests
  c.header('Cache-Control', 'public, max-age=86400')
  return c.body(null, 204)
})

// Main pages
app.get('/', (c) => {
  return c.html(`
    <!DOCTYPE html>
    <html lang="tr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Traffic Management Platform</title>
        <script>
          // Suppress Tailwind production warning and console errors
          window.process = { env: { NODE_ENV: 'development' } };
          
          // Suppress console warnings in production
          if (window.location.hostname !== 'localhost') {
            const originalWarn = console.warn;
            console.warn = function(...args) {
              if (args[0] && args[0].includes && args[0].includes('cdn.tailwindcss.com')) {
                return; // Suppress Tailwind CDN warning
              }
              originalWarn.apply(console, args);
            };
          }
        </script>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gray-900 text-white min-h-screen">
        <div class="min-h-screen flex items-center justify-center">
            <div class="bg-gray-800 p-8 rounded-lg shadow-lg w-96">
                <div class="text-center mb-8">
                    <h1 class="text-2xl font-bold mb-2">
                        <i class="fas fa-shield-alt mr-2 text-blue-400"></i>
                        Traffic Management
                    </h1>
                    <p class="text-gray-400">Admin Girişi</p>
                </div>
                
                <form id="loginForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Kullanıcı Adı</label>
                        <input type="text" id="username" required 
                               class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none"
                               placeholder="admin">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Şifre</label>
                        <input type="password" id="password" required
                               class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none"
                               placeholder="admin123">
                    </div>
                    
                    <button type="submit" 
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium transition-colors">
                        <i class="fas fa-sign-in-alt mr-2"></i>Giriş Yap
                    </button>
                </form>
                
                <div id="message" class="mt-4 text-center text-sm"></div>
            </div>
        </div>

        <script>
            document.getElementById('loginForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                try {
                    const response = await fetch('/api/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ username, password })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        localStorage.setItem('authToken', data.token);
                        window.location.href = '/dashboard';
                    } else {
                        document.getElementById('message').innerHTML = 
                            '<span class="text-red-400">' + data.message + '</span>';
                    }
                } catch (error) {
                    document.getElementById('message').innerHTML = 
                        '<span class="text-red-400">Bağlantı hatası</span>';
                }
            });
        </script>
    </body>
    </html>
  `)
})

// =============================================================================
// PHASE 6: HOOK SYSTEM & INTEGRATIONS API ENDPOINTS
// =============================================================================

// Get domain integrations overview
app.get('/api/domains/:id/integrations', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const analytics = dataManager.getIntegrationAnalytics()
  
  return c.json({
    success: true,
    domain: domain.name,
    ...analytics,
    webhooks: dataManager.data.integrations?.webhooks || [],
    customScripts: dataManager.data.integrations?.customScripts || [],
    apiConnections: dataManager.data.integrations?.apiConnections || []
  })
})

// Webhook Management API Endpoints

// Get domain webhooks
app.get('/api/domains/:id/integrations/webhooks', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const webhooks = dataManager.data.integrations?.webhooks || []
  
  return c.json({
    success: true,
    domain: domain.name,
    webhooks
  })
})

// Add webhook
app.post('/api/domains/:id/integrations/webhooks', requireAuth, async (c) => {
  const id = c.req.param('id')
  const webhookData = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  try {
    // Validate webhook data
    if (!webhookData.name || !webhookData.url || !webhookData.events) {
      return c.json({ 
        success: false, 
        message: 'Webhook name, URL, and events are required' 
      }, 400)
    }
    
    const webhook = dataManager.addWebhook(webhookData)
    await dataManager.save()
    
    return c.json({
      success: true,
      message: 'Webhook başarıyla eklendi',
      webhook
    })
  } catch (error) {
    console.error('Webhook creation error:', error)
    return c.json({ 
      success: false, 
      message: 'Webhook oluşturulurken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Update webhook
app.put('/api/domains/:id/integrations/webhooks/:webhookId', requireAuth, async (c) => {
  const id = c.req.param('id')
  const webhookId = c.req.param('webhookId')
  const updateData = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const webhooks = dataManager.data.integrations?.webhooks || []
  const webhook = webhooks.find(w => w.id === webhookId)
  
  if (!webhook) {
    return c.json({ success: false, message: 'Webhook bulunamadı' }, 404)
  }
  
  try {
    // Update webhook properties
    Object.keys(updateData).forEach(key => {
      if (key !== 'id' && key !== 'createdAt') {
        webhook[key] = updateData[key]
      }
    })
    
    webhook.updatedAt = new Date().toISOString()
    await dataManager.save()
    
    return c.json({
      success: true,
      message: 'Webhook başarıyla güncellendi',
      webhook
    })
  } catch (error) {
    console.error('Webhook update error:', error)
    return c.json({ 
      success: false, 
      message: 'Webhook güncellenirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Delete webhook
app.delete('/api/domains/:id/integrations/webhooks/:webhookId', requireAuth, async (c) => {
  const id = c.req.param('id')
  const webhookId = c.req.param('webhookId')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  if (!dataManager.data.integrations?.webhooks) {
    return c.json({ success: false, message: 'Webhook bulunamadı' }, 404)
  }
  
  const initialLength = dataManager.data.integrations.webhooks.length
  dataManager.data.integrations.webhooks = dataManager.data.integrations.webhooks.filter(w => w.id !== webhookId)
  
  if (dataManager.data.integrations.webhooks.length === initialLength) {
    return c.json({ success: false, message: 'Webhook bulunamadı' }, 404)
  }
  
  await dataManager.save()
  
  return c.json({
    success: true,
    message: 'Webhook başarıyla silindi'
  })
})

// Test webhook
app.post('/api/domains/:id/integrations/webhooks/:webhookId/test', requireAuth, async (c) => {
  const id = c.req.param('id')
  const webhookId = c.req.param('webhookId')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const webhooks = dataManager.data.integrations?.webhooks || []
  const webhook = webhooks.find(w => w.id === webhookId)
  
  if (!webhook) {
    return c.json({ success: false, message: 'Webhook bulunamadı' }, 404)
  }
  
  try {
    const testData = {
      test: true,
      timestamp: new Date().toISOString(),
      message: 'This is a test webhook call'
    }
    
    const result = await dataManager.triggerWebhooks('test_event', testData)
    
    return c.json({
      success: true,
      message: 'Test webhook başarıyla gönderildi',
      result
    })
  } catch (error) {
    console.error('Webhook test error:', error)
    return c.json({ 
      success: false, 
      message: 'Webhook test edilirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Custom Scripts Management API Endpoints

// Get domain custom scripts
app.get('/api/domains/:id/integrations/scripts', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const scripts = dataManager.data.integrations?.customScripts || []
  
  return c.json({
    success: true,
    domain: domain.name,
    scripts
  })
})

// Add custom script
app.post('/api/domains/:id/integrations/scripts', requireAuth, async (c) => {
  const id = c.req.param('id')
  const scriptData = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  try {
    // Validate script data
    if (!scriptData.name || !scriptData.event || !scriptData.code) {
      return c.json({ 
        success: false, 
        message: 'Script name, event, and code are required' 
      }, 400)
    }
    
    const script = dataManager.addCustomScript(scriptData)
    await dataManager.save()
    
    return c.json({
      success: true,
      message: 'Custom script başarıyla eklendi',
      script
    })
  } catch (error) {
    console.error('Custom script creation error:', error)
    return c.json({ 
      success: false, 
      message: 'Custom script oluşturulurken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Update custom script
app.put('/api/domains/:id/integrations/scripts/:scriptId', requireAuth, async (c) => {
  const id = c.req.param('id')
  const scriptId = c.req.param('scriptId')
  const updateData = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const scripts = dataManager.data.integrations?.customScripts || []
  const script = scripts.find(s => s.id === scriptId)
  
  if (!script) {
    return c.json({ success: false, message: 'Custom script bulunamadı' }, 404)
  }
  
  try {
    // Update script properties
    Object.keys(updateData).forEach(key => {
      if (key !== 'id' && key !== 'createdAt') {
        script[key] = updateData[key]
      }
    })
    
    script.updatedAt = new Date().toISOString()
    await dataManager.save()
    
    return c.json({
      success: true,
      message: 'Custom script başarıyla güncellendi',
      script
    })
  } catch (error) {
    console.error('Custom script update error:', error)
    return c.json({ 
      success: false, 
      message: 'Custom script güncellenirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Delete custom script
app.delete('/api/domains/:id/integrations/scripts/:scriptId', requireAuth, async (c) => {
  const id = c.req.param('id')
  const scriptId = c.req.param('scriptId')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  if (!dataManager.data.integrations?.customScripts) {
    return c.json({ success: false, message: 'Custom script bulunamadı' }, 404)
  }
  
  const initialLength = dataManager.data.integrations.customScripts.length
  dataManager.data.integrations.customScripts = dataManager.data.integrations.customScripts.filter(s => s.id !== scriptId)
  
  if (dataManager.data.integrations.customScripts.length === initialLength) {
    return c.json({ success: false, message: 'Custom script bulunamadı' }, 404)
  }
  
  await dataManager.save()
  
  return c.json({
    success: true,
    message: 'Custom script başarıyla silindi'
  })
})

// Execute custom script manually
app.post('/api/domains/:id/integrations/scripts/:scriptId/execute', requireAuth, async (c) => {
  const id = c.req.param('id')
  const scriptId = c.req.param('scriptId')
  const { eventData = {} } = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const scripts = dataManager.data.integrations?.customScripts || []
  const script = scripts.find(s => s.id === scriptId)
  
  if (!script) {
    return c.json({ success: false, message: 'Custom script bulunamadı' }, 404)
  }
  
  try {
    const result = await dataManager.executeScript(script, eventData)
    
    return c.json({
      success: true,
      message: 'Custom script başarıyla çalıştırıldı',
      result
    })
  } catch (error) {
    console.error('Custom script execution error:', error)
    return c.json({ 
      success: false, 
      message: 'Custom script çalıştırılırken hata oluştu: ' + error.message 
    }, 500)
  }
})

// API Connections Management API Endpoints

// Get domain API connections
app.get('/api/domains/:id/integrations/apis', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const connections = dataManager.data.integrations?.apiConnections || []
  
  // Hide API keys in response
  const safeConnections = connections.map(conn => ({
    ...conn,
    apiKey: conn.apiKey ? '***encrypted***' : null
  }))
  
  return c.json({
    success: true,
    domain: domain.name,
    connections: safeConnections
  })
})

// Add API connection
app.post('/api/domains/:id/integrations/apis', requireAuth, async (c) => {
  const id = c.req.param('id')
  const connectionData = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  try {
    // Validate connection data
    if (!connectionData.name || !connectionData.type || !connectionData.baseUrl) {
      return c.json({ 
        success: false, 
        message: 'Connection name, type, and base URL are required' 
      }, 400)
    }
    
    const connection = dataManager.addApiConnection(connectionData)
    await dataManager.save()
    
    // Hide API key in response
    const safeConnection = {
      ...connection,
      apiKey: connection.apiKey ? '***encrypted***' : null
    }
    
    return c.json({
      success: true,
      message: 'API connection başarıyla eklendi',
      connection: safeConnection
    })
  } catch (error) {
    console.error('API connection creation error:', error)
    return c.json({ 
      success: false, 
      message: 'API connection oluşturulurken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Update API connection
app.put('/api/domains/:id/integrations/apis/:connectionId', requireAuth, async (c) => {
  const id = c.req.param('id')
  const connectionId = c.req.param('connectionId')
  const updateData = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const connections = dataManager.data.integrations?.apiConnections || []
  const connection = connections.find(c => c.id === connectionId)
  
  if (!connection) {
    return c.json({ success: false, message: 'API connection bulunamadı' }, 404)
  }
  
  try {
    // Update connection properties
    Object.keys(updateData).forEach(key => {
      if (key !== 'id' && key !== 'createdAt') {
        connection[key] = updateData[key]
      }
    })
    
    connection.updatedAt = new Date().toISOString()
    await dataManager.save()
    
    // Hide API key in response
    const safeConnection = {
      ...connection,
      apiKey: connection.apiKey ? '***encrypted***' : null
    }
    
    return c.json({
      success: true,
      message: 'API connection başarıyla güncellendi',
      connection: safeConnection
    })
  } catch (error) {
    console.error('API connection update error:', error)
    return c.json({ 
      success: false, 
      message: 'API connection güncellenirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Delete API connection
app.delete('/api/domains/:id/integrations/apis/:connectionId', requireAuth, async (c) => {
  const id = c.req.param('id')
  const connectionId = c.req.param('connectionId')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  if (!dataManager.data.integrations?.apiConnections) {
    return c.json({ success: false, message: 'API connection bulunamadı' }, 404)
  }
  
  const initialLength = dataManager.data.integrations.apiConnections.length
  dataManager.data.integrations.apiConnections = dataManager.data.integrations.apiConnections.filter(c => c.id !== connectionId)
  
  if (dataManager.data.integrations.apiConnections.length === initialLength) {
    return c.json({ success: false, message: 'API connection bulunamadı' }, 404)
  }
  
  await dataManager.save()
  
  return c.json({
    success: true,
    message: 'API connection başarıyla silindi'
  })
})

// Test API connection
app.post('/api/domains/:id/integrations/apis/:connectionId/test', requireAuth, async (c) => {
  const id = c.req.param('id')
  const connectionId = c.req.param('connectionId')
  const { endpoint = '/', method = 'GET', data = null } = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  try {
    const result = await dataManager.callApi(connectionId, endpoint, method, data)
    
    return c.json({
      success: true,
      message: 'API connection testi başarılı',
      result
    })
  } catch (error) {
    console.error('API connection test error:', error)
    return c.json({ 
      success: false, 
      message: 'API connection test edilirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// Event System API Endpoint

// Trigger manual event for testing integrations
app.post('/api/domains/:id/integrations/trigger-event', requireAuth, async (c) => {
  const id = c.req.param('id')
  const { eventType, eventData = {} } = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  if (!eventType) {
    return c.json({ success: false, message: 'Event type gereklidir' }, 400)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  try {
    const results = await dataManager.triggerEvent(eventType, {
      ...eventData,
      triggeredBy: 'manual',
      timestamp: new Date().toISOString()
    })
    
    return c.json({
      success: true,
      message: 'Event başarıyla tetiklendi',
      results
    })
  } catch (error) {
    console.error('Event trigger error:', error)
    return c.json({ 
      success: false, 
      message: 'Event tetiklenirken hata oluştu: ' + error.message 
    }, 500)
  }
})

// ====================================================================
// IP MANAGEMENT & VISITOR ANALYTICS API ENDPOINTS (PHASE 1)
// ====================================================================

// Get domain IP rules
app.get('/api/domains/:id/ip-rules', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  return c.json({
    success: true,
    domain: domain.name,
    ipRules: dataManager.data.ipRules,
    stats: {
      whitelistCount: dataManager.data.ipRules.whitelist.length,
      blacklistCount: dataManager.data.ipRules.blacklist.length,
      graylistCount: dataManager.data.ipRules.graylist.length,
      rangeCount: {
        whitelist: dataManager.data.ipRules.ranges.whitelist.length,
        blacklist: dataManager.data.ipRules.ranges.blacklist.length,
        graylist: dataManager.data.ipRules.ranges.graylist.length
      }
    }
  })
})

// Add IP rule to domain
app.post('/api/domains/:id/ip-rules', requireAuth, async (c) => {
  const id = c.req.param('id')
  const { ip, range, type, reason } = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  // Validate input
  if (!type || !['whitelist', 'blacklist', 'graylist'].includes(type)) {
    return c.json({ success: false, message: 'Geçersiz liste tipi' }, 400)
  }
  
  if (!ip && !range) {
    return c.json({ success: false, message: 'IP adresi veya CIDR range gerekli' }, 400)
  }
  
  const timestamp = new Date().toISOString()
  
  if (ip) {
    // Validate IP address
    if (!isValidIP(ip)) {
      return c.json({ success: false, message: 'Geçersiz IP adresi' }, 400)
    }
    
    // Check if IP already exists in any list
    const existsIn = checkIPExistsInLists(dataManager.data.ipRules, ip)
    if (existsIn) {
      return c.json({ 
        success: false, 
        message: `IP adresi zaten ${existsIn} listesinde mevcut` 
      }, 400)
    }
    
    // Add IP to specified list
    dataManager.data.ipRules[type].push({
      ip,
      reason: reason || 'Manuel ekleme',
      addedAt: timestamp,
      addedBy: 'admin'
    })
  }
  
  if (range) {
    // Validate CIDR range
    if (!isValidCIDR(range)) {
      return c.json({ success: false, message: 'Geçersiz CIDR range' }, 400)
    }
    
    // Add CIDR range to specified list
    dataManager.data.ipRules.ranges[type].push({
      range,
      reason: reason || 'Manuel ekleme',
      addedAt: timestamp,
      addedBy: 'admin'
    })
  }
  
  return c.json({
    success: true,
    message: `IP kuralı ${type} listesine başarıyla eklendi`,
    ipRules: dataManager.data.ipRules
  })
})

// Remove IP rule from domain
app.delete('/api/domains/:id/ip-rules/:ipAddress', requireAuth, async (c) => {
  const id = c.req.param('id')
  const ipAddress = c.req.param('ipAddress')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  let removed = false
  
  // Remove from all lists
  ['whitelist', 'blacklist', 'graylist'].forEach(type => {
    // Remove from IP lists
    const initialLength = dataManager.data.ipRules[type].length
    dataManager.data.ipRules[type] = dataManager.data.ipRules[type].filter(
      entry => entry.ip !== ipAddress && entry.range !== ipAddress
    )
    if (dataManager.data.ipRules[type].length < initialLength) {
      removed = true
    }
    
    // Remove from range lists
    const initialRangeLength = dataManager.data.ipRules.ranges[type].length
    dataManager.data.ipRules.ranges[type] = dataManager.data.ipRules.ranges[type].filter(
      entry => entry.range !== ipAddress
    )
    if (dataManager.data.ipRules.ranges[type].length < initialRangeLength) {
      removed = true
    }
  })
  
  if (!removed) {
    return c.json({ success: false, message: 'IP adresi bulunamadı' }, 404)
  }
  
  return c.json({
    success: true,
    message: 'IP kuralı başarıyla silindi',
    ipRules: dataManager.data.ipRules
  })
})

// Bulk IP operations
app.post('/api/domains/:id/ip-rules/bulk', requireAuth, async (c) => {
  const id = c.req.param('id')
  const { operation, type, ips, ranges } = await c.req.json()
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  
  if (!['add', 'remove'].includes(operation)) {
    return c.json({ success: false, message: 'Geçersiz operasyon' }, 400)
  }
  
  if (!['whitelist', 'blacklist', 'graylist'].includes(type)) {
    return c.json({ success: false, message: 'Geçersiz liste tipi' }, 400)
  }
  
  const timestamp = new Date().toISOString()
  let addedCount = 0
  let removedCount = 0
  const errors = []
  
  if (operation === 'add') {
    // Bulk add IPs
    if (ips && Array.isArray(ips)) {
      ips.forEach(ip => {
        if (isValidIP(ip) && !checkIPExistsInLists(dataManager.data.ipRules, ip)) {
          dataManager.data.ipRules[type].push({
            ip,
            reason: 'Toplu ekleme',
            addedAt: timestamp,
            addedBy: 'admin'
          })
          addedCount++
        } else {
          errors.push(`Geçersiz veya zaten mevcut IP: ${ip}`)
        }
      })
    }
    
    // Bulk add ranges
    if (ranges && Array.isArray(ranges)) {
      ranges.forEach(range => {
        if (isValidCIDR(range)) {
          dataManager.data.ipRules.ranges[type].push({
            range,
            reason: 'Toplu ekleme',
            addedAt: timestamp,
            addedBy: 'admin'
          })
          addedCount++
        } else {
          errors.push(`Geçersiz CIDR range: ${range}`)
        }
      })
    }
  } else if (operation === 'remove') {
    // Bulk remove IPs
    if (ips && Array.isArray(ips)) {
      ips.forEach(ip => {
        const initialLength = dataManager.data.ipRules[type].length
        dataManager.data.ipRules[type] = dataManager.data.ipRules[type].filter(
          entry => entry.ip !== ip
        )
        if (dataManager.data.ipRules[type].length < initialLength) {
          removedCount++
        }
      })
    }
    
    // Bulk remove ranges
    if (ranges && Array.isArray(ranges)) {
      ranges.forEach(range => {
        const initialLength = dataManager.data.ipRules.ranges[type].length
        dataManager.data.ipRules.ranges[type] = dataManager.data.ipRules.ranges[type].filter(
          entry => entry.range !== range
        )
        if (dataManager.data.ipRules.ranges[type].length < initialLength) {
          removedCount++
        }
      })
    }
  }
  
  return c.json({
    success: true,
    message: `Toplu işlem tamamlandı. Eklenen: ${addedCount}, Silinen: ${removedCount}`,
    stats: { addedCount, removedCount, errorCount: errors.length },
    errors: errors.slice(0, 10), // Show first 10 errors
    ipRules: dataManager.data.ipRules
  })
})

// Check IP status against domain rules
app.get('/api/domains/:id/ip-check/:ipAddress', requireAuth, async (c) => {
  const id = c.req.param('id')
  const ipAddress = c.req.param('ipAddress')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  if (!isValidIP(ipAddress)) {
    return c.json({ success: false, message: 'Geçersiz IP adresi' }, 400)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const status = checkIPStatus(dataManager.data.ipRules, ipAddress)
  
  return c.json({
    success: true,
    ip: ipAddress,
    status: status.type,
    inList: status.found,
    reason: status.reason,
    addedAt: status.addedAt,
    riskScore: calculateIPRiskScore(ipAddress, status),
    recommendations: generateIPRecommendations(status, ipAddress)
  })
})

// Get domain visitor analytics
app.get('/api/domains/:id/analytics', requireAuth, async (c) => {
  const id = c.req.param('id')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const analytics = dataManager.getAnalytics()
  
  return c.json({
    success: true,
    domain: domain.name,
    analytics: {
      ...analytics,
      ipRules: {
        whitelistCount: dataManager.data.ipRules.whitelist.length,
        blacklistCount: dataManager.data.ipRules.blacklist.length,
        graylistCount: dataManager.data.ipRules.graylist.length,
        totalRules: dataManager.data.ipRules.whitelist.length + 
                    dataManager.data.ipRules.blacklist.length + 
                    dataManager.data.ipRules.graylist.length
      },
      recentActivity: analytics.recentVisitors.slice(0, 20),
      hourlyBreakdown: generateHourlyBreakdown(dataManager.data.analytics.hourlyStats),
      countryBreakdown: generateCountryBreakdown(dataManager.data.analytics.countries)
    }
  })
})

// Get detailed domain analytics with filtering
app.get('/api/domains/:id/analytics/detailed', requireAuth, async (c) => {
  const id = c.req.param('id')
  const timeRange = c.req.query('timeRange') || '24h'
  const country = c.req.query('country')
  const referrer = c.req.query('referrer')
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const now = Date.now()
  let timeFilter = now - (24 * 60 * 60 * 1000) // 24 hours default
  
  // Parse time range
  if (timeRange.endsWith('h')) {
    timeFilter = now - (parseInt(timeRange) * 60 * 60 * 1000)
  } else if (timeRange.endsWith('d')) {
    timeFilter = now - (parseInt(timeRange) * 24 * 60 * 60 * 1000)
  }
  
  // Filter visitors
  let filteredVisitors = dataManager.data.analytics.recentVisitors.filter(visitor => {
    if (visitor.timestamp < timeFilter) return false
    if (country && visitor.country !== country) return false
    if (referrer && !visitor.referer?.includes(referrer)) return false
    return true
  })
  
  // Generate filtered analytics
  const filteredAnalytics = {
    totalRequests: filteredVisitors.length,
    humanRequests: filteredVisitors.filter(v => !v.isBot).length,
    botRequests: filteredVisitors.filter(v => v.isBot).length,
    uniqueCountries: [...new Set(filteredVisitors.map(v => v.country))].length,
    topReferrers: generateTopReferrers(filteredVisitors),
    hourlyDistribution: generateHourlyDistribution(filteredVisitors),
    visitors: filteredVisitors.slice(0, 100)
  }
  
  return c.json({
    success: true,
    domain: domain.name,
    timeRange,
    filters: { country, referrer },
    analytics: filteredAnalytics
  })
})

// Get live visitor feed
app.get('/api/domains/:id/visitors/live', requireAuth, async (c) => {
  const id = c.req.param('id')
  const lastTimestamp = c.req.query('since') || '0'
  
  const domain = domains.get(id)
  if (!domain) {
    return c.json({ success: false, message: 'Domain bulunamadı' }, 404)
  }
  
  const dataManager = getDomainDataManager(domain.name)
  const since = parseInt(lastTimestamp)
  
  // Get visitors since timestamp
  const recentVisitors = dataManager.data.analytics.recentVisitors
    .filter(visitor => visitor.timestamp > since)
    .slice(0, 50) // Limit to 50 most recent
  
  return c.json({
    success: true,
    domain: domain.name,
    since: lastTimestamp,
    visitors: recentVisitors,
    count: recentVisitors.length,
    lastTimestamp: recentVisitors.length > 0 ? recentVisitors[0].timestamp : since
  })
})

// Enhanced traffic logging
app.post('/api/traffic/log', async (c) => {
  try {
    const { 
      domain, 
      ip, 
      userAgent, 
      referrer, 
      country, 
      path,
      method = 'GET',
      responseTime,
      action = 'viewed',
      customData = {}
    } = await c.req.json()
    
    if (!domain || !ip) {
      return c.json({ success: false, message: 'Domain and IP required' }, 400)
    }
    
    const dataManager = getDomainDataManager(domain)
    
    // Enhanced bot detection
    const botAnalysis = dataManager.detectBot(userAgent, ip, customData)
    
    // Check IP rules
    const ipStatus = checkIPStatus(dataManager.data.ipRules, ip)
    
    // Log visitor with enhanced data
    const visitorData = {
      ip,
      userAgent: userAgent || 'Unknown',
      referrer: referrer || 'Direct',
      country: country || 'Unknown',
      path: path || '/',
      method,
      timestamp: Date.now(),
      isBot: botAnalysis.isBot,
      botType: botAnalysis.type,
      confidence: botAnalysis.confidence,
      ipStatus: ipStatus.type,
      action,
      responseTime: responseTime || 0,
      customData
    }
    
    // Track in global IP pool
    trackIPCall(c, '/api/analytics/visitor')
    
    // Log the visitor
    dataManager.logVisitor(
      visitorData.ip,
      visitorData.userAgent,
      visitorData.referrer,
      visitorData.timestamp,
      visitorData.isBot,
      visitorData.country,
      visitorData.action
    )
    
    // Determine routing decision
    let routingDecision = 'clean'
    
    if (ipStatus.type === 'blacklisted') {
      routingDecision = 'blocked'
    } else if (ipStatus.type === 'whitelisted') {
      routingDecision = 'clean'
    } else if (botAnalysis.isBot && botAnalysis.confidence > 80) {
      routingDecision = botAnalysis.type === 'search_engine' ? 'googleads' : 'decoy'
    } else if (botAnalysis.confidence > 50) {
      routingDecision = 'gray'
    }
    
    return c.json({
      success: true,
      decision: routingDecision,
      visitor: visitorData,
      botAnalysis,
      ipStatus,
      domain
    })
    
  } catch (error) {
    console.error('Traffic logging error:', error)
    return c.json({ 
      success: false, 
      message: 'Trafik kaydı sırasında hata oluştu' 
    }, 500)
  }
})

// Helper Functions for IP Management

function isValidIP(ip) {
  const ipv4Regex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/
  const ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/
  return ipv4Regex.test(ip) || ipv6Regex.test(ip)
}

function isValidCIDR(cidr) {
  const cidrRegex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/([0-9]|[1-2][0-9]|3[0-2])$/
  return cidrRegex.test(cidr)
}

function checkIPExistsInLists(ipRules, ip) {
  // Check in whitelist
  if (ipRules.whitelist.some(entry => entry.ip === ip)) return 'whitelist'
  if (ipRules.blacklist.some(entry => entry.ip === ip)) return 'blacklist'
  if (ipRules.graylist.some(entry => entry.ip === ip)) return 'graylist'
  return null
}

function checkIPStatus(ipRules, ip) {
  // Check whitelist first
  const whitelisted = ipRules.whitelist.find(entry => entry.ip === ip)
  if (whitelisted) {
    return {
      type: 'whitelisted',
      found: true,
      reason: whitelisted.reason,
      addedAt: whitelisted.addedAt
    }
  }
  
  // Check blacklist
  const blacklisted = ipRules.blacklist.find(entry => entry.ip === ip)
  if (blacklisted) {
    return {
      type: 'blacklisted',
      found: true,
      reason: blacklisted.reason,
      addedAt: blacklisted.addedAt
    }
  }
  
  // Check graylist
  const graylisted = ipRules.graylist.find(entry => entry.ip === ip)
  if (graylisted) {
    return {
      type: 'graylisted',
      found: true,
      reason: graylisted.reason,
      addedAt: graylisted.addedAt
    }
  }
  
  // Check CIDR ranges
  // TODO: Implement CIDR matching logic
  
  return {
    type: 'neutral',
    found: false,
    reason: null,
    addedAt: null
  }
}

function calculateIPRiskScore(ip, status) {
  let score = 50 // Base score
  
  if (status.type === 'blacklisted') score = 100
  else if (status.type === 'whitelisted') score = 0
  else if (status.type === 'graylisted') score = 75
  
  // Additional risk factors can be added here
  // e.g., GeoIP, known bot networks, etc.
  
  return Math.min(100, Math.max(0, score))
}

function generateIPRecommendations(status, ip) {
  const recommendations = []
  
  if (status.type === 'neutral') {
    recommendations.push('IP adresi henüz herhangi bir listede değil')
    recommendations.push('Şüpheli aktivite görürseniz graylist\'e ekleyebilirsiniz')
  } else if (status.type === 'graylisted') {
    recommendations.push('Bu IP şüpheli aktivite listesinde')
    recommendations.push('Davranışını izleyin ve gerekirse blacklist\'e taşıyın')
  } else if (status.type === 'blacklisted') {
    recommendations.push('Bu IP engellenen listede - tüm istekleri reddediliyor')
  } else if (status.type === 'whitelisted') {
    recommendations.push('Bu IP güvenilir listede - her zaman izin veriliyor')
  }
  
  return recommendations
}

function generateHourlyBreakdown(hourlyStats) {
  const breakdown = {}
  const now = new Date()
  
  for (let i = 23; i >= 0; i--) {
    const hour = new Date(now.getTime() - i * 60 * 60 * 1000)
    const hourKey = `${hour.getFullYear()}-${String(hour.getMonth() + 1).padStart(2, '0')}-${String(hour.getDate()).padStart(2, '0')}-${String(hour.getHours()).padStart(2, '0')}`
    
    breakdown[hourKey] = hourlyStats[hourKey] || { requests: 0, humans: 0, bots: 0 }
  }
  
  return breakdown
}

function generateCountryBreakdown(countries) {
  return Object.entries(countries)
    .sort(([,a], [,b]) => (b.requests || 0) - (a.requests || 0))
    .slice(0, 20) // Top 20 countries
    .reduce((obj, [country, data]) => {
      obj[country] = data
      return obj
    }, {})
}

function generateTopReferrers(visitors) {
  const referrers = {}
  visitors.forEach(visitor => {
    const ref = visitor.referer || 'Direct'
    referrers[ref] = (referrers[ref] || 0) + 1
  })
  
  return Object.entries(referrers)
    .sort(([,a], [,b]) => b - a)
    .slice(0, 10)
    .map(([referrer, count]) => ({ referrer, count }))
}

function generateHourlyDistribution(visitors) {
  const distribution = {}
  
  visitors.forEach(visitor => {
    const hour = new Date(visitor.timestamp).getHours()
    distribution[hour] = (distribution[hour] || 0) + 1
  })
  
  return distribution
}

// Dashboard with navigation
app.get('/dashboard', (c) => {
  return c.html(`
    <!DOCTYPE html>
    <html lang="tr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Traffic Management - Dashboard</title>
        <script>
          // Suppress Tailwind production warning and console errors
          window.process = { env: { NODE_ENV: 'development' } };
          
          // Suppress console warnings in production
          if (window.location.hostname !== 'localhost') {
            const originalWarn = console.warn;
            console.warn = function(...args) {
              if (args[0] && args[0].includes && args[0].includes('cdn.tailwindcss.com')) {
                return; // Suppress Tailwind CDN warning
              }
              originalWarn.apply(console, args);
            };
          }
        </script>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gray-900 text-white min-h-screen">
        <!-- Top Navigation -->
        <nav class="bg-gray-800 border-b border-gray-700">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <h1 class="text-xl font-bold">
                            <i class="fas fa-shield-alt mr-2 text-blue-400"></i>
                            Traffic Management
                        </h1>
                    </div>
                    
                    <div class="flex space-x-4">
                        <button onclick="showSection('domains')" id="btn-domains" 
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-globe mr-2"></i>Domainler
                        </button>
                        <button onclick="showSection('traffic')" id="btn-traffic"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-chart-line mr-2"></i>Trafik
                        </button>
                        <button onclick="showSection('dns')" id="btn-dns"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-network-wired mr-2"></i>DNS
                        </button>
                        <button onclick="showSection('nginx')" id="btn-nginx"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-server mr-2"></i>NGINX
                        </button>
                        <button onclick="showSection('security')" id="btn-security"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-lock mr-2"></i>Güvenlik
                        </button>
                        <button onclick="showSection('deploy')" id="btn-deploy"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-rocket mr-2"></i>Deploy
                        </button>
                        <button onclick="showSection('settings')" id="btn-settings"
                                class="nav-btn px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-cog mr-2"></i>Ayarlar
                        </button>
                        <button onclick="logout()" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors">
                            <i class="fas fa-sign-out-alt mr-2"></i>Çıkış
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <!-- Domain Management Section -->
            <div id="section-domains" class="section">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-globe mr-2 text-blue-400"></i>
                            Domain Yönetimi
                        </h2>
                        <div class="flex space-x-3">
                            <button onclick="showIPPoolDashboard()" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-globe-americas mr-2"></i>Global IP Pool
                            </button>
                            <button onclick="showAddDomain()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-plus mr-2"></i>Yeni Domain
                            </button>
                        </div>
                    </div>
                    
                    <div id="domainList" class="space-y-4">
                        <!-- Domains will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Traffic Analysis Section -->
            <div id="section-traffic" class="section hidden">
                <!-- Header Section -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-chart-line mr-2 text-green-400"></i>
                            Advanced Traffic Analytics & Visitor Intelligence
                        </h2>
                        <div class="flex space-x-3">
                            <select id="traffic-time-range" class="bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="1h">Son 1 Saat</option>
                                <option value="24h" selected>Son 24 Saat</option>
                                <option value="7d">Son 7 Gün</option>
                                <option value="30d">Son 30 Gün</option>
                            </select>
                            <button onclick="exportTrafficData()" 
                                    class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                            <button onclick="loadTrafficData()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Real-time Statistics Dashboard -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm">Total Requests</p>
                                    <p class="text-3xl font-bold" id="traffic-total-requests">0</p>
                                    <p class="text-blue-200 text-xs">
                                        <span id="traffic-requests-trend">+0%</span> vs yesterday
                                    </p>
                                </div>
                                <div class="bg-blue-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-chart-bar text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-green-500 to-green-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm">Unique Visitors</p>
                                    <p class="text-3xl font-bold" id="traffic-unique-visitors">0</p>
                                    <p class="text-green-200 text-xs">
                                        <span id="traffic-visitors-trend">+0%</span> vs yesterday
                                    </p>
                                </div>
                                <div class="bg-green-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-users text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100 text-sm">Bot Traffic</p>
                                    <p class="text-3xl font-bold" id="traffic-bot-requests">0</p>
                                    <p class="text-purple-200 text-xs">
                                        <span id="traffic-bot-percentage">0%</span> of total
                                    </p>
                                </div>
                                <div class="bg-purple-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-robot text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-red-500 to-red-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-red-100 text-sm">Blocked Requests</p>
                                    <p class="text-3xl font-bold" id="traffic-blocked-requests">0</p>
                                    <p class="text-red-200 text-xs">
                                        <span id="traffic-block-rate">0%</span> block rate
                                    </p>
                                </div>
                                <div class="bg-red-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-shield-alt text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Analytics Tabs -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex border-b border-gray-700 mb-6">
                        <button onclick="showTrafficTab('overview')" id="traffic-tab-overview" 
                                class="traffic-tab-btn px-4 py-2 font-medium rounded-t-lg border-b-2 border-green-400 bg-gray-700 text-green-400">
                            <i class="fas fa-tachometer-alt mr-2"></i>Overview
                        </button>
                        <button onclick="showTrafficTab('realtime')" id="traffic-tab-realtime" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-broadcast-tower mr-2"></i>Real-time
                        </button>
                        <button onclick="showTrafficTab('geographic')" id="traffic-tab-geographic" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-globe-americas mr-2"></i>Geographic
                        </button>
                        <button onclick="showTrafficTab('devices')" id="traffic-tab-devices" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-mobile-alt mr-2"></i>Devices
                        </button>
                        <button onclick="showTrafficTab('sources')" id="traffic-tab-sources" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-external-link-alt mr-2"></i>Sources
                        </button>
                        <button onclick="showTrafficTab('behavior')" id="traffic-tab-behavior" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-user-check mr-2"></i>Behavior
                        </button>
                        <button onclick="showTrafficTab('security')" id="traffic-tab-security" 
                                class="traffic-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-shield-alt mr-2"></i>Security
                        </button>
                    </div>

                    <!-- Overview Tab -->
                    <div id="traffic-tab-content-overview" class="traffic-tab-content">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Traffic Trends Chart -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-chart-line mr-2 text-green-400"></i>
                                    Traffic Trends
                                </h3>
                                <div id="traffic-trends-chart" class="h-64 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-chart-line text-4xl mb-2"></i>
                                        <p>Traffic trend chart will appear here</p>
                                        <p class="text-sm">Real-time data visualization</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Top Pages -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-file-alt mr-2 text-blue-400"></i>
                                    Top Pages
                                </h3>
                                <div id="traffic-top-pages" class="space-y-3 max-h-64 overflow-y-auto">
                                    <!-- Dynamic content -->
                                </div>
                            </div>

                            <!-- Bot Analysis -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-robot mr-2 text-purple-400"></i>
                                    Bot Traffic Analysis
                                </h3>
                                <div id="traffic-bot-analysis" class="space-y-3">
                                    <!-- Dynamic content -->
                                </div>
                            </div>

                            <!-- Performance Metrics -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-stopwatch mr-2 text-yellow-400"></i>
                                    Performance Metrics
                                </h3>
                                <div id="traffic-performance-metrics" class="space-y-3">
                                    <!-- Dynamic content -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Real-time Tab -->
                    <div id="traffic-tab-content-realtime" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                            <!-- Live Visitors -->
                            <div class="xl:col-span-2 bg-gray-700 p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold flex items-center">
                                        <i class="fas fa-eye mr-2 text-green-400"></i>
                                        Live Visitors
                                    </h3>
                                    <div class="flex items-center text-green-400">
                                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"></div>
                                        <span id="live-visitor-count">0</span> online
                                    </div>
                                </div>
                                <div id="live-visitors-list" class="space-y-2 max-h-96 overflow-y-auto">
                                    <!-- Dynamic real-time visitor entries -->
                                </div>
                            </div>

                            <!-- Real-time Stats -->
                            <div class="space-y-4">
                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 flex items-center">
                                        <i class="fas fa-clock mr-2 text-blue-400"></i>
                                        Real-time Stats
                                    </h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span>Active Sessions:</span>
                                            <span id="realtime-active-sessions" class="text-green-400 font-bold">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Requests/min:</span>
                                            <span id="realtime-requests-per-min" class="text-blue-400 font-bold">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Avg. Response Time:</span>
                                            <span id="realtime-avg-response" class="text-yellow-400 font-bold">0ms</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Bot Detection:</span>
                                            <span id="realtime-bot-rate" class="text-purple-400 font-bold">0%</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 flex items-center">
                                        <i class="fas fa-chart-pie mr-2 text-indigo-400"></i>
                                        Traffic Sources
                                    </h4>
                                    <div id="realtime-traffic-sources" class="space-y-2">
                                        <!-- Dynamic source breakdown -->
                                    </div>
                                </div>

                                <div class="bg-gray-700 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-2 text-red-400"></i>
                                        Security Alerts
                                    </h4>
                                    <div id="realtime-security-alerts" class="space-y-2 max-h-32 overflow-y-auto">
                                        <!-- Dynamic security alerts -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Geographic Tab -->
                    <div id="traffic-tab-content-geographic" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- World Map Visualization -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-globe mr-2 text-blue-400"></i>
                                    Global Traffic Distribution
                                </h3>
                                <div id="geographic-world-map" class="h-80 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-globe text-6xl mb-4"></i>
                                        <p>Interactive world map</p>
                                        <p class="text-sm">Showing visitor distribution by country</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Country Statistics -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-flag mr-2 text-green-400"></i>
                                    Top Countries
                                </h3>
                                <div id="geographic-country-stats" class="space-y-3 max-h-80 overflow-y-auto">
                                    <!-- Dynamic country statistics -->
                                </div>
                            </div>

                            <!-- City Analysis -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-city mr-2 text-purple-400"></i>
                                    Top Cities
                                </h3>
                                <div id="geographic-city-stats" class="space-y-3 max-h-80 overflow-y-auto">
                                    <!-- Dynamic city statistics -->
                                </div>
                            </div>

                            <!-- Regional Performance -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-tachometer-alt mr-2 text-yellow-400"></i>
                                    Regional Performance
                                </h3>
                                <div id="geographic-performance-stats" class="space-y-3">
                                    <!-- Dynamic regional performance -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Other tabs content will be continued... -->
                    <div id="traffic-tab-content-devices" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Device Types</h3>
                                <div id="device-types-chart" class="h-48 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-mobile-alt text-4xl mb-2"></i>
                                        <p>Device breakdown chart</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Operating Systems</h3>
                                <div id="os-stats" class="space-y-2">
                                    <!-- Dynamic OS stats -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Browsers</h3>
                                <div id="browser-stats" class="space-y-2">
                                    <!-- Dynamic browser stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="traffic-tab-content-sources" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Referrer Sources</h3>
                                <div id="referrer-stats" class="space-y-2">
                                    <!-- Dynamic referrer stats -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Search Engines</h3>
                                <div id="search-engine-stats" class="space-y-2">
                                    <!-- Dynamic search engine stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="traffic-tab-content-behavior" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">User Flow</h3>
                                <div id="user-flow-chart" class="h-64 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-route text-4xl mb-2"></i>
                                        <p>User journey visualization</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Session Duration</h3>
                                <div id="session-duration-stats" class="space-y-2">
                                    <!-- Dynamic session stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="traffic-tab-content-security" class="traffic-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Threat Analysis</h3>
                                <div id="threat-analysis" class="space-y-2">
                                    <!-- Dynamic threat analysis -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Attack Patterns</h3>
                                <div id="attack-patterns" class="space-y-2">
                                    <!-- Dynamic attack patterns -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Filters and Controls -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-filter mr-2 text-blue-400"></i>
                            Advanced Filtering & Segmentation
                        </h3>
                        <button onclick="resetTrafficFilters()" class="text-sm text-gray-400 hover:text-white">
                            <i class="fas fa-undo mr-1"></i>Reset Filters
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Domain Filter</label>
                            <select id="traffic-filter-domain" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Domains</option>
                                <!-- Dynamic domain options -->
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Traffic Type</label>
                            <select id="traffic-filter-type" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Traffic</option>
                                <option value="human">Human Only</option>
                                <option value="bot">Bot Only</option>
                                <option value="verified_bot">Verified Bots</option>
                                <option value="suspicious">Suspicious</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Geographic Region</label>
                            <select id="traffic-filter-region" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Regions</option>
                                <option value="NA">North America</option>
                                <option value="EU">Europe</option>
                                <option value="AS">Asia</option>
                                <option value="SA">South America</option>
                                <option value="AF">Africa</option>
                                <option value="OC">Oceania</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Device Category</label>
                            <select id="traffic-filter-device" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                                <option value="">All Devices</option>
                                <option value="desktop">Desktop</option>
                                <option value="mobile">Mobile</option>
                                <option value="tablet">Tablet</option>
                                <option value="bot">Bot/Crawler</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NGINX Multi-Domain Configuration Section -->
            <div id="section-nginx" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-server mr-2 text-purple-400"></i>
                            NGINX Multi-Domain Konfigürasyonu
                        </h2>
                        <div class="flex space-x-3">
                            <button onclick="createTestDomainForNginx()" 
                                    class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-flask mr-2"></i>Test Domain Oluştur
                            </button>
                            <button onclick="refreshDomainConfigs()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>Yenile
                            </button>
                            <button onclick="generateAdvancedNginxConfig()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-magic mr-2"></i>Config Oluştur
                            </button>
                        </div>
                    </div>

                    <!-- Overview Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Toplam Domain</p>
                                    <p class="text-2xl font-bold text-purple-400" id="nginx-total-domains">0</p>
                                </div>
                                <div class="bg-purple-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-globe text-purple-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Aktif Config</p>
                                    <p class="text-2xl font-bold text-green-400" id="nginx-active-configs">0</p>
                                </div>
                                <div class="bg-green-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-check-circle text-green-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Backend Servers</p>
                                    <p class="text-2xl font-bold text-blue-400" id="nginx-backend-count">0</p>
                                </div>
                                <div class="bg-blue-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-server text-blue-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Config Size</p>
                                    <p class="text-2xl font-bold text-orange-400" id="nginx-config-size">0 KB</p>
                                </div>
                                <div class="bg-orange-500 bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-file-code text-orange-400"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Domain Configuration Management -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold flex items-center">
                                <i class="fas fa-cog mr-2 text-yellow-400"></i>
                                Domain Backend Konfigürasyonları
                            </h3>
                            <button onclick="addNewDomainConfig()" 
                                    class="bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded text-sm">
                                <i class="fas fa-plus mr-1"></i>Yeni Config
                            </button>
                        </div>
                        
                        <div id="domain-configs-container" class="space-y-4">
                            <!-- Domain configurations will be loaded here -->
                            <div class="text-center py-8 text-gray-400">
                                <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                                <p>Domain konfigürasyonları yükleniyor...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Global Settings -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-globe mr-2 text-cyan-400"></i>
                                Global Settings
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Rate Limiting (req/sec)</label>
                                    <input type="number" id="global-rate-limit" 
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded"
                                           value="10" min="1" max="100">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Bot Rate Limit (req/sec)</label>
                                    <input type="number" id="bot-rate-limit" 
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded"
                                           value="1" min="1" max="10">
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-geoip" class="rounded">
                                    <label for="enable-geoip" class="text-sm">Enable GeoIP Detection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-analytics" class="rounded" checked>
                                    <label for="enable-analytics" class="text-sm">Enable Traffic Analytics</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-shield-alt mr-2 text-red-400"></i>
                                Security Settings
                            </h3>
                            <div class="space-y-3">
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-bot-protection" class="rounded" checked>
                                    <label for="enable-bot-protection" class="text-sm">Advanced Bot Protection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-ddos-protection" class="rounded" checked>
                                    <label for="enable-ddos-protection" class="text-sm">DDoS Protection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="enable-referrer-check" class="rounded" checked>
                                    <label for="enable-referrer-check" class="text-sm">Facebook Referrer Detection</label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="block-suspicious" class="rounded">
                                    <label for="block-suspicious" class="text-sm">Block Suspicious Traffic</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Config Preview and Actions -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold flex items-center">
                                <i class="fas fa-eye mr-2 text-cyan-400"></i>
                                Generated NGINX Configuration
                            </h3>
                            <div class="flex space-x-2">
                                <button onclick="copyConfigToClipboard()" 
                                        class="bg-gray-600 hover:bg-gray-500 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-copy mr-1"></i>Copy
                                </button>
                                <button onclick="downloadAdvancedConfig()" 
                                        class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-download mr-1"></i>Download
                                </button>
                            </div>
                        </div>
                        <div class="bg-black p-4 rounded border font-mono text-xs overflow-auto max-h-96">
                            <pre id="advanced-nginx-config-preview" class="text-green-400 whitespace-pre-wrap">
# NGINX Configuration
# "Config Oluştur" butonuna tıklayın
                            </pre>
                        </div>
                    </div>
                    
                    <!-- Deploy Actions -->
                    <div class="flex flex-wrap gap-4">
                        <button onclick="generateAdvancedNginxConfig()" 
                                class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-magic mr-2"></i>Config Oluştur
                        </button>
                        <button onclick="validateNginxConfig()" 
                                class="bg-yellow-600 hover:bg-yellow-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-check-circle mr-2"></i>Config Doğrula
                        </button>
                        <button onclick="deployNginxConfig()" 
                                class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-rocket mr-2"></i>Deploy Config
                        </button>
                        <button onclick="testNginxConfig()" 
                                class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-vial mr-2"></i>Test Config
                        </button>
                    </div>
                </div>
            </div>

            <!-- DNS Management Section -->
            <div id="section-dns" class="section hidden">
                <!-- Header Section -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-network-wired mr-2 text-purple-400"></i>
                            Advanced DNS Management
                        </h2>
                        
                        <div class="flex space-x-3">
                            <select id="dns-zone-selector" class="bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                                <option value="">Select Zone</option>
                                <!-- Dynamic zone options -->
                            </select>
                            <button onclick="showDNSWizard()" 
                                    class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-magic mr-2"></i>DNS Wizard
                            </button>
                            <button onclick="showDNSAddModal()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-plus mr-2"></i>Add Record
                            </button>
                            <button onclick="importDNSRecords()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-upload mr-2"></i>Import
                            </button>
                            <button onclick="exportDNSRecords()" 
                                    class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>

                    <!-- Enhanced DNS Statistics Dashboard -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100 text-sm">Total Records</p>
                                    <p class="text-3xl font-bold" id="dns-total-records">0</p>
                                    <p class="text-purple-200 text-xs">
                                        <span id="dns-records-trend">+0</span> this month
                                    </p>
                                </div>
                                <div class="bg-purple-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-list text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-500 to-green-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm">Active Records</p>
                                    <p class="text-3xl font-bold" id="dns-active-records">0</p>
                                    <p class="text-green-200 text-xs">
                                        <span id="dns-health-score">98.5%</span> health score
                                    </p>
                                </div>
                                <div class="bg-green-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-check-circle text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-yellow-100 text-sm">Propagating</p>
                                    <p class="text-3xl font-bold" id="dns-propagating-records">0</p>
                                    <p class="text-yellow-200 text-xs">
                                        <span id="dns-avg-propagation">~15min</span> avg time
                                    </p>
                                </div>
                                <div class="bg-yellow-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-clock text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm">Providers</p>
                                    <p class="text-3xl font-bold" id="dns-providers-count">0</p>
                                    <p class="text-blue-200 text-xs">
                                        <span id="dns-provider-uptime">99.9%</span> uptime
                                    </p>
                                </div>
                                <div class="bg-blue-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-cloud text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-red-500 to-red-600 p-4 rounded-lg text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-red-100 text-sm">Query Rate</p>
                                    <p class="text-3xl font-bold" id="dns-query-rate">0</p>
                                    <p class="text-red-200 text-xs">
                                        queries/sec
                                    </p>
                                </div>
                                <div class="bg-red-400 bg-opacity-30 p-3 rounded-full">
                                    <i class="fas fa-tachometer-alt text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DNS Management Tabs -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <div class="flex border-b border-gray-700 mb-6">
                        <button onclick="showDNSTab('records')" id="dns-tab-records" 
                                class="dns-tab-btn px-4 py-2 font-medium rounded-t-lg border-b-2 border-purple-400 bg-gray-700 text-purple-400">
                            <i class="fas fa-database mr-2"></i>Records
                        </button>
                        <button onclick="showDNSTab('zones')" id="dns-tab-zones" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-sitemap mr-2"></i>Zones
                        </button>
                        <button onclick="showDNSTab('analytics')" id="dns-tab-analytics" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-chart-line mr-2"></i>Analytics
                        </button>
                        <button onclick="showDNSTab('security')" id="dns-tab-security" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-shield-alt mr-2"></i>Security
                        </button>
                        <button onclick="showDNSTab('health')" id="dns-tab-health" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-heartbeat mr-2"></i>Health Checks
                        </button>
                        <button onclick="showDNSTab('geodns')" id="dns-tab-geodns" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-globe mr-2"></i>GeoDNS
                        </button>
                        <button onclick="showDNSTab('proxy')" id="dns-tab-proxy" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-network-wired mr-2"></i>Proxy Management
                        </button>
                        <button onclick="showDNSTab('tools')" id="dns-tab-tools" 
                                class="dns-tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                            <i class="fas fa-tools mr-2"></i>Tools
                        </button>
                    </div>

                    <!-- DNS Records Tab -->
                    <div id="dns-tab-content-records" class="dns-tab-content">
                        <!-- Advanced Filtering System -->
                        <div class="bg-gray-700 p-4 rounded-lg mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold">Smart Filtering & Search</h3>
                                <button onclick="resetDNSFilters()" class="text-sm text-gray-400 hover:text-white">
                                    <i class="fas fa-undo mr-1"></i>Reset
                                </button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Search</label>
                                    <input type="text" id="dns-search-filter" placeholder="Search records..." 
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Record Type</label>
                                    <select id="dns-type-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All Types</option>
                                        <option value="A">A (IPv4)</option>
                                        <option value="AAAA">AAAA (IPv6)</option>
                                        <option value="CNAME">CNAME (Alias)</option>
                                        <option value="MX">MX (Mail)</option>
                                        <option value="TXT">TXT (Text)</option>
                                        <option value="NS">NS (Name Server)</option>
                                        <option value="PTR">PTR (Reverse)</option>
                                        <option value="SRV">SRV (Service)</option>
                                        <option value="CAA">CAA (Certificate)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Status</label>
                                    <select id="dns-status-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All Status</option>
                                        <option value="active">🟢 Active</option>
                                        <option value="pending">🟡 Pending</option>
                                        <option value="error">🔴 Error</option>
                                        <option value="disabled">⚪ Disabled</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Provider</label>
                                    <select id="dns-provider-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All Providers</option>
                                        <option value="CLOUDFLARE">Cloudflare</option>
                                        <option value="ROUTE53">AWS Route53</option>
                                        <option value="GODADDY">GoDaddy</option>
                                        <option value="NAMECHEAP">Namecheap</option>
                                        <option value="GOOGLE">Google DNS</option>
                                        <option value="CUSTOM">Custom</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">TTL Range</label>
                                    <select id="dns-ttl-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="">All TTL</option>
                                        <option value="60">1 min (60s)</option>
                                        <option value="300">5 min (300s)</option>
                                        <option value="1800">30 min (1800s)</option>
                                        <option value="3600">1 hour (3600s)</option>
                                        <option value="86400">1 day (86400s)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- DNS Records Table -->
                        <div class="bg-gray-700 rounded-lg overflow-hidden">
                            <div class="flex justify-between items-center p-4 border-b border-gray-600">
                                <div class="flex items-center space-x-4">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="select-all-dns" class="rounded mr-2">
                                        <span class="text-sm">Select All</span>
                                    </label>
                                    <span id="dns-selected-count" class="text-sm text-gray-400">0 selected</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="bulkDNSAction('enable')" class="px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm">
                                        <i class="fas fa-play mr-1"></i>Enable
                                    </button>
                                    <button onclick="bulkDNSAction('disable')" class="px-3 py-1 bg-yellow-600 hover:bg-yellow-700 rounded text-sm">
                                        <i class="fas fa-pause mr-1"></i>Disable
                                    </button>
                                    <button onclick="bulkDNSAction('delete')" class="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm">
                                        <i class="fas fa-trash mr-1"></i>Delete
                                    </button>
                                </div>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead class="bg-gray-600">
                                        <tr>
                                            <th class="px-4 py-3 text-left w-12"></th>
                                            <th class="px-4 py-3 text-left">Name</th>
                                            <th class="px-4 py-3 text-left">Type</th>
                                            <th class="px-4 py-3 text-left">Value</th>
                                            <th class="px-4 py-3 text-left">TTL</th>
                                            <th class="px-4 py-3 text-left">Provider</th>
                                            <th class="px-4 py-3 text-left">Status</th>
                                            <th class="px-4 py-3 text-left">Health</th>
                                            <th class="px-4 py-3 text-left">Queries</th>
                                            <th class="px-4 py-3 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="dns-records-table" class="divide-y divide-gray-600">
                                        <!-- DNS records will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div id="dns-loading" class="text-center py-8 hidden">
                                <i class="fas fa-spinner fa-spin text-2xl text-purple-400"></i>
                                <p class="text-gray-400 mt-2">Loading DNS records...</p>
                            </div>
                            
                            <div id="dns-empty" class="text-center py-8 hidden">
                                <i class="fas fa-inbox text-4xl text-gray-500 mb-4"></i>
                                <p class="text-gray-400">No DNS records found.</p>
                                <button onclick="showDNSAddModal()" 
                                        class="mt-4 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-plus mr-2"></i>Add your first record
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Zones Tab -->
                    <div id="dns-tab-content-zones" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">DNS Zones</h3>
                                <div id="dns-zones-list" class="space-y-3">
                                    <!-- Dynamic zones content -->
                                </div>
                                <button onclick="createNewDNSZone()" class="mt-4 w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-plus mr-2"></i>Create New Zone
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Zone Configuration</h3>
                                <div id="dns-zone-config" class="space-y-4">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-cogs text-4xl mb-2"></i>
                                        <p>Select a zone to configure</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Analytics Tab -->
                    <div id="dns-tab-content-analytics" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Query Statistics</h3>
                                <div id="dns-query-chart" class="h-64 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-chart-line text-4xl mb-2"></i>
                                        <p>DNS query analytics chart</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Performance Metrics</h3>
                                <div id="dns-performance-metrics" class="space-y-3">
                                    <!-- Dynamic performance metrics -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Top Queries</h3>
                                <div id="dns-top-queries" class="space-y-2">
                                    <!-- Dynamic top queries -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Response Codes</h3>
                                <div id="dns-response-codes" class="space-y-2">
                                    <!-- Dynamic response code stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Security Tab -->
                    <div id="dns-tab-content-security" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">DNSSEC Status</h3>
                                <div id="dns-dnssec-status" class="space-y-3">
                                    <!-- Dynamic DNSSEC status -->
                                </div>
                                <button onclick="enableDNSSEC()" class="mt-4 w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-shield-alt mr-2"></i>Enable DNSSEC
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Threat Detection</h3>
                                <div id="dns-threats" class="space-y-2">
                                    <!-- Dynamic threat information -->
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Security Policies</h3>
                                <div id="dns-security-policies" class="space-y-2">
                                    <!-- Dynamic security policies -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Health Checks Tab -->
                    <div id="dns-tab-content-health" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Health Monitoring</h3>
                                <div id="dns-health-monitors" class="space-y-3">
                                    <!-- Dynamic health monitor list -->
                                </div>
                                <button onclick="createHealthMonitor()" class="mt-4 w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-plus mr-2"></i>Add Health Check
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Uptime Statistics</h3>
                                <div id="dns-uptime-chart" class="h-48 flex items-center justify-center border border-gray-600 rounded">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-heartbeat text-4xl mb-2"></i>
                                        <p>Uptime monitoring chart</p>
                                    </div>
                                </div>
                                <div id="dns-uptime-stats" class="mt-4 space-y-2">
                                    <!-- Dynamic uptime stats -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- GeoDNS Tab -->
                    <div id="dns-tab-content-geodns" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Geographic Routing</h3>
                                <div id="geodns-map" class="h-64 flex items-center justify-center border border-gray-600 rounded mb-4">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-globe-americas text-4xl mb-2"></i>
                                        <p>Interactive GeoDNS map</p>
                                    </div>
                                </div>
                                <button onclick="configureGeoDNS()" class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-cog mr-2"></i>Configure GeoDNS
                                </button>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Regional Settings</h3>
                                <div id="geodns-regions" class="space-y-3">
                                    <!-- Dynamic regional configurations -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Tools Tab -->
                    <!-- Proxy Management Tab Content -->
                    <div id="dns-tab-content-proxy" class="dns-tab-content hidden">
                        <div class="space-y-6">
                            <!-- Proxy Management Header -->
                            <div class="bg-gray-700 p-6 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-semibold text-white">
                                        <i class="fas fa-network-wired mr-2 text-blue-400"></i>
                                        NGINX Proxy Management
                                    </h3>
                                    <div class="flex space-x-3">
                                        <button onclick="testAllProxyConfigs()" 
                                                class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                            <i class="fas fa-vial mr-2"></i>Test All
                                        </button>
                                        <button onclick="generateAllProxyConfigs()" 
                                                class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                                            <i class="fas fa-cog mr-2"></i>Generate Configs
                                        </button>
                                        <button onclick="downloadAllProxyConfigs()" 
                                                class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                            <i class="fas fa-download mr-2"></i>Download All
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Proxy Statistics -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <div class="bg-blue-600 bg-opacity-20 border border-blue-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-blue-300 text-sm">Total Domains</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-total-domains">0</p>
                                            </div>
                                            <i class="fas fa-globe text-blue-400 text-xl"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-600 bg-opacity-20 border border-green-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-green-300 text-sm">Active Proxies</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-active-count">0</p>
                                            </div>
                                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-yellow-600 bg-opacity-20 border border-yellow-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-yellow-300 text-sm">Health Issues</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-issues-count">0</p>
                                            </div>
                                            <i class="fas fa-exclamation-triangle text-yellow-400 text-xl"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-600 bg-opacity-20 border border-red-500 p-3 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-red-300 text-sm">Failed Tests</p>
                                                <p class="text-2xl font-bold text-white" id="proxy-failed-count">0</p>
                                            </div>
                                            <i class="fas fa-times-circle text-red-400 text-xl"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Domain Proxy List -->
                            <div class="bg-gray-700 p-6 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">
                                    <i class="fas fa-list mr-2"></i>Domain Proxy Configurations
                                </h4>
                                
                                <div id="proxy-domains-list" class="space-y-4">
                                    <!-- Domain proxy cards will be populated here -->
                                    <div class="text-center py-8 text-gray-400" id="proxy-empty-state">
                                        <i class="fas fa-network-wired text-4xl mb-4"></i>
                                        <p>No domains found for proxy configuration</p>
                                        <p class="text-sm">Add domains in the Domains section to configure their proxy settings here.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Global Proxy Settings -->
                            <div class="bg-gray-700 p-6 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">
                                    <i class="fas fa-globe mr-2"></i>Global Proxy Settings
                                </h4>
                                
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Default Proxy Timeout (seconds)</label>
                                            <input type="number" id="global-proxy-timeout" value="30" min="1" max="300"
                                                   class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Default Max Body Size</label>
                                            <select id="global-max-body-size" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                                <option value="1m">1MB</option>
                                                <option value="10m" selected>10MB</option>
                                                <option value="50m">50MB</option>
                                                <option value="100m">100MB</option>
                                            </select>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Default Load Balancing</label>
                                            <select id="global-load-balancing" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                                <option value="round_robin" selected>Round Robin</option>
                                                <option value="least_connections">Least Connections</option>
                                                <option value="weighted">Weighted</option>
                                                <option value="geographic">Geographic</option>
                                            </select>
                                        </div>
                                        
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" id="global-health-checks" checked class="rounded">
                                            <label for="global-health-checks" class="text-sm text-gray-300">Enable health checks by default</label>
                                        </div>
                                        
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox" id="global-ssl-mode" checked class="rounded">
                                            <label for="global-ssl-mode" class="text-sm text-gray-300">Auto SSL/TLS configuration</label>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-gray-600 p-4 rounded-lg">
                                        <h5 class="font-semibold text-gray-300 mb-3">
                                            <i class="fas fa-info-circle mr-2"></i>Proxy Management Guide
                                        </h5>
                                        <div class="text-sm text-gray-400 space-y-2">
                                            <p><strong class="text-white">Clean Backend:</strong> For bot/crawler traffic and content reviewers</p>
                                            <p><strong class="text-white">Gray Backend:</strong> For medium-risk human traffic</p>
                                            <p><strong class="text-white">Aggressive Backend:</strong> For verified human traffic with full sales funnel</p>
                                            <hr class="border-gray-500 my-3">
                                            <p><strong class="text-blue-300">Traffic Flow:</strong></p>
                                            <p class="text-xs">Visitor → Your Server → Traffic Analysis → Backend Selection → Original Hosting</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 flex space-x-3">
                                    <button onclick="saveGlobalProxySettings()" 
                                            class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-save mr-2"></i>Save Global Settings
                                    </button>
                                    <button onclick="resetGlobalProxySettings()" 
                                            class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-undo mr-2"></i>Reset to Defaults
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="dns-tab-content-tools" class="dns-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">DNS Lookup Tools</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Domain to lookup</label>
                                        <input type="text" id="dns-lookup-domain" placeholder="example.com" 
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Record Type</label>
                                        <select id="dns-lookup-type" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg">
                                            <option value="A">A Record</option>
                                            <option value="AAAA">AAAA Record</option>
                                            <option value="CNAME">CNAME Record</option>
                                            <option value="MX">MX Record</option>
                                            <option value="TXT">TXT Record</option>
                                            <option value="NS">NS Record</option>
                                        </select>
                                    </div>
                                    <button onclick="performDNSLookup()" class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-search mr-2"></i>Lookup
                                    </button>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Lookup Results</h3>
                                <div id="dns-lookup-results" class="bg-gray-800 p-4 rounded text-sm font-mono min-h-48">
                                    <div class="text-center text-gray-400">
                                        <i class="fas fa-search text-2xl mb-2"></i>
                                        <p>Lookup results will appear here</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Propagation Checker</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Check Propagation</label>
                                        <input type="text" id="dns-propagation-domain" placeholder="example.com" 
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg">
                                    </div>
                                    <button onclick="checkDNSPropagationGlobal()" class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-globe mr-2"></i>Check Propagation
                                    </button>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Propagation Status</h3>
                                <div id="dns-propagation-results" class="space-y-2">
                                    <!-- Dynamic propagation results -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                    <!-- DNS Records Filter -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Domain Filtresi</label>
                                <input type="text" id="dns-domain-filter" placeholder="Domain ara..." 
                                       class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Record Tipi</label>
                                <select id="dns-type-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    <option value="">Tümü</option>
                                    <option value="A">A Record</option>
                                    <option value="AAAA">AAAA Record</option>
                                    <option value="CNAME">CNAME Record</option>
                                    <option value="MX">MX Record</option>
                                    <option value="TXT">TXT Record</option>
                                    <option value="NS">NS Record</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Durum</label>
                                <select id="dns-status-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    <option value="">Tümü</option>
                                    <option value="active">Aktif</option>
                                    <option value="pending">Beklemede</option>
                                    <option value="error">Hatalı</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Sağlayıcı</label>
                                <select id="dns-provider-filter" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    <option value="">Tümü</option>
                                    <option value="CLOUDFLARE">Cloudflare</option>
                                    <option value="GODADDY">GoDaddy</option>
                                    <option value="NAMECHEAP">Namecheap</option>
                                    <option value="CUSTOM">Özel</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- DNS Records Table -->
                    <div class="bg-gray-700 rounded-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-600">
                                    <tr>
                                        <th class="px-4 py-3 text-left">
                                            <input type="checkbox" id="select-all-dns" class="rounded">
                                        </th>
                                        <th class="px-4 py-3 text-left">Domain</th>
                                        <th class="px-4 py-3 text-left">Name</th>
                                        <th class="px-4 py-3 text-left">Type</th>
                                        <th class="px-4 py-3 text-left">Value</th>
                                        <th class="px-4 py-3 text-left">TTL</th>
                                        <th class="px-4 py-3 text-left">Provider</th>
                                        <th class="px-4 py-3 text-left">Status</th>
                                        <th class="px-4 py-3 text-left">Propagation</th>
                                        <th class="px-4 py-3 text-left">İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="dns-records-table" class="divide-y divide-gray-600">
                                    <!-- DNS records will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="dns-loading" class="text-center py-8 hidden">
                            <i class="fas fa-spinner fa-spin text-2xl text-purple-400"></i>
                            <p class="text-gray-400 mt-2">DNS kayıtları yükleniyor...</p>
                        </div>
                        
                        <div id="dns-empty" class="text-center py-8 hidden">
                            <i class="fas fa-inbox text-4xl text-gray-500 mb-4"></i>
                            <p class="text-gray-400">Henüz DNS kaydı bulunmuyor.</p>
                            <button onclick="showDNSAddModal()" 
                                    class="mt-4 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                <i class="fas fa-plus mr-2"></i>İlk DNS kaydını ekle
                            </button>
                        </div>
                    </div>
                    
                    <!-- Advanced DNS Features -->
                    <div class="mt-8 space-y-6">
                        <!-- Advanced Features Tab Navigation -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-purple-300">
                                <i class="fas fa-rocket mr-2"></i>Gelişmiş DNS Özellikleri
                            </h3>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <button onclick="showAdvancedDNSSection('geodns')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-globe mr-2"></i>GeoDNS
                                </button>
                                <button onclick="showAdvancedDNSSection('health')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-heartbeat mr-2"></i>Health Check
                                </button>
                                <button onclick="showAdvancedDNSSection('security')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-shield-alt mr-2"></i>Güvenlik
                                </button>
                                <button onclick="showAdvancedDNSSection('loadbalancing')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-balance-scale mr-2"></i>Load Balancing
                                </button>
                                <button onclick="showAdvancedDNSSection('cache')" 
                                        class="advanced-dns-tab px-4 py-2 bg-gray-600 hover:bg-purple-600 rounded-lg transition-colors">
                                    <i class="fas fa-database mr-2"></i>Cache
                                </button>
                                <button onclick="exportDNSMetrics()" 
                                        class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors">
                                    <i class="fas fa-download mr-2"></i>Export
                                </button>
                            </div>
                        </div>

                        <!-- GeoDNS Section -->
                        <div id="advanced-dns-geodns" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-globe mr-2"></i>GeoDNS Management
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Test Domain</label>
                                        <input type="text" id="geodns-test-domain" 
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                               placeholder="example.com">
                                    </div>
                                    <button onclick="testGeoDNSResolution()" 
                                            class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-test-tube mr-2"></i>GeoDNS Testi Yap
                                    </button>
                                </div>
                                <div id="geodns-results" class="text-sm">
                                    <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                        GeoDNS test sonuçları burada görünecek
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Health Check Section -->
                        <div id="advanced-dns-health" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-heartbeat mr-2"></i>Gelişmiş Health Monitoring
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Hedef Sunucular (Her satırda bir)</label>
                                        <textarea id="health-targets" rows="4" 
                                                  class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                                  placeholder="example.com&#10;api.example.com&#10;cdn.example.com"></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Protokoller</label>
                                        <div class="flex space-x-4">
                                            <label class="flex items-center">
                                                <input type="checkbox" name="health-protocols" value="https" checked class="mr-2">
                                                HTTPS
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" name="health-protocols" value="http" class="mr-2">
                                                HTTP
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" name="health-protocols" value="tcp" class="mr-2">
                                                TCP
                                            </label>
                                        </div>
                                    </div>
                                    <button onclick="performAdvancedHealthCheck()" 
                                            class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-stethoscope mr-2"></i>Health Check Başlat
                                    </button>
                                </div>
                                <div id="health-results" class="text-sm max-h-64 overflow-y-auto">
                                    <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                        Health check sonuçları burada görünecek
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Security Analysis Section -->
                        <div id="advanced-dns-security" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-shield-alt mr-2"></i>DNS Güvenlik Analizi
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <button onclick="runBotDetectionAnalysis()" 
                                            class="w-full bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-robot mr-2"></i>Bot Detection Analizi
                                    </button>
                                    <button onclick="runSecurityAnalysis()" 
                                            class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-scan mr-2"></i>Güvenlik Taraması
                                    </button>
                                    <div id="bot-detection-results" class="text-sm">
                                        <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                            Bot detection analizi burada görünecek
                                        </div>
                                    </div>
                                </div>
                                <div id="security-analysis-results" class="text-sm">
                                    <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                        Güvenlik analizi sonuçları burada görünecek
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Load Balancing Section -->
                        <div id="advanced-dns-loadbalancing" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-balance-scale mr-2"></i>DNS Load Balancing
                            </h4>
                            <div id="load-balancing-info">
                                <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                    <i class="fas fa-spinner fa-spin mr-2"></i>Load balancing bilgileri yükleniyor...
                                </div>
                            </div>
                        </div>

                        <!-- Cache Management Section -->
                        <div id="advanced-dns-cache" class="advanced-dns-section hidden bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-300 mb-3">
                                <i class="fas fa-database mr-2"></i>DNS Cache Management
                            </h4>
                            <div id="cache-statistics">
                                <div class="bg-gray-600 p-3 rounded border-2 border-dashed border-gray-500 text-center text-gray-400">
                                    <i class="fas fa-spinner fa-spin mr-2"></i>Cache istatistikleri yükleniyor...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deploy Section -->
            <div id="section-deploy" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-rocket mr-2 text-blue-400"></i>
                            Deployment & Infrastructure
                        </h2>
                        <div class="flex space-x-2">
                            <button onclick="refreshDeploymentStatus()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>Status Yenile
                            </button>
                            <button onclick="exportDeploymentConfig()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Config Export
                            </button>
                        </div>
                    </div>
                    
                    <!-- Deployment Status Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-green-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Aktif Sunucular</p>
                                    <p class="text-2xl font-bold text-green-400" id="active-servers-count">0</p>
                                </div>
                                <i class="fas fa-server text-green-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-blue-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Deploy Edilen Domainler</p>
                                    <p class="text-2xl font-bold text-blue-400" id="deployed-domains-count">0</p>
                                </div>
                                <i class="fas fa-globe text-blue-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-yellow-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Pending Deployments</p>
                                    <p class="text-2xl font-bold text-yellow-400" id="pending-deployments-count">0</p>
                                </div>
                                <i class="fas fa-clock text-yellow-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-purple-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Ortalama Response</p>
                                    <p class="text-2xl font-bold text-purple-400" id="avg-response-time">0ms</p>
                                </div>
                                <i class="fas fa-tachometer-alt text-purple-400 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Deployment Actions -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Quick Deploy -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-blue-300">
                                <i class="fas fa-bolt mr-2"></i>Quick Deploy
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Deploy Target</label>
                                    <select id="deploy-target" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                        <option value="production">Production Server</option>
                                        <option value="staging">Staging Environment</option>
                                        <option value="development">Development Server</option>
                                        <option value="custom">Custom Server</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Deployment Type</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="nginx" checked class="text-blue-500">
                                            <span class="text-sm">NGINX Config</span>
                                        </label>
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="dns" class="text-blue-500">
                                            <span class="text-sm">DNS Records</span>
                                        </label>
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="ssl" class="text-blue-500">
                                            <span class="text-sm">SSL Certificates</span>
                                        </label>
                                        <label class="flex items-center space-x-2">
                                            <input type="radio" name="deploy-type" value="full" class="text-blue-500">
                                            <span class="text-sm">Full Stack</span>
                                        </label>
                                    </div>
                                </div>
                                <button onclick="executeQuickDeploy()" 
                                        class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-rocket mr-2"></i>Deploy Now
                                </button>
                            </div>
                        </div>
                        
                        <!-- Server Health Check -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-green-300">
                                <i class="fas fa-heartbeat mr-2"></i>Server Health Check
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Server IP/Domain</label>
                                    <input type="text" id="health-check-target" 
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                           placeholder="192.168.1.100 or domain.com">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Test Domain</label>
                                    <input type="text" id="health-check-domain" 
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                           placeholder="test.yourdomain.com">
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="checkServerHealth()" 
                                            class="flex-1 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm">
                                        <i class="fas fa-stethoscope mr-2"></i>Health Check
                                    </button>
                                    <button onclick="checkDNSPropagation()" 
                                            class="flex-1 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm">
                                        <i class="fas fa-network-wired mr-2"></i>DNS Check
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Deployment History & Logs -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Recent Deployments -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-yellow-300">
                                <i class="fas fa-history mr-2"></i>Recent Deployments
                            </h3>
                            <div id="deployment-history" class="space-y-2 max-h-64 overflow-y-auto">
                                <div class="bg-gray-600 p-3 rounded border-l-4 border-green-500">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Production Deploy</span>
                                        <span class="text-sm text-gray-400">2 min ago</span>
                                    </div>
                                    <div class="text-sm text-gray-300">NGINX config updated for 3 domains</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded border-l-4 border-blue-500">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">DNS Update</span>
                                        <span class="text-sm text-gray-400">15 min ago</span>
                                    </div>
                                    <div class="text-sm text-gray-300">Added A records for example.com</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded border-l-4 border-yellow-500">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">SSL Certificate</span>
                                        <span class="text-sm text-gray-400">1 hour ago</span>
                                    </div>
                                    <div class="text-sm text-gray-300">Renewed certificates for 5 domains</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Live Deployment Logs -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-red-300">
                                <i class="fas fa-terminal mr-2"></i>Live Deployment Logs
                            </h3>
                            <div id="deployment-logs" class="bg-black p-3 rounded font-mono text-sm max-h-64 overflow-y-auto">
                                <div class="text-green-400">[2024-01-15 14:30:15] Starting deployment...</div>
                                <div class="text-blue-400">[2024-01-15 14:30:16] Validating NGINX config</div>
                                <div class="text-green-400">[2024-01-15 14:30:17] ✓ Configuration validated</div>
                                <div class="text-yellow-400">[2024-01-15 14:30:18] Backing up current config</div>
                                <div class="text-green-400">[2024-01-15 14:30:19] ✓ Backup completed</div>
                                <div class="text-blue-400">[2024-01-15 14:30:20] Applying new configuration</div>
                                <div class="text-green-400">[2024-01-15 14:30:21] ✓ Deployment completed successfully</div>
                                <div class="text-cyan-400 animate-pulse">[2024-01-15 14:30:22] Ready for next deployment...</div>
                            </div>
                            <div class="mt-3 flex space-x-2">
                                <button onclick="clearDeploymentLogs()" 
                                        class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-trash mr-1"></i>Clear
                                </button>
                                <button onclick="downloadLogs()" 
                                        class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">
                                    <i class="fas fa-download mr-1"></i>Download
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Deployment Tools -->
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h3 class="text-lg font-semibold mb-4 text-purple-300">
                            <i class="fas fa-tools mr-2"></i>Advanced Deployment Tools
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <button onclick="showBulkDeployModal()" 
                                    class="bg-indigo-600 hover:bg-indigo-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-layer-group mr-2"></i>Bulk Deploy
                            </button>
                            <button onclick="showRollbackModal()" 
                                    class="bg-orange-600 hover:bg-orange-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-undo mr-2"></i>Rollback
                            </button>
                            <button onclick="showScheduleDeployModal()" 
                                    class="bg-teal-600 hover:bg-teal-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-calendar-alt mr-2"></i>Schedule Deploy
                            </button>
                            <button onclick="showDeploymentAnalytics()" 
                                    class="bg-pink-600 hover:bg-pink-700 px-4 py-3 rounded-lg">
                                <i class="fas fa-chart-pie mr-2"></i>Analytics
                            </button>
                        </div>
                    </div>
                    
                    <!-- Server Management Section -->
                    <div class="bg-gray-700 p-4 rounded-lg mt-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-blue-300">
                                <i class="fas fa-server mr-2"></i>Server Management
                            </h3>
                            <button onclick="showAddServerModal()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm">
                                <i class="fas fa-plus mr-2"></i>Add Server
                            </button>
                        </div>
                        
                        <!-- Server List Container -->
                        <div id="server-list-container" class="space-y-4">
                            <!-- Servers will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Test Results -->
                    <div id="deployment-test-results" class="mt-6 hidden">
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-3 text-green-300">
                                <i class="fas fa-check-circle mr-2"></i>Deployment Test Results
                            </h3>
                            <div id="test-results-content" class="space-y-2">
                                <!-- Results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Section -->
            <div id="section-security" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-shield-alt mr-2 text-red-400"></i>
                            Güvenlik Merkezi
                        </h2>
                        <button onclick="refreshSecurityData()" 
                                class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-sync-alt mr-2"></i>Güvenlik Durumunu Yenile
                        </button>
                    </div>
                    
                    <!-- Security Overview Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-green-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Güvenli IP'ler</p>
                                    <p class="text-2xl font-bold text-green-400" id="security-whitelist-count">0</p>
                                </div>
                                <i class="fas fa-check-shield text-green-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-red-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Engellenen IP'ler</p>
                                    <p class="text-2xl font-bold text-red-400" id="security-blacklist-count">0</p>
                                </div>
                                <i class="fas fa-ban text-red-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-yellow-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Şüpheli IP'ler</p>
                                    <p class="text-2xl font-bold text-yellow-400" id="security-graylist-count">0</p>
                                </div>
                                <i class="fas fa-exclamation-triangle text-yellow-400 text-2xl"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg border-l-4 border-purple-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-300 text-sm">Kötü Bot Saldırıları</p>
                                    <p class="text-2xl font-bold text-purple-400" id="security-malicious-bots">0</p>
                                </div>
                                <i class="fas fa-robot text-purple-400 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Security Threat Detection -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Real-time Threat Detection -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                                <i class="fas fa-radar text-red-400 mr-2"></i>
                                Gerçek Zamanlı Tehdit Tespiti
                            </h3>
                            
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">Bot Attack Detection</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="bot-attack-detection" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">DDoS Protection</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="ddos-protection" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">Suspicious IP Monitoring</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="suspicious-ip-monitoring" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                    <span class="text-gray-300">Geographic Filtering</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="geo-filtering" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Security Rules Management -->
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                                <i class="fas fa-cogs text-orange-400 mr-2"></i>
                                Güvenlik Kuralları
                            </h3>
                            
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Rate Limiting (req/min)</label>
                                    <input type="number" id="rate-limit-value" value="60" min="1" max="1000"
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded text-white text-sm">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Bot Rate Limit (req/min)</label>
                                    <input type="number" id="bot-rate-limit-value" value="10" min="1" max="100"
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded text-white text-sm">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Engellenen Ülkeler</label>
                                    <input type="text" id="blocked-countries" placeholder="CN,RU,KP"
                                           class="w-full p-2 bg-gray-600 border border-gray-500 rounded text-white text-sm">
                                    <p class="text-xs text-gray-400 mt-1">Ülke kodlarını virgülle ayırın</p>
                                </div>
                                
                                <button onclick="updateSecurityRules()" 
                                        class="w-full bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded-lg font-medium">
                                    <i class="fas fa-shield-alt mr-2"></i>Kuralları Uygula
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Security Events -->
                    <div class="bg-gray-700 p-4 rounded-lg mb-6">
                        <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-history text-cyan-400 mr-2"></i>
                            Son Güvenlik Olayları
                        </h3>
                        <div id="security-events-container">
                            <div class="text-center py-4 text-gray-400">
                                <i class="fas fa-shield-alt text-2xl mb-2"></i>
                                <p>Güvenlik olayları yükleniyor...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Global IP Management -->
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white flex items-center">
                                <i class="fas fa-network-wired text-blue-400 mr-2"></i>
                                Global IP Yönetimi
                            </h3>
                            <button onclick="showGlobalIPManager()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-plus mr-2"></i>IP Kuralı Ekle
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-gray-600 p-3 rounded">
                                <h4 class="font-medium text-green-300 mb-2">
                                    <i class="fas fa-check-circle mr-1"></i>Whitelist
                                </h4>
                                <div id="global-whitelist-preview" class="text-sm text-gray-300">
                                    Güvenli IP'ler burada görünür...
                                </div>
                            </div>
                            
                            <div class="bg-gray-600 p-3 rounded">
                                <h4 class="font-medium text-red-300 mb-2">
                                    <i class="fas fa-ban mr-1"></i>Blacklist
                                </h4>
                                <div id="global-blacklist-preview" class="text-sm text-gray-300">
                                    Engellenen IP'ler burada görünür...
                                </div>
                            </div>
                            
                            <div class="bg-gray-600 p-3 rounded">
                                <h4 class="font-medium text-yellow-300 mb-2">
                                    <i class="fas fa-exclamation-triangle mr-1"></i>Graylist
                                </h4>
                                <div id="global-graylist-preview" class="text-sm text-gray-300">
                                    İzlenen IP'ler burada görünür...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="section-settings" class="section hidden">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-cog mr-2 text-yellow-400"></i>
                            System Settings & Configuration
                        </h2>
                        <div class="flex space-x-2">
                            <button onclick="exportSystemConfig()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Export Config
                            </button>
                            <button onclick="importSystemConfig()" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-upload mr-2"></i>Import Config
                            </button>
                        </div>
                    </div>
                    
                    <!-- Settings Navigation Tabs -->
                    <div class="flex flex-wrap gap-2 mb-6 border-b border-gray-600 pb-4">
                        <button onclick="showSettingsTab('general')" id="settings-tab-general"
                                class="settings-tab px-4 py-2 bg-yellow-600 text-white rounded-lg transition-colors">
                            <i class="fas fa-cog mr-2"></i>General
                        </button>
                        <button onclick="showSettingsTab('system')" id="settings-tab-system"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-server mr-2"></i>System
                        </button>
                        <button onclick="showSettingsTab('performance')" id="settings-tab-performance"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-tachometer-alt mr-2"></i>Performance
                        </button>
                        <button onclick="showSettingsTab('monitoring')" id="settings-tab-monitoring"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-eye mr-2"></i>Monitoring
                        </button>
                        <button onclick="showSettingsTab('backup')" id="settings-tab-backup"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-archive mr-2"></i>Backup
                        </button>
                        <button onclick="showSettingsTab('logs')" id="settings-tab-logs"
                                class="settings-tab px-4 py-2 bg-gray-600 hover:bg-yellow-600 rounded-lg transition-colors">
                            <i class="fas fa-file-alt mr-2"></i>Logs
                        </button>
                    </div>
                    
                    <!-- General Settings Tab -->
                    <div id="settings-content-general" class="settings-content">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Platform Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-yellow-300">
                                    <i class="fas fa-globe mr-2"></i>Platform Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Platform Name</label>
                                        <input type="text" id="platform-name" value="Traffic Management Platform"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Default Language</label>
                                        <select id="default-language" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="tr" selected>Türkçe</option>
                                            <option value="en">English</option>
                                            <option value="de">Deutsch</option>
                                            <option value="fr">Français</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Timezone</label>
                                        <select id="timezone" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="Europe/Istanbul" selected>Europe/Istanbul (UTC+3)</option>
                                            <option value="Europe/London">Europe/London (UTC+0)</option>
                                            <option value="America/New_York">America/New_York (UTC-5)</option>
                                            <option value="Asia/Tokyo">Asia/Tokyo (UTC+9)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Authentication Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-red-300">
                                    <i class="fas fa-key mr-2"></i>Authentication Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Session Timeout (minutes)</label>
                                        <input type="number" id="session-timeout" value="60" min="5" max="1440"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Require Two-Factor Auth</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="require-2fa" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Auto Logout on Close</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="auto-logout" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <button onclick="changeAdminPassword()" 
                                            class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-lock mr-2"></i>Change Password
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Default Configuration Settings -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-blue-300">
                                <i class="fas fa-sliders-h mr-2"></i>Default Configuration Settings
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Default Rate Limit (req/min)</label>
                                    <input type="number" id="default-rate-limit" value="100" min="1" max="10000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Default Bot Limit (req/min)</label>
                                    <input type="number" id="default-bot-limit" value="10" min="1" max="1000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Analytics Retention (days)</label>
                                    <input type="number" id="analytics-retention" value="90" min="1" max="365"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- System Settings Tab -->
                    <div id="settings-content-system" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- System Information -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-green-300">
                                    <i class="fas fa-info-circle mr-2"></i>System Information
                                </h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Platform Version:</span>
                                        <span class="text-white font-mono">v2.1.0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Node.js Version:</span>
                                        <span class="text-white font-mono" id="node-version">v18.17.0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Uptime:</span>
                                        <span class="text-white font-mono" id="system-uptime">2h 30m</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Memory Usage:</span>
                                        <span class="text-white font-mono" id="memory-usage">145MB / 512MB</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">CPU Usage:</span>
                                        <span class="text-white font-mono" id="cpu-usage">12%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- File System Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-orange-300">
                                    <i class="fas fa-folder mr-2"></i>File System Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Max File Upload Size (MB)</label>
                                        <input type="number" id="max-file-size" value="50" min="1" max="1000"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Temp File Cleanup (hours)</label>
                                        <input type="number" id="temp-cleanup" value="24" min="1" max="168"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Auto Compress Logs</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="compress-logs" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- API Configuration -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-purple-300">
                                <i class="fas fa-plug mr-2"></i>API Configuration
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">API Rate Limit (req/min)</label>
                                    <input type="number" id="api-rate-limit" value="1000" min="100" max="10000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">API Timeout (seconds)</label>
                                    <input type="number" id="api-timeout" value="30" min="5" max="300"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-300 mb-2">CORS Origins (one per line)</label>
                                    <textarea id="cors-origins" rows="3"
                                              class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white"
                                              placeholder="https://example.com
https://app.example.com
http://localhost:3000"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Performance Settings Tab -->
                    <div id="settings-content-performance" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Cache Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-cyan-300">
                                    <i class="fas fa-database mr-2"></i>Cache Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Memory Cache Size (MB)</label>
                                        <input type="number" id="cache-size" value="128" min="32" max="2048"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Cache TTL (seconds)</label>
                                        <input type="number" id="cache-ttl" value="3600" min="60" max="86400"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Cache Compression</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="cache-compression" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                        </label>
                                    </div>
                                    <button onclick="clearSystemCache()" 
                                            class="w-full bg-cyan-600 hover:bg-cyan-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-broom mr-2"></i>Clear Cache
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Database Performance -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-indigo-300">
                                    <i class="fas fa-chart-line mr-2"></i>Database Performance
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Connection Pool Size</label>
                                        <input type="number" id="db-pool-size" value="10" min="5" max="100"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Query Timeout (ms)</label>
                                        <input type="number" id="query-timeout" value="5000" min="1000" max="30000"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Query Logging</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="query-logging" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                                        </label>
                                    </div>
                                    <button onclick="optimizeDatabase()" 
                                            class="w-full bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-magic mr-2"></i>Optimize Database
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Worker Process Settings -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-pink-300">
                                <i class="fas fa-cogs mr-2"></i>Worker Process Settings
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Worker Count</label>
                                    <input type="number" id="worker-count" value="4" min="1" max="16"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Max Memory per Worker (MB)</label>
                                    <input type="number" id="worker-memory" value="256" min="128" max="2048"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Worker Restart Threshold</label>
                                    <input type="number" id="worker-restart" value="1000" min="100" max="10000"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Monitoring Settings Tab -->
                    <div id="settings-content-monitoring" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Real-time Monitoring -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-green-300">
                                    <i class="fas fa-eye mr-2"></i>Real-Time Monitoring
                                </h3>
                                <div class="flex items-center space-x-4 mb-4">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm">Status:</span>
                                        <span id="monitoringStatus" class="font-semibold">🔴 Stopped</span>
                                    </div>
                                    <div class="text-sm text-gray-400" id="lastRefresh">
                                        Henüz güncelleme yapılmadı
                                    </div>
                                </div>
                                <div class="space-y-3 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-1">Refresh Interval (seconds)</label>
                                        <input type="number" id="monitor-interval" value="30" min="5" max="300"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Auto-start Monitoring</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="auto-start-monitoring" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                        </label>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="startMonitoring()" id="startMonitoringBtn"
                                            class="flex-1 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm">
                                        <i class="fas fa-play mr-2"></i>Start
                                    </button>
                                    <button onclick="stopMonitoring()" id="stopMonitoringBtn" disabled
                                            class="flex-1 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-sm disabled:opacity-50">
                                        <i class="fas fa-stop mr-2"></i>Stop
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Alert Settings -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-red-300">
                                    <i class="fas fa-bell mr-2"></i>Alert Settings
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Email Alerts</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="email-alerts" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">SMS Alerts</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="sms-alerts" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Alert Email</label>
                                        <input type="email" id="alert-email" placeholder="admin@example.com"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">CPU Alert Threshold (%)</label>
                                        <input type="number" id="cpu-threshold" value="80" min="50" max="95"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Memory Alert Threshold (%)</label>
                                        <input type="number" id="memory-threshold" value="85" min="50" max="95"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Health Check Configuration -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-blue-300">
                                <i class="fas fa-heartbeat mr-2"></i>Health Check Configuration
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Check Interval (seconds)</label>
                                    <input type="number" id="health-interval" value="60" min="30" max="3600"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Timeout (seconds)</label>
                                    <input type="number" id="health-timeout" value="10" min="5" max="60"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">Retry Count</label>
                                    <input type="number" id="health-retries" value="3" min="1" max="10"
                                           class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Backup Settings Tab -->
                    <div id="settings-content-backup" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Automatic Backup -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-purple-300">
                                    <i class="fas fa-clock mr-2"></i>Automatic Backup
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Auto Backup</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="auto-backup" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Backup Frequency</label>
                                        <select id="backup-frequency" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="hourly">Hourly</option>
                                            <option value="daily" selected>Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Retention Period (days)</label>
                                        <input type="number" id="backup-retention" value="30" min="1" max="365"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Max Backup Size (GB)</label>
                                        <input type="number" id="backup-size-limit" value="10" min="1" max="100"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Manual Backup -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-green-300">
                                    <i class="fas fa-download mr-2"></i>Manual Backup
                                </h3>
                                <div class="space-y-4">
                                    <div class="text-sm text-gray-300">
                                        <p class="mb-2">Backup includes:</p>
                                        <ul class="list-disc list-inside space-y-1 text-xs">
                                            <li>Domain configurations</li>
                                            <li>Analytics data</li>
                                            <li>IP rules and security settings</li>
                                            <li>System settings</li>
                                            <li>DNS records</li>
                                        </ul>
                                    </div>
                                    <button onclick="createManualBackup()" 
                                            class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-download mr-2"></i>Create Backup Now
                                    </button>
                                    <button onclick="restoreFromBackup()" 
                                            class="w-full bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded-lg">
                                        <i class="fas fa-upload mr-2"></i>Restore from Backup
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Backup History -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-yellow-300">
                                <i class="fas fa-history mr-2"></i>Backup History
                            </h3>
                            <div id="backup-history">
                                <div class="text-center py-4 text-gray-400">
                                    <i class="fas fa-archive text-2xl mb-2"></i>
                                    <p>Backup history loading...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Logs Settings Tab -->
                    <div id="settings-content-logs" class="settings-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Log Configuration -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4 text-cyan-300">
                                    <i class="fas fa-cog mr-2"></i>Log Configuration
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Log Level</label>
                                        <select id="log-level" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                            <option value="error">Error Only</option>
                                            <option value="warn">Warning & Above</option>
                                            <option value="info" selected>Info & Above</option>
                                            <option value="debug">Debug (Verbose)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Log Rotation Size (MB)</label>
                                        <input type="number" id="log-rotation-size" value="100" min="10" max="1000"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Max Log Files</label>
                                        <input type="number" id="max-log-files" value="10" min="1" max="100"
                                               class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-600 rounded">
                                        <span class="text-gray-300">Enable Console Logging</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="console-logging" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Log Viewer -->
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-orange-300">
                                        <i class="fas fa-eye mr-2"></i>Live Log Viewer
                                    </h3>
                                    <div class="flex space-x-2">
                                        <button onclick="clearLogs()" 
                                                class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
                                            <i class="fas fa-trash mr-1"></i>Clear
                                        </button>
                                        <button onclick="refreshLogs()" 
                                                class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">
                                            <i class="fas fa-sync-alt mr-1"></i>Refresh
                                        </button>
                                    </div>
                                </div>
                                <div id="live-logs" class="bg-black p-3 rounded font-mono text-sm h-64 overflow-y-auto">
                                    <div class="text-green-400">[2024-01-15 14:30:15] INFO: System initialized</div>
                                    <div class="text-blue-400">[2024-01-15 14:30:16] DEBUG: Loading configuration</div>
                                    <div class="text-yellow-400">[2024-01-15 14:30:17] WARN: High memory usage detected</div>
                                    <div class="text-cyan-400 animate-pulse">[2024-01-15 14:30:18] INFO: Monitoring active...</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Log Analytics -->
                        <div class="mt-6 bg-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-4 text-pink-300">
                                <i class="fas fa-chart-bar mr-2"></i>Log Analytics
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-green-400">1,234</div>
                                    <div class="text-sm text-gray-300">Info Messages</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-yellow-400">56</div>
                                    <div class="text-sm text-gray-300">Warnings</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-red-400">3</div>
                                    <div class="text-sm text-gray-300">Errors</div>
                                </div>
                                <div class="bg-gray-600 p-3 rounded text-center">
                                    <div class="text-2xl font-bold text-blue-400">45MB</div>
                                    <div class="text-sm text-gray-300">Total Size</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Save Settings Button -->
                    <div class="mt-8 flex justify-end space-x-4">
                        <button onclick="resetToDefaults()" 
                                class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-undo mr-2"></i>Reset to Defaults
                        </button>
                        <button onclick="saveAllSettings()" 
                                class="bg-yellow-600 hover:bg-yellow-700 px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-save mr-2"></i>Save All Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Domain Modal -->
        <div id="addDomainModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
            <div class="bg-gray-800 p-6 rounded-lg w-96">
                <h3 class="text-xl font-bold mb-4">Yeni Domain Ekle</h3>
                <form id="addDomainForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Domain Adı</label>
                        <input type="text" id="domainName" required
                               class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none"
                               placeholder="google.com (https:// olmadan)">
                    </div>

                    <div class="flex space-x-4">
                        <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 py-2 rounded-lg">
                            Ekle
                        </button>
                        <button type="button" onclick="hideAddDomain()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg">
                            İptal
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- DNS Add Modal -->
        <div id="dnsAddModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 p-6 rounded-lg w-full max-w-md">
                <h3 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-plus text-purple-400 mr-2"></i>
                    DNS Kaydı Ekle
                </h3>
                <form id="dnsAddForm">
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Domain</label>
                            <input type="text" id="dns-domain" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                   placeholder="example.com">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Name</label>
                            <input type="text" id="dns-name" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                   placeholder="@ veya subdomain">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Type</label>
                            <select id="dns-type" required onchange="updateDNSValuePlaceholder()"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none">
                                <option value="">Seçiniz</option>
                                <option value="A">A Record (IPv4)</option>
                                <option value="AAAA">AAAA Record (IPv6)</option>
                                <option value="CNAME">CNAME Record</option>
                                <option value="MX">MX Record</option>
                                <option value="TXT">TXT Record</option>
                                <option value="NS">NS Record</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Value</label>
                            <input type="text" id="dns-value" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                   placeholder="Değer">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">TTL</label>
                                <select id="dns-ttl"
                                        class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none">
                                    <option value="300">5 dakika</option>
                                    <option value="1800">30 dakika</option>
                                    <option value="3600" selected>1 saat</option>
                                    <option value="7200">2 saat</option>
                                    <option value="86400">1 gün</option>
                                </select>
                            </div>
                            
                            <div id="dns-priority-div" class="hidden">
                                <label class="block text-sm font-medium mb-2">Priority</label>
                                <input type="number" id="dns-priority" min="0" max="65535"
                                       class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none"
                                       placeholder="10">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Provider</label>
                            <select id="dns-provider"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-purple-400 focus:outline-none">
                                <option value="CLOUDFLARE">Cloudflare</option>
                                <option value="GODADDY">GoDaddy</option>
                                <option value="NAMECHEAP">Namecheap</option>
                                <option value="CUSTOM">Özel Sunucu</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 mt-6">
                        <button type="submit" class="flex-1 bg-purple-600 hover:bg-purple-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-plus mr-2"></i>Ekle
                        </button>
                        <button type="button" onclick="hideDNSAddModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-times mr-2"></i>İptal
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- DNS Edit Modal -->
        <div id="dnsEditModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 p-6 rounded-lg w-full max-w-md">
                <h3 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-edit text-blue-400 mr-2"></i>
                    DNS Kaydı Düzenle
                </h3>
                <form id="dnsEditForm">
                    <input type="hidden" id="edit-dns-id">
                    
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Domain</label>
                            <input type="text" id="edit-dns-domain" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Name</label>
                            <input type="text" id="edit-dns-name" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Type</label>
                            <select id="edit-dns-type" required onchange="updateEditDNSValuePlaceholder()"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                                <option value="A">A Record (IPv4)</option>
                                <option value="AAAA">AAAA Record (IPv6)</option>
                                <option value="CNAME">CNAME Record</option>
                                <option value="MX">MX Record</option>
                                <option value="TXT">TXT Record</option>
                                <option value="NS">NS Record</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Value</label>
                            <input type="text" id="edit-dns-value" required
                                   class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">TTL</label>
                                <select id="edit-dns-ttl"
                                        class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                                    <option value="300">5 dakika</option>
                                    <option value="1800">30 dakika</option>
                                    <option value="3600">1 saat</option>
                                    <option value="7200">2 saat</option>
                                    <option value="86400">1 gün</option>
                                </select>
                            </div>
                            
                            <div id="edit-dns-priority-div" class="hidden">
                                <label class="block text-sm font-medium mb-2">Priority</label>
                                <input type="number" id="edit-dns-priority" min="0" max="65535"
                                       class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Provider</label>
                            <select id="edit-dns-provider"
                                    class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-400 focus:outline-none">
                                <option value="CLOUDFLARE">Cloudflare</option>
                                <option value="GODLADDY">GoDaddy</option>
                                <option value="NAMECHEAP">Namecheap</option>
                                <option value="CUSTOM">Özel Sunucu</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 mt-6">
                        <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-save mr-2"></i>Güncelle
                        </button>
                        <button type="button" onclick="hideDNSEditModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg font-medium">
                            <i class="fas fa-times mr-2"></i>İptal
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- DNS Health Check Modal -->
        <div id="dnsHealthModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 p-6 rounded-lg w-full max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold flex items-center">
                        <i class="fas fa-heartbeat text-red-400 mr-2"></i>
                        DNS Sağlık Kontrolü
                    </h3>
                    <button onclick="hideDNSHealthModal()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div id="dns-health-content" class="space-y-4">
                    <!-- Health check results will be populated here -->
                </div>
                
                <div class="flex justify-end mt-6">
                    <button onclick="hideDNSHealthModal()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg">
                        Kapat
                    </button>
                </div>
            </div>
        </div>

        <!-- Universal Modal for Integrations -->
        <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div id="modal-content">
                <!-- Modal content will be dynamically loaded here -->
            </div>
        </div>

        <!-- Add Server Modal -->
        <div id="add-server-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="server-modal-title" class="text-lg font-semibold text-white">Add New Server</h3>
                    <button onclick="closeAddServerModal()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="server-form" data-mode="add">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Server Name</label>
                            <input type="text" id="server-name" required
                                   class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none"
                                   placeholder="Production Server 1">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">IP Address</label>
                            <input type="text" id="server-ip" required
                                   class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none"
                                   placeholder="192.168.1.100">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Server Type</label>
                            <select id="server-type" required
                                    class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none">
                                <option value="production">Production Server</option>
                                <option value="staging">Staging Server</option>
                                <option value="development">Development Server</option>
                                <option value="custom">Custom Server</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Location (Optional)</label>
                            <input type="text" id="server-location"
                                   class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-400 focus:outline-none"
                                   placeholder="US East, Europe, Asia, etc.">
                        </div>
                        
                        <div class="bg-gray-700 p-3 rounded-lg">
                            <h4 class="text-sm font-medium text-gray-300 mb-2">
                                <i class="fas fa-info-circle mr-2 text-blue-400"></i>Server Information
                            </h4>
                            <ul class="text-sm text-gray-400 space-y-1">
                                <li>• Enter the server's public IP address or hostname</li>
                                <li>• Server will be automatically tested after adding</li>
                                <li>• Health checks will be performed every 5 minutes</li>
                                <li>• Use meaningful names to identify your servers</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3 mt-6">
                        <button type="button" onclick="saveServer()" 
                                class="flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white">
                            <i class="fas fa-save mr-2"></i>Save Server
                        </button>
                        <button type="button" onclick="closeAddServerModal()" 
                                class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <style>
            .nav-btn {
                background-color: #374151;
            }
            .nav-btn:hover, .nav-btn.active {
                background-color: #4F46E5;
            }
        </style>

        <!-- React Feature Flag System -->
        <div id="react-dashboard-root" style="display: none;">
            <!-- React components will be rendered here when enabled -->
        </div>
        
        <!-- React Feature Control Panel (Development Mode) -->
        <div id="react-controls" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(30,41,59,0.95)); backdrop-filter: blur(10px); padding: 16px; border-radius: 12px; font-size: 13px; box-shadow: 0 8px 32px rgba(0,0,0,0.4); border: 1px solid rgba(148,163,184,0.1); min-width: 200px;">
            <div style="color: #f8fafc; margin-bottom: 12px; font-weight: 600; text-align: center;">
                <i class="fas fa-atom" style="margin-right: 6px; color: #60a5fa;"></i>React Features
            </div>
            <!-- First Row: React UI (full width) -->
            <button id="toggle-react-ui" onclick="toggleReact()" style="width: 100%; background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(79,70,229,0.3); margin-bottom: 8px;" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 6px 16px rgba(79,70,229,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(79,70,229,0.3)'">
                <i class="fas fa-rocket" style="margin-right: 6px;"></i>Use React UI
            </button>
            
            <!-- Second Row: Real-time + AI (side by side) -->
            <div style="display: flex; gap: 6px; margin-bottom: 0;">
                <button id="toggle-websocket" onclick="toggleWebSocket()" style="flex: 1; background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 6px 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 3px 8px rgba(16,185,129,0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 10px rgba(16,185,129,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 8px rgba(16,185,129,0.3)'">
                    <i class="fas fa-play" style="margin-right: 4px;"></i>Real-time
                </button>
                <button id="toggle-ai" onclick="toggleAI()" style="flex: 1; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 6px 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 3px 8px rgba(139,92,246,0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 10px rgba(139,92,246,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 8px rgba(139,92,246,0.3)'">
                    <i class="fas fa-robot" style="margin-right: 4px;"></i>AI Bot
                </button>
            </div>
            <div id="react-status" style="color: #94a3b8; margin-top: 8px; font-size: 11px; text-align: center; font-weight: 500;">
                <i class="fas fa-code" style="margin-right: 4px; color: #94a3b8;"></i>Vanilla JS Active
            </div>
        </div>

        <!-- Load React Feature System -->
        <script src="/static/react-loader.js"></script>
        
        <!-- Load WebSocket Manager -->
        <script src="/static/websocket-manager.js"></script>
        
        <!-- Load AI Behavior Tracker -->
        <script src="/static/ai-behavior-tracker.js"></script>
        
        <!-- Main Dashboard Script -->
        <script src="/static/dashboard.js"></script>
        
        <!-- React Status Monitor -->
        <script>
            // React status monitor - güncelle button durumunu
            function updateReactStatus() {
                const statusDiv = document.getElementById('react-status')
                const toggleBtn = document.getElementById('toggle-react-ui')
                const reactRoot = document.getElementById('react-dashboard-root')
                
                if (!window.reactFeatures) return
                
                // Gerçek duruma göre button ve status'u ayarla
                if (window.reactFeatures.isEnabled('reactUI')) {
                    // React aktif
                    toggleBtn.innerHTML = '<i class="fas fa-arrow-left" style="margin-right: 6px;"></i>Use Vanilla JS'
                    toggleBtn.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)'
                    statusDiv.innerHTML = '<i class="fas fa-bolt" style="margin-right: 4px; color: #10b981;"></i>React UI Active'
                    statusDiv.style.color = '#10b981'
                    if (reactRoot) reactRoot.style.display = 'block'
                } else {
                    // Vanilla JS aktif
                    toggleBtn.innerHTML = '<i class="fas fa-rocket" style="margin-right: 6px;"></i>Use React UI'
                    toggleBtn.style.background = 'linear-gradient(135deg, #4f46e5, #7c3aed)'
                    statusDiv.innerHTML = '<i class="fas fa-code" style="margin-right: 4px; color: #94a3b8;"></i>Vanilla JS Active'
                    statusDiv.style.color = '#94a3b8'
                    if (reactRoot) reactRoot.style.display = 'none'
                }
            }
            
            // WebSocket toggle fonksiyonu
            function toggleWebSocket() {
                if (!window.wsManager) {
                    console.error('WebSocket Manager not loaded')
                    return
                }
                
                if (window.wsManager.enabled) {
                    console.log('🔴 Disabling real-time updates...')
                    window.wsManager.disable()
                } else {
                    console.log('🟢 Enabling real-time updates...')
                    window.wsManager.enable()
                }
                
                // Status'ü hemen güncelle
                setTimeout(updateWebSocketStatus, 100)
            }
            
            // WebSocket status güncelle
            function updateWebSocketStatus() {
                const toggleBtn = document.getElementById('toggle-websocket')
                
                if (!window.wsManager) return
                
                if (!window.wsManager.enabled) {
                    // Deaktif - ENABLE butonunu göster
                    toggleBtn.innerHTML = '<i class="fas fa-play" style="margin-right: 4px;"></i>Real-time'
                    toggleBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)'
                } else if (window.wsManager.enabled && !window.wsManager.isConnected) {
                    // Aktif ama bağlanıyor/hatalı
                    toggleBtn.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 4px;"></i>Connecting'
                    toggleBtn.style.background = 'linear-gradient(135deg, #6366f1, #8b5cf6)'
                } else if (window.wsManager.enabled && window.wsManager.isConnected) {
                    // Aktif ve bağlı - DİSABLE butonunu göster
                    toggleBtn.innerHTML = '<i class="fas fa-stop" style="margin-right: 4px;"></i>Live ON'
                    toggleBtn.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)'
                }
            }
            
            // AI toggle fonksiyonu
            function toggleAI() {
                if (!window.aiTracker) {
                    console.error('AI Tracker not loaded')
                    return
                }
                
